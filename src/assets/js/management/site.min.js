function changeLanguage(n){jQuery.postData("/Home/ChangeLanguage",{culture:n}).done(function(){location.href=repairLink(null,n)})}function repairLink(n,t){var i=jQuery.getQueryParameters();return t&&(i[config.CULTURE_QUERY_NAME]=t),n?n.indexOf("?")>=0&&(n=n.substr(0,n.indexOf("?"))):n=window.location.origin+window.location.pathname,n+"?"+jQuery.param(i)}function showMessage(n,t){n=n?"#"+n+" ":"";messageContainer=jQuery(n+".message");messageContainer&&(t?(t.succeeded?messageContainer.removeClass("text-danger").addClass("text-success"):messageContainer.removeClass("text-success").addClass("text-danger"),messageContainer.html(t.message)):messageContainer.html(""))}function getAvatarDefault(){return"/images/no-avatar.png"}function createPaging(n,t,i,r){var u,f,e,h,s,o;if(n>0&&t>0&&i>0){if(r||(r="changePage"),u=Math.ceil(n/t),!u||u<2)return"";for(i<1?i=1:i>u&&(i=u),f=i-2,e=i+2,f<1&&(e<u&&(e+=1-f),f=1),e>u&&(f>1&&(f-=e-u),e=u),f<1&&(f=1),e>u&&(e=u),h='<ul class="pagination"><li><a href="#">&laquo;<\/a><\/li>{0}<li><a href="#">&raquo;<\/a><\/li><\/ul>',s="",o=f;o<=e;o++)s+="<li><a"+(o===i?' class="active"':"")+' href="javascript:'+r+"("+o+')">'+o+"<\/a><\/li>";return h.replace("{0}",s)}return""}function setKeyDownEvent(n,t){jQuery(n).on("keydown",function(n){n.which===13&&(typeof t=="function"&&t(),n.preventDefault())})}function initControl(n,t){"use strict";var r=function(){var n=this;t(document).ready(function(){n.initialize()})},i=r.prototype;i.initialize=function(){this._enableEvents();this._initButtonStates();this._initIconSearch();this._initInversedTogglers();this._initChatMessage()};i._enableEvents=function(){var n=this;t(".card-head .tools .btn-refresh").on("click",function(t){n._handleCardRefresh(t)});t(".card-head .tools .btn-collapse").on("click",function(t){n._handleCardCollapse(t)});t(".card-head .tools .btn-close").on("click",function(t){n._handleCardClose(t)});t(".card-head .tools .menu-card-styling a").on("click",function(t){n._handleCardStyling(t)});t(".theme-selector a").on("click",function(t){n._handleThemeSwitch(t)})};i._handleCardRefresh=function(n){var r=this,i=t(n.currentTarget).closest(".card");materialadmin.AppCard.addCardLoader(i);setTimeout(function(){materialadmin.AppCard.removeCardLoader(i)},1500)};i._handleCardCollapse=function(n){var i=t(n.currentTarget).closest(".card");materialadmin.AppCard.toggleCardCollapse(i)};i._handleCardClose=function(n){var i=t(n.currentTarget).closest(".card");materialadmin.AppCard.removeCard(i)};i._handleCardStyling=function(n){var r=t(n.currentTarget).data("style"),u=t(n.currentTarget).closest(".card"),i,f;t(n.currentTarget).closest("ul").find("li").removeClass("active");t(n.currentTarget).closest("li").addClass("active");i=u.closest('[class*="style-"]');i.length>0&&!i.hasClass("style-white")&&!i.hasClass("style-transparent")?i.attr("class",function(n,t){return t.replace(/\bstyle-\S+/g,r)}):(f=!1,u.find('[class*="style-"]').each(function(){t(this).hasClass("style-white")||t(this).hasClass("style-transparent")||(t(this).attr("class",function(n,t){return t.replace(/\bstyle-\S+/g,r)}),f=!0)}),f===!1&&u.addClass(r))};i._handleThemeSwitch=function(n){n.preventDefault();var i=t(n.currentTarget).attr("href");this.switchTheme(i)};i.switchTheme=function(n){t("link").each(function(){var i=t(this).attr("href");i=i.replace(/(assets\/css\/)(.*)(\/)/g,"assets/css/"+n+"/");t(this).attr("href",i)})};i._initChatMessage=function(){var n=this;t("#sidebarChatMessage").keydown(function(t){n._handleChatMessage(t)})};i._handleChatMessage=function(n){var u=t(n.currentTarget),r;if(n.keyCode===13){n.preventDefault();var f=(new Date).getHours()+":"+(new Date).getMinutes(),e=t(".list-chats li img").attr("src"),i="";i+="<li>";i+='\t<div class="chat">';i+='\t\t<div class="chat-avatar"><img class="img-circle" src="'+e+'" alt=""><\/div>';i+='\t\t<div class="chat-body">';i+="\t\t\t"+u.val();i+="\t\t\t<small>"+f+"<\/small>";i+="\t\t<\/div>";i+="\t<\/div>";i+="<\/li>";r=t(i).hide();t(".list-chats").prepend(r);r.show("fast");u.val("").trigger("autosize.resize");t(".offcanvas").trigger("refresh")}};i._initInversedTogglers=function(){var n=this;t('input[name="menubarInversed"]').on("change",function(t){n._handleMenubarInversed(t)});t('input[name="headerInversed"]').on("change",function(t){n._handleHeaderInversed(t)})};i._handleMenubarInversed=function(n){t(n.currentTarget).val()==="1"?t("#menubar").addClass("menubar-inverse"):t("#menubar").removeClass("menubar-inverse")};i._handleHeaderInversed=function(n){t(n.currentTarget).val()==="1"?t("#header").addClass("header-inverse"):t("#header").removeClass("header-inverse")};i._initButtonStates=function(){t(".btn-loading-state").click(function(){var n=t(this);n.button("loading");setTimeout(function(){n.button("reset")},3e3)})};i._initIconSearch=function(){if(t("#iconsearch").length!==0){t("#iconsearch").focus();t("#iconsearch").on("keyup",function(){var n=t("#iconsearch").val();t(".col-md-3").hide();t('.col-md-3:contains("'+n+'")').each(function(){t(this).show()});t(".card").hide();t('.card:contains("'+n+'")').each(function(){t(this).show()})})}};n.Management=new r}function initPage_Blog(){$(".blog-delete").click(function(){if(confirm($(this).attr("message"))){var n={id:$(this).attr("id")};$.postData("/management/blog/delete",n).done(function(n){n.succeeded?location.reload():alert(n.message)}).fail(function(n,t,i){alert(i)})}})}function initPage_BlogDetail(){$("#contain-img").attr("value")&&$("#contain-img").css({"background-image":"url("+$("#contain-img").attr("value")+")"});var n=$("#PublishedDate").val();$("#published-date").datepicker({autoclose:!0,todayHighlight:!0,format:config.DATE_FORMAT,value:n});$(".summernote").summernote({minHeight:300});$("#contain-img").mouseover(function(){$("#lbl-select-image").show()}).mouseout(function(){$("#lbl-select-image").hide()});openFile=function(){$("#ImageData").trigger("click")};$("#ImageData").change(function(){var t=this.files[0],n=new FileReader;n.addEventListener("load",function(){$("#contain-img").css({"background-image":"url("+n.result+")"})},!1);t&&n.readAsDataURL(t)});$("#form-blog").submit(function(n){n.preventDefault();var t=new FormData;t.append("ImageData",this.ImageData.files.length>0?this.ImageData.files[0]:null);t.append("Title_VI",this.Title_VI.value);t.append("Title_EN",this.Title_EN.value);t.append("PublishedDate",$("#published-date").datepicker("getDate")?$("#published-date").datepicker("getDate").toISOString():null);t.append("Content_VI",this.Content_VI.value);t.append("Content_EN",this.Content_EN.value);t.append("__RequestVerificationToken",this.__RequestVerificationToken.value);$.postData(this.action,t,{processData:!1,contentType:!1}).done(function(n){n.succeeded?document.location.href=repairLink("/management/blog"):alert(n.message)}).fail(function(n,t,i){alert(i)})})}function initPage_Account(){initControl_Account(materialadmin,jQuery)}function initPage_AccountChangePassword(){$("#form-changepassword").submit(function(n){n.preventDefault();var t={Password:this.Password.value,NewPassword:this.NewPassword.value,ConfirmNewPassword:this.ConfirmNewPassword.value};$.postData(this.action,JSON.stringify(t),{contentType:"application/json; charset=utf-8"}).done(function(n){alert(n.message);n.succeeded&&(location.href="/management/")})})}function initControl_Account(n,t){"use strict";var r=function(){var n=this;t(document).ready(function(){n.initialize()})},i=r.prototype;i.map=null;i.initialize=function(){this._initDuplicateSource();this._initSummernote();this._initDatetime();this._initMultiselect();this._initGMaps();this._initInputMask()};i._initDuplicateSource=function(){var n=this;t("[data-duplicate]").on("click",function(){var i=t(this),r=i.data("duplicate"),u=t(i.data("target"));n._duplicateTemplate(r,u)});t("[data-duplicate]").each(function(){var i=t(this),r=i.data("duplicate"),u=t(i.data("target"));n._duplicateTemplate(r,u)})};i._duplicateTemplate=function(n,i){var e,u,f,r;if(typeof tmpl!="undefined"){e=this;u=i.data("index")>0?i.data("index"):i.children().length+1;i.data("index",u+1);f=tmpl(n,{index:u});r=t(f).appendTo(i).hide().slideDown("fast");this._initDatetime(r,u);r.on("click",".btn-delete",function(){r.slideUp("fast",function(){r.remove()})})}};i._initGMaps=function(){typeof GMaps!="undefined"&&t("#map-canvas").length!==0&&(this.map=new GMaps({div:"#map-canvas",lat:52.37695,lng:4.898365,zoom:11,disableDefaultUI:!0}),this.map.addMarker({lat:52.3705,lng:4.90454,title:"Amsterdam",click:function(){alert("You clicked in this marker")}}),this._initGMapsEvents())};i._initGMapsEvents=function(){var n=this;t("#street, #streetnumber, #city, #zip").on("change",function(){n._startGeocoding()})};i._startGeocoding=function(){var n=this;GMaps.geocode({address:n._formatAddress(),callback:function(t,i){i==="OK"&&n._addMarker(t,i)}})};i._addMarker=function(n){this.map.removeMarkers();var t=n[0].geometry.location;this.map.setCenter(t.lat(),t.lng());this.map.addMarker({lat:t.lat(),lng:t.lng()})};i._formatAddress=function(){var n=[],i=t("#street").val()+" "+t("#streetnumber").val(),r=t("#city").val(),u=t("#zip").val();return t.trim(i)!==""&&n.push(i),t.trim(r)!==""&&n.push(r),t.trim(u)!==""&&n.push(u),n.join(",")};i._initSummernote=function(){t.isFunction(t.fn.summernote)&&t("#summernote").length!==0&&t("#summernote").summernote({height:t("#summernote").height(),toolbar:[["style",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]]]})};i._initMultiselect=function(){t.isFunction(t.fn.multiselect)&&t('select[name="category"]').multiselect({buttonClass:"form-control",buttonContainer:'<div class="btn-group btn-group-justified" />'})};i._initDatetime=function(){t.isFunction(t.fn.datepicker)&&t(".input-daterange").datepicker({todayHighlight:!0})};i._initInputMask=function(){t.isFunction(t.fn.inputmask)&&t(":input").inputmask()};n.Account=new r}var config={CULTURE_QUERY_NAME:"lang",DATE_FORMAT:null},CKEDITOR_BASEPATH="/lib/ckeditor/";String.prototype.replaceAll=function(n,t){var i=this;return i.split(n).join(t)};jQuery.extend({getQueryParameters:function(n){return(n||document.location.search).replace(/(^\?)/,"").split("&").map(function(n){return n=n.split("="),this[n[0]]=n[1],this}.bind({}))[0]},getQueryParameterByName:function(n,t){t||(t=window.location.href);n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},getData:function(n,t,i){var u,f,e,r={done:function(n){return n&&typeof n=="function"&&(u=n),r},fail:function(n){return n&&typeof n=="function"&&(f=n),r},always:function(n){return n&&typeof n=="function"&&(e=n),r}};return n=repairLink(n),i||(i={}),i.type="GET",i.url=n,i.data=t,i.cache=!1,i.success=function(n,t,i){u&&u(n,t,i)},i.error=function(n,t,i){f&&f(n,t,i)},i.complete=function(n,t){e&&e(n,t)},jQuery.ajax(i),r},postData:function(n,t,i){var u,f,e,r={done:function(n){return n&&typeof n=="function"&&(u=n),r},fail:function(n){return n&&typeof n=="function"&&(f=n),r},always:function(n){return n&&typeof n=="function"&&(e=n),r}};return n=repairLink(n),i||(i={}),i.type="POST",i.url=n,i.data=t,i.cache=!1,i.success=function(n,t,i){u&&u(n,t,i)},i.error=function(n,t,i){f&&f(n,t,i)},i.complete=function(n,t){e&&e(n,t)},jQuery.ajax(i),r}});
/*!
 * JavaScript Cookie v2.1.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
(function(n){if(typeof define=="function"&&define.amd)define(n);else if(typeof exports=="object")module.exports=n();else{var i=window.Cookies,t=window.Cookies=n();t.noConflict=function(){return window.Cookies=i,t}}})(function(){function n(){for(var n=0,r={},t,i;n<arguments.length;n++){t=arguments[n];for(i in t)r[i]=t[i]}return r}function t(i){function r(t,u,f){var o,s;if(typeof document!="undefined"){if(arguments.length>1){f=n({path:"/"},r.defaults,f);typeof f.expires=="number"&&(s=new Date,s.setMilliseconds(s.getMilliseconds()+f.expires*864e5),f.expires=s);try{o=JSON.stringify(u);/^[\{\[]/.test(o)&&(u=o)}catch(y){}return u=i.write?i.write(u,t):encodeURIComponent(String(u)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",u,f.expires&&"; expires="+f.expires.toUTCString(),f.path&&"; path="+f.path,f.domain&&"; domain="+f.domain,f.secure?"; secure":""].join("")}t||(o={});for(var l=document.cookie?document.cookie.split("; "):[],a=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var v=l[c].split("="),h=v[0].replace(a,decodeURIComponent),e=v.slice(1).join("=");e.charAt(0)==='"'&&(e=e.slice(1,-1));try{if(e=i.read?i.read(e,h):i(e,h)||e.replace(a,decodeURIComponent),this.json)try{e=JSON.parse(e)}catch(y){}if(t===h){o=e;break}t||(o[h]=e)}catch(y){}}return o}}return r.set=r,r.get=function(n){return r(n)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,i){r(t,"",n(i,{expires:-1}))},r.withConverter=t,r}return t(function(){})}),function(n,t){typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?module.exports=t():n.store=t()}(this,function(){function l(){try{return i in o&&o[i]}catch(n){return!1}}var n={},o=typeof window!="undefined"?window:global,s=o.document,i="localStorage",c="script",t,u,f,r;if(n.disabled=!1,n.version="1.3.20",n.set=function(){},n.get=function(){},n.has=function(t){return n.get(t)!==undefined},n.remove=function(){},n.clear=function(){},n.transact=function(t,i,r){r==null&&(r=i,i=null);i==null&&(i={});var u=n.get(t,i);r(u);n.set(t,u)},n.getAll=function(){},n.forEach=function(){},n.serialize=function(n){return JSON.stringify(n)},n.deserialize=function(n){if(typeof n!="string")return undefined;try{return JSON.parse(n)}catch(t){return n||undefined}},l())t=o[i],n.set=function(i,r){return r===undefined?n.remove(i):(t.setItem(i,n.serialize(r)),r)},n.get=function(i,r){var u=n.deserialize(t.getItem(i));return u===undefined?r:u},n.remove=function(n){t.removeItem(n)},n.clear=function(){t.clear()},n.getAll=function(){var t={};return n.forEach(function(n,i){t[n]=i}),t},n.forEach=function(i){for(var u,r=0;r<t.length;r++)u=t.key(r),i(u,n.get(u))};else if(s&&s.documentElement.addBehavior){try{f=new ActiveXObject("htmlfile");f.open();f.write("<"+c+">document.w=window<\/"+c+'><iframe src="/favicon.ico"><\/iframe>');f.close();u=f.w.frames[0].document;t=u.createElement("div")}catch(v){t=s.createElement("div");u=s.body}var e=function(r){return function(){var f=Array.prototype.slice.call(arguments,0),e;return f.unshift(t),u.appendChild(t),t.addBehavior("#default#userData"),t.load(i),e=r.apply(n,f),u.removeChild(t),e}},a=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),h=function(n){return n.replace(/^d/,"___$&").replace(a,"___")};n.set=e(function(t,r,u){return(r=h(r),u===undefined)?n.remove(r):(t.setAttribute(r,n.serialize(u)),t.save(i),u)});n.get=e(function(t,i,r){i=h(i);var u=n.deserialize(t.getAttribute(i));return u===undefined?r:u});n.remove=e(function(n,t){t=h(t);n.removeAttribute(t);n.save(i)});n.clear=e(function(n){var r=n.XMLDocument.documentElement.attributes,t;for(n.load(i),t=r.length-1;t>=0;t--)n.removeAttribute(r[t].name);n.save(i)});n.getAll=function(){var t={};return n.forEach(function(n,i){t[n]=i}),t};n.forEach=e(function(t,i){for(var f=t.XMLDocument.documentElement.attributes,u=0,r;r=f[u];++u)i(r.name,n.deserialize(t.getAttribute(r.name)))})}try{r="__storejs__";n.set(r,r);n.get(r)!=r&&(n.disabled=!0);n.remove(r)}catch(v){n.disabled=!0}return n.enabled=!n.disabled,n}),function(n,t){typeof module=="object"&&module.exports?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Spinner=t()}(this,function(){"use strict";function i(n,t){var i=document.createElement(n||"div");for(var r in t)i[r]=t[r];return i}function t(n){for(var t=1,i=arguments.length;t<i;t++)n.appendChild(arguments[t]);return n}function a(n,t,i,r){var e=["opacity",t,~~(n*100),i,r].join("-"),o=.01+i/r*100,s=Math.max(1-(1-n)/t*(100-o),n),c=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=c&&"-"+c+"-"||"";return h[e]||(f.insertRule("@"+l+"keyframes "+e+"{0%{opacity:"+s+"}"+o+"%{opacity:"+n+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+n+"}100%{opacity:"+s+"}}",f.cssRules.length),h[e]=1),e}function o(n,t){var u=n.style,r,i;if(t=t.charAt(0).toUpperCase()+t.slice(1),u[t]!==undefined)return t;for(i=0;i<s.length;i++)if(r=s[i]+t,u[r]!==undefined)return r}function n(n,t){for(var i in t)n.style[o(n,i)||i]=t[i];return n}function c(n){for(var r,i,t=1;t<arguments.length;t++){r=arguments[t];for(i in r)n[i]===undefined&&(n[i]=r[i])}return n}function l(n,t){return typeof n=="string"?n:n[t%n.length]}function r(n){this.opts=c(n||{},r.defaults,v)}function y(){function u(n,t){return i("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}f.addRule(".spin-vml","behavior:url(#default#VML)");r.prototype.lines=function(i,r){function s(){return n(u("group",{coordsize:o+" "+o,coordorigin:-e+" "+-e}),{width:o,height:o})}function a(i,f,o){t(c,t(n(s(),{rotation:360/r.lines*i+"deg",left:~~f}),t(n(u("roundrect",{arcsize:r.corners}),{width:e,height:r.scale*r.width,left:r.scale*r.radius,top:-r.scale*r.width>>1,filter:o}),u("fill",{color:l(r.color,i),opacity:r.opacity}),u("stroke",{opacity:0}))))}var e=r.scale*(r.length+r.width),o=r.scale*2*e,h=-(r.width+r.length)*r.scale*2+"px",c=n(s(),{position:"absolute",top:h,left:h}),f;if(r.shadow)for(f=1;f<=r.lines;f++)a(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=r.lines;f++)a(f);return t(i,c)};r.prototype.opacity=function(n,t,i,r){var u=n.firstChild;r=r.shadow&&r.lines||0;u&&t+r<u.childNodes.length&&(u=u.childNodes[t+r],u=u&&u.firstChild,u=u&&u.firstChild,u&&(u.opacity=i))}}var s=["webkit","Moz","ms","O"],h={},u,f,v={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},e;return r.defaults={},c(r.prototype,{spin:function(t){this.stop();var f=this,r=f.opts,e=f.el=i(null,{className:r.className});if(n(e,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),t&&t.insertBefore(e,t.firstChild||null),e.setAttribute("role","progressbar"),f.lines(e,f.opts),!u){var s=0,l=(r.lines-1)*(1-r.direction)/2,h,c=r.fps,o=c/r.speed,a=(1-r.opacity)/(o*r.trail/100),v=o/r.lines;(function y(){s++;for(var n=0;n<r.lines;n++)h=Math.max(1-(s+(r.lines-n)*v)%o*a,r.opacity),f.opacity(e,n*r.direction+l,h,r);f.timeout=f.el&&setTimeout(y,~~(1e3/c))})()}return f},stop:function(){var n=this.el;return n&&(clearTimeout(this.timeout),n.parentNode&&n.parentNode.removeChild(n),this.el=undefined),this},lines:function(r,f){function s(t,r){return n(i(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:t,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*e+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var e=0,h=(f.lines-1)*(1-f.direction)/2,o;e<f.lines;e++)o=n(i(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:u&&a(f.opacity,f.trail,h+e*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&t(o,n(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(o,s(l(f.color,e),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(n,t,i){t<n.childNodes.length&&(n.childNodes[t].style.opacity=i)}}),typeof document!="undefined"&&(f=function(){var n=i("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),e=n(i("group"),{behavior:"url(#default#VML)"}),!o(e,"transform")&&e.adj?y():u=o(e,"animation")),r});
/*!
	Autosize 3.0.20
	license: MIT
	http://www.jacklmoore.com/autosize
*/
(function(n,t){if(typeof define=="function"&&define.amd)define(["exports","module"],t);else if(typeof exports!="undefined"&&typeof module!="undefined")t(exports,module);else{var i={exports:{}};t(i.exports,i);n.autosize=i.exports}})(this,function(n,t){"use strict";function f(n){function l(){var r=window.getComputedStyle(n,null);r.resize==="vertical"?n.style.resize="none":r.resize==="both"&&(n.style.resize="horizontal");i=r.boxSizing==="content-box"?-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)):parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth);isNaN(i)&&(i=0);t()}function c(t){var i=n.style.width;n.style.width="0px";n.offsetWidth;n.style.width=i;n.style.overflowY=t}function a(n){for(var t=[];n&&n.parentNode&&n.parentNode instanceof Element;)n.parentNode.scrollTop&&t.push({node:n.parentNode,scrollTop:n.parentNode.scrollTop}),n=n.parentNode;return t}function e(){var u=n.style.height,f=a(n),t=document.documentElement&&document.documentElement.scrollTop,r;if(n.style.height="auto",r=n.scrollHeight+i,n.scrollHeight===0){n.style.height=u;return}n.style.height=r+"px";s=n.clientWidth;f.forEach(function(n){n.node.scrollTop=n.scrollTop});t&&(document.documentElement.scrollTop=t)}function t(){var r;e();var f=Math.round(parseFloat(n.style.height)),i=window.getComputedStyle(n,null),t=Math.round(parseFloat(i.height));if(t!==f?i.overflowY!=="visible"&&(c("visible"),e(),t=Math.round(parseFloat(window.getComputedStyle(n,null).height))):i.overflowY!=="hidden"&&(c("hidden"),e(),t=Math.round(parseFloat(window.getComputedStyle(n,null).height))),h!==t){h=t;r=u("autosize:resized");try{n.dispatchEvent(r)}catch(o){}}}var o,f;if(n&&n.nodeName&&n.nodeName==="TEXTAREA"&&!r.has(n)){var i=null,s=n.clientWidth,h=null;o=function(){n.clientWidth!==s&&t()};f=function(i){window.removeEventListener("resize",o,!1);n.removeEventListener("input",t,!1);n.removeEventListener("keyup",t,!1);n.removeEventListener("autosize:destroy",f,!1);n.removeEventListener("autosize:update",t,!1);Object.keys(i).forEach(function(t){n.style[t]=i[t]});r["delete"](n)}.bind(n,{height:n.style.height,resize:n.style.resize,overflowY:n.style.overflowY,overflowX:n.style.overflowX,wordWrap:n.style.wordWrap});n.addEventListener("autosize:destroy",f,!1);"onpropertychange"in n&&"oninput"in n&&n.addEventListener("keyup",t,!1);window.addEventListener("resize",o,!1);n.addEventListener("input",t,!1);n.addEventListener("autosize:update",t,!1);n.style.overflowX="hidden";n.style.wordWrap="break-word";r.set(n,{destroy:f,update:t});l()}}function e(n){var t=r.get(n);t&&t.destroy()}function o(n){var t=r.get(n);t&&t.update()}var r=typeof Map=="function"?new Map:function(){var n=[],t=[];return{has:function(t){return n.indexOf(t)>-1},get:function(i){return t[n.indexOf(i)]},set:function(i,r){n.indexOf(i)===-1&&(n.push(i),t.push(r))},"delete":function(i){var r=n.indexOf(i);r>-1&&(n.splice(r,1),t.splice(r,1))}}}(),u=function(n){return new Event(n,{bubbles:!0})},i;try{new Event("test")}catch(s){u=function(n){var t=document.createEvent("Event");return t.initEvent(n,!0,!1),t}}i=null;typeof window=="undefined"||typeof getComputedStyle!="function"?(i=function(n){return n},i.destroy=function(n){return n},i.update=function(n){return n}):(i=function(n,t){return n&&Array.prototype.forEach.call(n.length?n:[n],function(n){return f(n,t)}),n},i.destroy=function(n){return n&&Array.prototype.forEach.call(n.length?n:[n],e),n},i.update=function(n){return n&&Array.prototype.forEach.call(n.length?n:[n],o),n});t.exports=i}),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof module=="object"&&module.exports?module.exports=n(require("jquery")):n(window.jQuery)}(function(n){"use strict";var r=function(){var t=function(n){return function(t){return n===t}},i=function(n,t){return n===t},r=function(n){return function(t,i){return t[n]===i[n]}},u=function(){return!0},f=function(){return!1},e=function(n){return function(){return!n.apply(n,arguments)}},o=function(n,t){return function(i){return n(i)&&t(i)}},s=function(n){return n},h=function(n,t){return function(){return n[t].apply(n,arguments)}},c=0,l=function(n){var t=++c+"";return n?n+t:t},a=function(t){var i=n(document);return{top:t.top+i.scrollTop(),left:t.left+i.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},v=function(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[n[t]]=t);return i},y=function(n,t){return t=t||"",t+n.split(".").map(function(n){return n.substring(0,1).toUpperCase()+n.substring(1)}).join("")},p=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}};return{eq:t,eq2:i,peq2:r,ok:u,fail:f,self:s,not:e,and:o,invoke:h,uniqueId:l,rect2bnd:a,invertObject:v,namespaceToCamel:y,debounce:p}}(),i=function(){var u=function(n){return n[0]},t=function(n){return n[n.length-1]},o=function(n){return n.slice(0,n.length-1)},f=function(n){return n.slice(1)},s=function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r))return r},h=function(n,t){for(var i=0,r=n.length;i<r;i++)if(!t(n[i]))return!1;return!0},i=function(t,i){return n.inArray(i,t)},e=function(n,t){return i(n,t)!==-1},c=function(n,t){return t=t||r.self,n.reduce(function(n,i){return n+t(i)},0)},l=function(n){for(var i=[],t=-1,r=n.length;++t<r;)i[t]=n[t];return i},a=function(n){return!n||!n.length},v=function(n,i){if(!n.length)return[];var r=f(n);return r.reduce(function(n,r){var u=t(n);return i(t(u),r)?u[u.length]=r:n[n.length]=[r],n},[[u(n)]])},y=function(n){for(var i=[],t=0,r=n.length;t<r;t++)n[t]&&i.push(n[t]);return i},p=function(n){for(var i=[],t=0,r=n.length;t<r;t++)e(i,n[t])||i.push(n[t]);return i},w=function(n,t){var r=i(n,t);return r===-1?null:n[r+1]},b=function(n,t){var r=i(n,t);return r===-1?null:n[r-1]};return{head:u,last:t,initial:o,tail:f,prev:b,next:w,find:s,contains:e,all:h,sum:c,from:l,isEmpty:a,clusterBy:v,compact:y,unique:p}}(),w=typeof define=="function"&&define.amd,tt=function(t){var r=t==="Comic Sans MS"?"Courier New":"Comic Sans MS",i=n("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),u=i.css("fontFamily",r).width(),f=i.css("fontFamily",t+","+r).width();return i.remove(),u!==f},h=navigator.userAgent,b=/MSIE|Trident/i.test(h),y,c,l,a;if(b&&(c=/MSIE (\d+[.]\d+)/.exec(h),c&&(y=parseFloat(c[1])),c=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(h),c&&(y=parseFloat(c[1]))),l=/Edge\/\d+/.test(h),a=!!window.CodeMirror,!a&&w&&typeof require!="undefined")if(typeof require.resolve!="undefined")try{require.resolve("codemirror");a=!0}catch(rr){}else typeof eval("require").specified!="undefined"&&(a=eval("require").specified("codemirror"));var f={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:b,isEdge:l,isFF:!l&&/firefox/i.test(h),isPhantom:/PhantomJS/i.test(h),isWebkit:!l&&/webkit/i.test(h),isChrome:!l&&/chrome/i.test(h),isSafari:!l&&/safari/i.test(h),browserVersion:y,jqueryVersion:parseFloat(n.fn.jquery),isSupportAmd:w,hasCodeMirror:a,isFontInstalled:tt,isW3CRangeSupport:!!document.createRange},k=String.fromCharCode(160),it="ï»¿",t=function(){var o=function(t){return t&&n(t).hasClass("note-editable")},ui=function(t){return t&&n(t).hasClass("note-control-sizing")},u=function(n){return n=n.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===n}},s=function(n){return n&&n.nodeType===3},fi=function(n){return n&&n.nodeType===1},a=function(n){return n&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(n.nodeName.toUpperCase())},h=function(n){return o(n)?!1:n&&/^DIV|^P|^LI|^H[1-7]/.test(n.nodeName.toUpperCase())},ei=function(n){return n&&/^H[1-7]/.test(n.nodeName.toUpperCase())},oi=u("PRE"),st=u("LI"),si=function(n){return h(n)&&!st(n)},ht=u("TABLE"),ct=u("DATA"),v=function(n){return!nt(n)&&!lt(n)&&!hi(n)&&!h(n)&&!ht(n)&&!g(n)&&!ct(n)},lt=function(n){return n&&/^UL|^OL/.test(n.nodeName.toUpperCase())},hi=u("HR"),at=function(n){return n&&/^TD|^TH/.test(n.nodeName.toUpperCase())},g=u("BLOCKQUOTE"),nt=function(n){return at(n)||g(n)||o(n)},vt=u("A"),ci=function(n){return v(n)&&!!p(n,h)},li=function(n){return v(n)&&!p(n,h)},ai=u("BODY"),vi=function(n,t){return n.nextSibling===t||n.previousSibling===t},yi=function(n,t){t=t||r.ok;var i=[];return n.previousSibling&&t(n.previousSibling)&&i.push(n.previousSibling),i.push(n),n.nextSibling&&t(n.nextSibling)&&i.push(n.nextSibling),i},y=f.isMSIE&&f.browserVersion<11?"&nbsp;":"<br>",e=function(n){return s(n)?n.nodeValue.length:n?n.childNodes.length:0},tt=function(n){var t=e(n);if(t===0)return!0;if(s(n)||t!==1||n.innerHTML!==y){if(i.all(n.childNodes,s)&&n.innerHTML==="")return!0}else return!0;return!1},yt=function(n){a(n)||e(n)||(n.innerHTML=y)},p=function(n,t){while(n){if(t(n))return n;if(o(n))break;n=n.parentNode}return null},pi=function(n,t){for(n=n.parentNode;n;){if(e(n)!==1)break;if(t(n))return n;if(o(n))break;n=n.parentNode}return null},c=function(n,t){t=t||r.fail;var i=[];return p(n,function(n){return o(n)||i.push(n),t(n)}),i},wi=function(n,t){var r=c(n);return i.last(r.filter(t))},bi=function(t,i){for(var u=c(t),r=i;r;r=r.parentNode)if(n.inArray(r,u)>-1)return r;return null},ki=function(n,t){t=t||r.fail;for(var i=[];n;){if(t(n))break;i.push(n);n=n.previousSibling}return i},pt=function(n,t){t=t||r.fail;for(var i=[];n;){if(t(n))break;i.push(n);n=n.nextSibling}return i},di=function(n,t){var i=[];return t=t||r.ok,function u(r){n!==r&&t(r)&&i.push(r);for(var f=0,e=r.childNodes.length;f<e;f++)u(r.childNodes[f])}(n),i},gi=function(t,i){var u=t.parentNode,r=n("<"+i+">")[0];return u.insertBefore(r,t),r.appendChild(t),r},rt=function(n,t){var i=t.nextSibling,r=t.parentNode;return i?r.insertBefore(n,i):r.appendChild(n),n},ut=function(t,i){return n.each(i,function(n,i){t.appendChild(i)}),t},w=function(n){return n.offset===0},b=function(n){return n.offset===e(n.node)},wt=function(n){return w(n)||b(n)},bt=function(n,t){while(n&&n!==t){if(l(n)!==0)return!1;n=n.parentNode}return!0},kt=function(n,t){if(!t)return!1;while(n&&n!==t){if(l(n)!==e(n.parentNode)-1)return!1;n=n.parentNode}return!0},nr=function(n,t){return w(n)&&bt(n.node,t)},tr=function(n,t){return b(n)&&kt(n.node,t)},l=function(n){for(var t=0;n=n.previousSibling;)t+=1;return t},d=function(n){return!!(n&&n.childNodes&&n.childNodes.length)},dt=function(n,t){var i,r;if(n.offset===0){if(o(n.node))return null;i=n.node.parentNode;r=l(n.node)}else d(n.node)?(i=n.node.childNodes[n.offset-1],r=e(i)):(i=n.node,r=t?0:n.offset-1);return{node:i,offset:r}},ft=function(n,t){var i,r;if(e(n.node)===n.offset){if(o(n.node))return null;i=n.node.parentNode;r=l(n.node)+1}else d(n.node)?(i=n.node.childNodes[n.offset],r=0):(i=n.node,r=t?e(n.node):n.offset+1);return{node:i,offset:r}},gt=function(n,t){return n.node===t.node&&n.offset===t.offset},ir=function(n){if(s(n.node)||!d(n.node)||tt(n.node))return!0;var t=n.node.childNodes[n.offset-1],i=n.node.childNodes[n.offset];return(!t||a(t))&&(!i||a(i))?!0:!1},rr=function(n,t){while(n){if(t(n))return n;n=dt(n)}return null},ur=function(n,t){while(n){if(t(n))return n;n=ft(n)}return null},fr=function(n){if(!s(n.node))return!1;var t=n.node.nodeValue.charAt(n.offset-1);return t&&t!==" "&&t!==k},er=function(n,t,i,r){for(var u=n,f;u;){if(i(u),gt(u,t))break;f=r&&n.node!==u.node&&t.node!==u.node;u=ft(u,f)}},or=function(n,t){var i=c(t,r.eq(n));return i.map(l).reverse()},sr=function(n,t){for(var i=n,r=0,u=t.length;r<u;r++)i=i.childNodes.length<=t[r]?i.childNodes[i.childNodes.length-1]:i.childNodes[t[r]];return i},et=function(n,t){var u=t&&t.isSkipPaddingBlankHTML,f=t&&t.isNotSplitEdgePoint,r,i;if(wt(n)&&(s(n.node)||f)){if(w(n))return n.node;if(b(n))return n.node.nextSibling}return s(n.node)?n.node.splitText(n.offset):(r=n.node.childNodes[n.offset],i=rt(n.node.cloneNode(!1),n.node),ut(i,pt(r)),u||(yt(n.node),yt(i)),i)},ni=function(n,i,u){var f=c(i.node,r.eq(n));if(f.length){if(f.length===1)return et(i,u)}else return null;return f.reduce(function(n,r){return n===i.node&&(n=et(i,u)),et({node:r,offset:n?t.position(n):e(r)},u)})},hr=function(n,t){var s=t?h:nt,e=c(n.node,s),o=i.last(e)||n.node,r,u,f;return s(o)?(r=e[e.length-2],u=o):(r=o,u=r.parentNode),f=r&&ni(r,n,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t}),f||u!==n.node||(f=n.node.childNodes[n.offset]),{rightNode:f,container:u}},ti=function(n){return document.createElement(n)},cr=function(n){return document.createTextNode(n)},ot=function(n,t){var f,r,i,u;if(n&&n.parentNode){if(n.removeNode)return n.removeNode(t);if(f=n.parentNode,!t){for(r=[],i=0,u=n.childNodes.length;i<u;i++)r.push(n.childNodes[i]);for(i=0,u=r.length;i<u;i++)f.insertBefore(r[i],n)}f.removeChild(n)}},lr=function(n,t){while(n){if(o(n)||!t(n))break;var i=n.parentNode;ot(n);n=i}},ar=function(n,t){if(n.nodeName.toUpperCase()===t.toUpperCase())return n;var r=ti(t);return n.style.cssText&&(r.style.cssText=n.style.cssText),ut(r,i.from(n.childNodes)),rt(r,n),ot(n),r},ii=u("TEXTAREA"),ri=function(n,t){var i=ii(n[0])?n.val():n.html();return t?i.replace(/[\n\r]/g,""):i},vr=function(t,i){var r=ri(t),u;return i&&(u=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,r=r.replace(u,function(n,t,i){i=i.toUpperCase();var r=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!t,u=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return n+(r||u?"\n":"")}),r=n.trim(r)),r},yr=function(t){var i=n(t),r=i.offset(),u=i.outerHeight(!0);return{left:r.left,top:r.top+u}},pr=function(n,t){Object.keys(t).forEach(function(i){n.on(i,t[i])})},wr=function(n,t){Object.keys(t).forEach(function(i){n.off(i,t[i])})};return{NBSP_CHAR:k,ZERO_WIDTH_NBSP_CHAR:it,blank:y,emptyPara:"<p>"+y+"<\/p>",makePredByNodeName:u,isEditable:o,isControlSizing:ui,isText:s,isElement:fi,isVoid:a,isPara:h,isPurePara:si,isHeading:ei,isInline:v,isBlock:r.not(v),isBodyInline:li,isBody:ai,isParaInline:ci,isPre:oi,isList:lt,isTable:ht,isData:ct,isCell:at,isBlockquote:g,isBodyContainer:nt,isAnchor:vt,isDiv:u("DIV"),isLi:st,isBR:u("BR"),isSpan:u("SPAN"),isB:u("B"),isU:u("U"),isS:u("S"),isI:u("I"),isImg:u("IMG"),isTextarea:ii,isEmpty:tt,isEmptyAnchor:r.and(vt,tt),isClosestSibling:vi,withClosestSiblings:yi,nodeLength:e,isLeftEdgePoint:w,isRightEdgePoint:b,isEdgePoint:wt,isLeftEdgeOf:bt,isRightEdgeOf:kt,isLeftEdgePointOf:nr,isRightEdgePointOf:tr,prevPoint:dt,nextPoint:ft,isSamePoint:gt,isVisiblePoint:ir,prevPointUntil:rr,nextPointUntil:ur,isCharPoint:fr,walkPoint:er,ancestor:p,singleChildAncestor:pi,listAncestor:c,lastAncestor:wi,listNext:pt,listPrev:ki,listDescendant:di,commonAncestor:bi,wrap:gi,insertAfter:rt,appendChildNodes:ut,position:l,hasChildren:d,makeOffsetPath:or,fromOffsetPath:sr,splitTree:ni,splitPoint:hr,create:ti,createText:cr,remove:ot,removeWhile:lr,replace:ar,html:vr,value:ri,posFromPlaceholder:yr,attachEvents:pr,detachEvents:wr}}(),rt=function(u,f){var e=this,o=n.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=f,this.initialize=function(){return this.layoutInfo=o.createLayout(u,f),this._initialize(),u.hide(),this},this.destroy=function(){this._destroy();u.removeData("summernote");o.removeLayout(u,this.layoutInfo)},this.reset=function(){var n=e.isDisabled();this.code(t.emptyPara);this._destroy();this._initialize();n&&e.disable()},this._initialize=function(){var i=n.extend({},this.options.buttons),t;Object.keys(i).forEach(function(n){e.memo("button."+n,i[n])});t=n.extend({},this.options.modules,n.summernote.plugins||{});Object.keys(t).forEach(function(n){e.module(n,t[n],!0)});Object.keys(this.modules).forEach(function(n){e.initializeModule(n)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(n){e.removeModule(n)});Object.keys(this.memos).forEach(function(n){e.removeMemo(n)})},this.code=function(n){var t=this.invoke("codeview.isActivated");if(n===undefined)return this.invoke("codeview.sync"),t?this.layoutInfo.codable.val():this.layoutInfo.editable.html();t?this.layoutInfo.codable.val(n):this.layoutInfo.editable.html(n);u.val(n);this.triggerEvent("change",n)},this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0);this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate");this.layoutInfo.editable.attr("contenteditable",!1);this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var n=i.head(arguments),t=i.tail(i.from(arguments)),f=this.options.callbacks[r.namespaceToCamel(n,"on")];f&&f.apply(u[0],t);u.trigger("summernote."+n,t)},this.initializeModule=function(n){var i=this.modules[n];(i.shouldInitialize=i.shouldInitialize||r.ok,i.shouldInitialize())&&(i.initialize&&i.initialize(),i.events&&t.attachEvents(u,i.events))},this.module=function(n,t,i){if(arguments.length===1)return this.modules[n];this.modules[n]=new t(this);i||this.initializeModule(n)},this.removeModule=function(n){var i=this.modules[n];i.shouldInitialize()&&(i.events&&t.detachEvents(u,i.events),i.destroy&&i.destroy());delete this.modules[n]},this.memo=function(n,t){if(arguments.length===1)return this.memos[n];this.memos[n]=t},this.removeMemo=function(n){this.memos[n]&&this.memos[n].destroy&&this.memos[n].destroy();delete this.memos[n]},this.createInvokeHandler=function(t,i){return function(r){r.preventDefault();e.invoke(t,i||n(r.target).closest("[data-value]").data("value"))}},this.invoke=function(){var o=i.head(arguments),u=i.tail(i.from(arguments)),t=o.split("."),f=t.length>1,e=f&&i.head(t),r=f?i.last(t):i.head(t),n=this.modules[e||"editor"];return!e&&this[r]?this[r].apply(this,u):n&&n[r]&&n.shouldInitialize()?n[r].apply(n,u):void 0},this.initialize()};n.fn.extend({summernote:function(){var f=n.type(i.head(arguments)),e=f==="string",o=f==="object",t=o?i.head(arguments):{},u,r;if(t=n.extend({},n.summernote.options,t),t.langInfo=n.extend(!0,{},n.summernote.lang["en-US"],n.summernote.lang[t.lang]),t.icons=n.extend(!0,{},n.summernote.options.icons,t.icons),this.each(function(i,r){var u=n(r),f;u.data("summernote")||(f=new rt(u,t),u.data("summernote",f),u.data("summernote").triggerEvent("init",f.layoutInfo))}),u=this.first(),u.length){if(r=u.data("summernote"),e)return r.invoke.apply(r,i.from(arguments));t.focus&&r.invoke("editor.focus")}return this}});var ut=function(t,i,r,u){this.render=function(f){var e=n(t),o;if(r&&r.contents&&e.html(r.contents),r&&r.className&&e.addClass(r.className),r&&r.data&&n.each(r.data,function(n,t){e.attr("data-"+n,t)}),r&&r.click)e.on("click",r.click);return i&&(o=e.find(".note-children-container"),i.forEach(function(n){n.render(o.length?o:e)})),u&&u(e,r),r&&r.callback&&r.callback(e),f&&f.append(e),e}},o={create:function(t,i){return function(){var u=n.isArray(arguments[0])?arguments[0]:[],r=typeof arguments[1]=="object"?arguments[1]:arguments[0];return r&&r.children&&(u=r.children),new ut(t,u,r,i)}}},ft=o.create('<div class="note-editor note-frame panel panel-default"/>'),et=o.create('<div class="note-toolbar panel-heading"/>'),ot=o.create('<div class="note-editing-area"/>'),st=o.create('<textarea class="note-codable"/>'),ht=o.create('<div class="note-editable panel-body" contentEditable="true"/>'),ct=o.create('<div class="note-statusbar">  <div class="note-resizebar">    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>  <\/div><\/div>'),lt=o.create('<div class="note-editor"/>'),at=o.create('<div class="note-editable" contentEditable="true"/>'),vt=o.create('<div class="note-btn-group btn-group">'),yt=o.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(n,t){t&&t.tooltip&&n.attr({title:t.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),pt=o.create('<div class="dropdown-menu">',function(t,i){var r=n.isArray(i.items)?i.items.map(function(n){var t=typeof n=="string"?n:n.value||"",r=i.template?i.template(n):n;return'<li><a href="#" data-value="'+t+'">'+r+"<\/a><\/li>"}).join(""):i.items;t.html(r)}),wt=o.create('<div class="dropdown-menu note-check">',function(t,i){var r=n.isArray(i.items)?i.items.map(function(n){var t=typeof n=="string"?n:n.value||"",r=i.template?i.template(n):n;return'<li><a href="#" data-value="'+t+'">'+d(i.checkClassName)+" "+r+"<\/a><\/li>"}).join(""):i.items;t.html(r)}),bt=o.create('<div class="note-color-palette"/>',function(n,t){for(var i,s,r,f=[],u=0,h=t.colors.length;u<h;u++){var c=t.eventName,e=t.colors[u],o=[];for(i=0,s=e.length;i<s;i++)r=e[i],o.push(['<button type="button" class="note-color-btn"','style="background-color:',r,'" ','data-event="',c,'" ','data-value="',r,'" ','title="',r,'" ','data-toggle="button" tabindex="-1"><\/button>'].join(""));f.push('<div class="note-color-row">'+o.join("")+"<\/div>")}n.html(f.join(""));n.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),kt=o.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(n,t){t.fade&&n.addClass("fade");n.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button>      <h4 class="modal-title">'+t.title+"<\/h4>    <\/div>":"",'    <div class="modal-body">'+t.body+"<\/div>",t.footer?'    <div class="modal-footer">'+t.footer+"<\/div>":"","  <\/div>","<\/div>"].join(""))}),dt=o.create('<div class="note-popover popover in">  <div class="arrow"/>  <div class="popover-content note-children-container"/><\/div>',function(n,t){var i=typeof t.direction!="undefined"?t.direction:"bottom";n.addClass(i);t.hideArrow&&n.find(".arrow").hide()}),d=function(n,t){return t=t||"i","<"+t+' class="'+n+'"/>'},s={editor:ft,toolbar:et,editingArea:ot,codable:st,editable:ht,statusbar:ct,airEditor:lt,airEditable:at,buttonGroup:vt,button:yt,dropdown:pt,dropdownCheck:wt,palette:bt,dialog:kt,popover:dt,icon:d,toggleBtn:function(n,t){n.toggleClass("disabled",!t);n.attr("disabled",!t)},toggleBtnActive:function(n,t){n.toggleClass("active",t)},onDialogShown:function(n,t){n.one("shown.bs.modal",t)},onDialogHidden:function(n,t){n.one("hidden.bs.modal",t)},showDialog:function(n){n.modal("show")},hideDialog:function(n){n.modal("hide")},createLayout:function(n,t){var i=(t.airMode?s.airEditor([s.editingArea([s.airEditable()])]):s.editor([s.toolbar(),s.editingArea([s.codable(),s.editable()]),s.statusbar()])).render();return i.insertAfter(n),{note:n,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(n,t){n.html(t.editable.html());t.editor.remove();n.show()}};n.summernote=n.summernote||{lang:{}};n.extend(n.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var e=function(){var n={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return i.contains([n.BACKSPACE,n.TAB,n.ENTER,n.SPACE],t)},isMove:function(t){return i.contains([n.LEFT,n.UP,n.RIGHT,n.DOWN],t)},nameFromCode:r.invertObject(n),code:n}}(),u=function(){var e=function(n,r){for(var o=n.parentElement(),a=document.body.createTextRange(),s,h=i.from(o.childNodes),c,u,l,e,v,f=0;f<h.length;f++)if(!t.isText(h[f])){if(a.moveToElementText(h[f]),a.compareEndPoints("StartToStart",n)>=0)break;s=h[f]}if(f!==0&&t.isText(h[f-1])){for(c=document.body.createTextRange(),u=null,c.moveToElementText(s||o),c.collapse(!s),u=s?s.nextSibling:o.firstChild,l=n.duplicate(),l.setEndPoint("StartToStart",c),e=l.text.replace(/[\r\n]/g,"").length;e>u.nodeValue.length&&u.nextSibling;)e-=u.nodeValue.length,u=u.nextSibling;v=u.nodeValue;r&&u.nextSibling&&t.isText(u.nextSibling)&&e===u.nodeValue.length&&(e-=u.nodeValue.length,u=u.nextSibling);o=u;f=e}return{cont:o,offset:f}},o=function(n){var e=function(n,u){var f,o,s,h;if(t.isText(n))s=t.listPrev(n,r.not(t.isText)),h=i.last(s).previousSibling,f=h||n.parentNode,u+=i.sum(i.tail(s),t.nodeLength),o=!h;else{if(f=n.childNodes[u]||n,t.isText(f))return e(f,0);u=0;o=!1}return{node:f,collapseToStart:o,offset:u}},u=document.body.createTextRange(),f=e(n.node,n.offset);return u.moveToElementText(f.node),u.collapse(f.collapseToStart),u.moveStart("character",f.offset),u},u=function(e,s,h,c){var a,l;this.sc=e;this.so=s;this.ec=h;this.eo=c;a=function(){var n,t;return f.isW3CRangeSupport?(n=document.createRange(),n.setStart(e,s),n.setEnd(h,c),n):(t=o({node:e,offset:s}),t.setEndPoint("EndToEnd",o({node:h,offset:c})),t)};this.getPoints=function(){return{sc:e,so:s,ec:h,eo:c}};this.getStartPoint=function(){return{node:e,offset:s}};this.getEndPoint=function(){return{node:h,offset:c}};this.select=function(){var t=a(),n;return f.isW3CRangeSupport?(n=document.getSelection(),n.rangeCount>0&&n.removeAllRanges(),n.addRange(t)):t.select(),this};this.scrollIntoView=function(t){var i=n(t).height();return t.scrollTop+i<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+i-this.sc.offsetTop)),this};this.normalize=function(){var i=function(n,i){var r,u;if(t.isVisiblePoint(n)&&!t.isEdgePoint(n)||t.isVisiblePoint(n)&&t.isRightEdgePoint(n)&&!i||t.isVisiblePoint(n)&&t.isLeftEdgePoint(n)&&i||t.isVisiblePoint(n)&&t.isBlock(n.node)&&t.isEmpty(n.node))return n;if(r=t.ancestor(n.node,t.isBlock),(t.isLeftEdgePointOf(n,r)||t.isVoid(t.prevPoint(n).node))&&!i||(t.isRightEdgePointOf(n,r)||t.isVoid(t.nextPoint(n).node))&&i){if(t.isVisiblePoint(n))return n;i=!i}return u=i?t.nextPointUntil(t.nextPoint(n),t.isVisiblePoint):t.prevPointUntil(t.prevPoint(n),t.isVisiblePoint),u||n},n=i(this.getEndPoint(),!1),r=this.isCollapsed()?n:i(this.getStartPoint(),!0);return new u(r.node,r.offset,n.node,n.offset)};this.nodes=function(n,u){n=n||r.ok;var o=u&&u.includeAncestor,s=u&&u.fullyContains,h=this.getStartPoint(),c=this.getEndPoint(),f=[],e=[];return t.walkPoint(h,c,function(r){if(!t.isEditable(r.node)){var u;s?(t.isLeftEdgePoint(r)&&e.push(r.node),t.isRightEdgePoint(r)&&i.contains(e,r.node)&&(u=r.node)):u=o?t.ancestor(r.node,n):r.node;u&&n(u)&&f.push(u)}},!0),i.unique(f)};this.commonAncestor=function(){return t.commonAncestor(e,h)};this.expand=function(n){var f=t.ancestor(e,n),r=t.ancestor(h,n),i;return!f&&!r?new u(e,s,h,c):(i=this.getPoints(),f&&(i.sc=f,i.so=0),r&&(i.ec=r,i.eo=t.nodeLength(r)),new u(i.sc,i.so,i.ec,i.eo))};this.collapse=function(n){return n?new u(e,s,e,s):new u(h,c,h,c)};this.splitText=function(){var i=e===h,n=this.getPoints();return t.isText(h)&&!t.isEdgePoint(this.getEndPoint())&&h.splitText(c),t.isText(e)&&!t.isEdgePoint(this.getStartPoint())&&(n.sc=e.splitText(s),n.so=0,i&&(n.ec=n.sc,n.eo=c-s)),new u(n.sc,n.so,n.ec,n.eo)};this.deleteContents=function(){if(this.isCollapsed())return this;var f=this.splitText(),e=f.nodes(null,{fullyContains:!0}),r=t.prevPointUntil(f.getStartPoint(),function(n){return!i.contains(e,n.node)}),o=[];return n.each(e,function(n,i){var u=i.parentNode;r.node!==u&&t.nodeLength(u)===1&&o.push(u);t.remove(i,!1)}),n.each(o,function(n,i){t.remove(i,!1)}),new u(r.node,r.offset,r.node,r.offset).normalize()};l=function(n){return function(){var i=t.ancestor(e,n);return!!i&&i===t.ancestor(h,n)}};this.isOnEditable=l(t.isEditable);this.isOnList=l(t.isList);this.isOnAnchor=l(t.isAnchor);this.isOnCell=l(t.isCell);this.isOnData=l(t.isData);this.isLeftEdgeOf=function(n){if(!t.isLeftEdgePoint(this.getStartPoint()))return!1;var i=t.ancestor(this.sc,n);return i&&t.isLeftEdgeOf(this.sc,i)};this.isCollapsed=function(){return e===h&&s===c};this.wrapBodyInlineWithPara=function(){var n,f,s,o,h;return t.isBodyContainer(e)&&t.isEmpty(e)?(e.innerHTML=t.emptyPara,new u(e.firstChild,0,e.firstChild,0)):(n=this.normalize(),t.isParaInline(e)||t.isPara(e))?n:(t.isInline(n.sc)?(s=t.listAncestor(n.sc,r.not(t.isInline)),f=i.last(s),t.isInline(f)||(f=s[s.length-2]||n.sc.childNodes[n.so])):f=n.sc.childNodes[n.so>0?n.so-1:0],o=t.listPrev(f,t.isParaInline).reverse(),o=o.concat(t.listNext(f.nextSibling,t.isParaInline)),o.length&&(h=t.wrap(i.head(o),"p"),t.appendChildNodes(h,i.tail(o))),this.normalize())};this.insertNode=function(n){var r=this.wrapBodyInlineWithPara().deleteContents(),i=t.splitPoint(r.getStartPoint(),t.isInline(n));return i.rightNode?i.rightNode.parentNode.insertBefore(n,i.rightNode):i.container.appendChild(n),n};this.pasteHTML=function(t){var r=n("<div><\/div>").html(t)[0],u=i.from(r.childNodes),f=this.wrapBodyInlineWithPara().deleteContents();return u.reverse().map(function(n){return f.insertNode(n)}).reverse()};this.toString=function(){var n=a();return f.isW3CRangeSupport?n.toString():n.text};this.getWordRange=function(n){var i=this.getEndPoint(),r;return t.isCharPoint(i)?(r=t.prevPointUntil(i,function(n){return!t.isCharPoint(n)}),n&&(i=t.nextPointUntil(i,function(n){return!t.isCharPoint(n)})),new u(r.node,r.offset,i.node,i.offset)):this};this.bookmark=function(n){return{s:{path:t.makeOffsetPath(n,e),offset:s},e:{path:t.makeOffsetPath(n,h),offset:c}}};this.paraBookmark=function(n){return{s:{path:i.tail(t.makeOffsetPath(i.head(n),e)),offset:s},e:{path:i.tail(t.makeOffsetPath(i.last(n),h)),offset:c}}};this.getClientRects=function(){var n=a();return n.getClientRects()}};return{create:function(n,i,r,f){if(arguments.length===4)return new u(n,i,r,f);if(arguments.length===2)return r=n,f=i,new u(n,i,r,f);var e=this.createFromSelection();return!e&&arguments.length===1?(e=this.createFromNode(arguments[0]),e.collapse(t.emptyPara===arguments[0].innerHTML)):e},createFromSelection:function(){var s,h,c,l,r,o,a,v,y,n,i;if(f.isW3CRangeSupport){if(r=document.getSelection(),r&&r.rangeCount!==0){if(t.isBody(r.anchorNode))return null}else return null;o=r.getRangeAt(0);s=o.startContainer;h=o.startOffset;c=o.endContainer;l=o.endOffset}else a=document.selection.createRange(),v=a.duplicate(),v.collapse(!1),y=a,y.collapse(!0),n=e(y,!0),i=e(v,!1),t.isText(n.node)&&t.isLeftEdgePoint(n)&&t.isTextNode(i.node)&&t.isRightEdgePoint(i)&&i.node.nextSibling===n.node&&(n=i),s=n.cont,h=n.offset,c=i.cont,l=i.offset;return new u(s,h,c,l)},createFromNode:function(n){var r=n,f=0,i=n,u=t.nodeLength(i);return t.isVoid(r)&&(f=t.listPrev(r).length-1,r=r.parentNode),t.isBR(i)?(u=t.listPrev(i).length-1,i=i.parentNode):t.isVoid(i)&&(u=t.listPrev(i).length,i=i.parentNode),this.create(r,f,i,u)},createFromNodeBefore:function(n){return this.createFromNode(n).collapse(!0)},createFromNodeAfter:function(n){return this.createFromNode(n).collapse()},createFromBookmark:function(n,i){var r=t.fromOffsetPath(n,i.s.path),f=i.s.offset,e=t.fromOffsetPath(n,i.e.path),o=i.e.offset;return new u(r,f,e,o)},createFromParaBookmark:function(n,r){var f=n.s.offset,e=n.e.offset,o=t.fromOffsetPath(i.head(r),n.s.path),s=t.fromOffsetPath(i.last(r),n.e.path);return new u(o,f,s,e)}}}(),g=function(){var t=function(t){return n.Deferred(function(i){n.extend(new FileReader,{onload:function(n){var t=n.target.result;i.resolve(t)},onerror:function(){i.reject(this)}}).readAsDataURL(t)}).promise()},i=function(t){return n.Deferred(function(i){var r=n("<img>");r.one("load",function(){r.off("error abort");i.resolve(r)}).one("error abort",function(){r.off("load").detach();i.reject(r)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()};return{readFileAsDataURL:t,createImage:i}}(),gt=function(n){var i=[],t=-1,r=n[0],e=function(){var t=u.create(r);return{contents:n.html(),bookmark:t?t.bookmark(r):{s:{path:[],offset:0},e:{path:[],offset:0}}}},f=function(t){t.contents!==null&&n.html(t.contents);t.bookmark!==null&&u.createFromBookmark(r,t.bookmark).select()};this.rewind=function(){n.html()!==i[t].contents&&this.recordUndo();t=0;f(i[t])};this.reset=function(){i=[];t=-1;n.html("");this.recordUndo()};this.undo=function(){n.html()!==i[t].contents&&this.recordUndo();0<t&&(t--,f(i[t]))};this.redo=function(){i.length-1>t&&(t++,f(i[t]))};this.recordUndo=function(){t++;i.length>t&&(i=i.slice(0,t));i.push(e())}},ni=function(){var u=function(t,i){if(f.jqueryVersion<1.9){var r={};return n.each(i,function(n,i){r[i]=t.css(i)}),r}return t.css.call(t,i)};this.fromNode=function(n){var t=u(n,["font-family","font-size","text-align","list-style-type","line-height"])||{};return t["font-size"]=parseInt(t["font-size"],10),t};this.stylePara=function(i,r){n.each(i.nodes(t.isPara,{includeAncestor:!0}),function(t,i){n(i).css(r)})};this.styleNodes=function(u,f){var e,s,h;u=u.splitText();var o=f&&f.nodeName||"SPAN",c=!!(f&&f.expandClosestSibling),l=!!(f&&f.onlyPartialContains);return u.isCollapsed()?[u.insertNode(t.create(o))]:(e=t.makePredByNodeName(o),s=u.nodes(t.isText,{fullyContains:!0}).map(function(n){return t.singleChildAncestor(n,e)||t.wrap(n,o)}),c?(l&&(h=u.nodes(),e=r.and(e,function(n){return i.contains(h,n)})),s.map(function(r){var u=t.withClosestSiblings(r,e),f=i.head(u),o=i.tail(u);return n.each(o,function(n,i){t.appendChildNodes(f,i.childNodes);t.remove(i)}),i.head(u)})):s)};this.current=function(i){var s=n(t.isElement(i.sc)?i.sc:i.sc.parentNode),r=this.fromNode(s),f,e,u,o;try{r=n.extend(r,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(h){}return i.isOnList()?(f=["circle","disc","disc-leading-zero","square"],e=n.inArray(r["list-style-type"],f)>-1,r["list-style"]=e?"unordered":"ordered"):r["list-style"]="none",u=t.ancestor(i.sc,t.isPara),u&&u.style["line-height"]?r["line-height"]=u.style.lineHeight:(o=parseInt(r["line-height"],10)/parseInt(r["font-size"],10),r["line-height"]=o.toFixed(1)),r.anchor=i.isOnAnchor()&&t.ancestor(i.sc,t.isAnchor),r.ancestors=t.listAncestor(i.sc,t.isEditable),r.range=i,r}},nt=function(){var f=this;this.insertOrderedList=function(n){this.toggleList("OL",n)};this.insertUnorderedList=function(n){this.toggleList("UL",n)};this.indent=function(f){var o=this,e=u.create(f).wrapBodyInlineWithPara(),s=e.nodes(t.isPara,{includeAncestor:!0}),h=i.clusterBy(s,r.peq2("parentNode"));n.each(h,function(r,u){var f=i.head(u);t.isLi(f)?o.wrapList(u,f.parentNode.nodeName):n.each(u,function(t,i){n(i).css("marginLeft",function(n,t){return(parseInt(t,10)||0)+25})})});e.select()};this.outdent=function(f){var o=this,e=u.create(f).wrapBodyInlineWithPara(),s=e.nodes(t.isPara,{includeAncestor:!0}),h=i.clusterBy(s,r.peq2("parentNode"));n.each(h,function(r,u){var f=i.head(u);t.isLi(f)?o.releaseList([u]):n.each(u,function(t,i){n(i).css("marginLeft",function(n,t){return t=parseInt(t,10)||0,t>25?t-25:""})})});e.select()};this.toggleList=function(e,o){var c=u.create(o).wrapBodyInlineWithPara(),s=c.nodes(t.isPara,{includeAncestor:!0}),v=c.paraBookmark(s),a=i.clusterBy(s,r.peq2("parentNode")),h,l;i.find(s,t.isPurePara)?(h=[],n.each(a,function(n,t){h=h.concat(f.wrapList(t,e))}),s=h):(l=c.nodes(t.isList,{includeAncestor:!0}).filter(function(t){return!n.nodeName(t,e)}),l.length?n.each(l,function(n,i){t.replace(i,e)}):s=this.releaseList(a,!0));u.createFromParaBookmark(v,s).select()};this.wrapList=function(n,r){var e=i.head(n),u=i.last(n),s=t.isList(e.previousSibling)&&e.previousSibling,f=t.isList(u.nextSibling)&&u.nextSibling,o=s||t.insertAfter(t.create(r||"UL"),u);return n=n.map(function(n){return t.isPurePara(n)?t.replace(n,"LI"):n}),t.appendChildNodes(o,n),f&&(t.appendChildNodes(o,i.from(f.childNodes)),t.remove(f)),n};this.releaseList=function(r,u){var f=[];return n.each(r,function(r,e){var s=i.head(e),c=i.last(e),o=u?t.lastAncestor(s,t.isList):s.parentNode,a=o.childNodes.length>1?t.splitTree(o,{node:c.parentNode,offset:t.position(c)+1},{isSkipPaddingBlankHTML:!0}):null,h=t.splitTree(o,{node:s.parentNode,offset:t.position(s)},{isSkipPaddingBlankHTML:!0}),l;e=u?t.listDescendant(h,t.isLi):i.from(h.childNodes).filter(t.isLi);(u||!t.isList(o.parentNode))&&(e=e.map(function(n){return t.replace(n,"P")}));n.each(i.from(e).reverse(),function(n,i){t.insertAfter(i,o)});l=i.compact([o,h,a]);n.each(l,function(i,r){var u=[r].concat(t.listDescendant(r,t.isList));n.each(u.reverse(),function(n,i){t.nodeLength(i)||t.remove(i,!0)})});f=f.concat(e)}),f}},ti=function(){var i=new nt;this.insertTab=function(n,i){var r=t.createText(new Array(i+1).join(t.NBSP_CHAR));n=n.deleteContents();n.insertNode(r,!0);n=u.create(r,i);n.select()};this.insertParagraph=function(r){var o=u.create(r),f,e,s,h;if(o=o.deleteContents(),o=o.wrapBodyInlineWithPara(),f=t.ancestor(o.sc,t.isPara),f){if(t.isEmpty(f)&&t.isLi(f)){i.toggleList(f.parentNode.nodeName);return}t.isEmpty(f)&&t.isPara(f)&&t.isBlockquote(f.parentNode)?(t.insertAfter(f,f.parentNode),e=f):(e=t.splitTree(f,o.getStartPoint()),s=t.listDescendant(f,t.isEmptyAnchor),s=s.concat(t.listDescendant(e,t.isEmptyAnchor)),n.each(s,function(n,i){t.remove(i)}),(t.isHeading(e)||t.isPre(e))&&t.isEmpty(e)&&(e=t.replace(e,"p")))}else h=o.sc.childNodes[o.so],e=n(t.emptyPara)[0],h?o.sc.insertBefore(e,h):o.sc.appendChild(e);u.create(e,0).normalize().select().scrollIntoView(r)}},ii=function(){this.tab=function(n,r){var f=t.ancestor(n.commonAncestor(),t.isCell),o=t.ancestor(f,t.isTable),s=t.listDescendant(o,t.isCell),e=i[r?"prev":"next"](s,f);e&&u.create(e,0).select()};this.createTable=function(i,r,u){for(var f,l,e,o,s=[],h,c=0;c<i;c++)s.push("<td>"+t.blank+"<\/td>");for(h=s.join(""),f=[],e=0;e<r;e++)f.push("<tr>"+h+"<\/tr>");return l=f.join(""),o=n("<table>"+l+"<\/table>"),u&&u.tableClassName&&o.addClass(u.tableClassName),o[0]}},p="bogus",ri=function(o){var b=this,ot=o.layoutInfo.note,ut=o.layoutInfo.editor,s=o.layoutInfo.editable,h=o.options,c=h.langInfo,a=s[0],d=null,v=new ni,rt=new ii,ft=new ti,tt=new nt,it=new gt(s),et,l;this.initialize=function(){s.on("keydown",function(n){n.keyCode===e.code.ENTER&&o.triggerEvent("enter",n);o.triggerEvent("keydown",n);n.isDefaultPrevented()||(h.shortcuts?b.handleKeyMap(n):b.preventDefaultEditableShortCuts(n))}).on("keyup",function(n){o.triggerEvent("keyup",n)}).on("focus",function(n){o.triggerEvent("focus",n)}).on("blur",function(n){o.triggerEvent("blur",n)}).on("mousedown",function(n){o.triggerEvent("mousedown",n)}).on("mouseup",function(n){o.triggerEvent("mouseup",n)}).on("scroll",function(n){o.triggerEvent("scroll",n)}).on("paste",function(n){o.triggerEvent("paste",n)});s.html(t.html(ot)||t.emptyPara);var n=f.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";s.on(n,r.debounce(function(){o.triggerEvent("change",s.html())},250));ut.on("focusin",function(n){o.triggerEvent("focusin",n)}).on("focusout",function(n){o.triggerEvent("focusout",n)});h.airMode||(h.width&&ut.outerWidth(h.width),h.height&&s.outerHeight(h.height),h.maxHeight&&s.css("max-height",h.maxHeight),h.minHeight&&s.css("min-height",h.minHeight));it.recordUndo()};this.destroy=function(){s.off()};this.handleKeyMap=function(n){var u=h.keyMap[f.isMac?"mac":"pc"],t=[],i,r;n.metaKey&&t.push("CMD");n.ctrlKey&&!n.altKey&&t.push("CTRL");n.shiftKey&&t.push("SHIFT");i=e.nameFromCode[n.keyCode];i&&t.push(i);r=u[t.join("+")];r?(n.preventDefault(),o.invoke(r)):e.isEdit(n.keyCode)&&this.afterCommand()};this.preventDefaultEditableShortCuts=function(n){(n.ctrlKey||n.metaKey)&&i.contains([66,73,85],n.keyCode)&&n.preventDefault()};this.createRange=function(){return this.focus(),u.create(a)};this.saveRange=function(n){d=this.createRange();n&&d.collapse().select()};this.restoreRange=function(){d&&(d.select(),this.focus())};this.saveTarget=function(n){s.data("target",n)};this.clearTarget=function(){s.removeData("target")};this.restoreTarget=function(){return s.data("target")};this.currentStyle=function(){var n=u.create();return n&&(n=n.normalize()),n?v.current(n):v.fromNode(s)};this.styleFromNode=function(n){return v.fromNode(n)};this.undo=function(){o.triggerEvent("before.command",s.html());it.undo();o.triggerEvent("change",s.html())};o.memo("help.undo",c.help.undo);this.redo=function(){o.triggerEvent("before.command",s.html());it.redo();o.triggerEvent("change",s.html())};o.memo("help.redo",c.help.redo);var y=this.beforeCommand=function(){o.triggerEvent("before.command",s.html());b.focus()},w=this.afterCommand=function(n){it.recordUndo();n||o.triggerEvent("change",s.html())},k=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(l=0,et=k.length;l<et;l++)this[k[l]]=function(n){return function(t){y();document.execCommand(n,!1,t);w(!0)}}(k[l]),o.memo("help."+k[l],c.help[k[l]]);for(this.tab=function(){var n=this.createRange();n.isCollapsed()&&n.isOnCell()?rt.tab(n):(y(),ft.insertTab(n,h.tabSize),w())},o.memo("help.tab",c.help.tab),this.untab=function(){var n=this.createRange();n.isCollapsed()&&n.isOnCell()&&rt.tab(n,!0)},o.memo("help.untab",c.help.untab),this.wrapCommand=function(n){return function(){y();n.apply(b,arguments);w()}},this.insertParagraph=this.wrapCommand(function(){ft.insertParagraph(a)}),o.memo("help.insertParagraph",c.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){tt.insertOrderedList(a)}),o.memo("help.insertOrderedList",c.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){tt.insertUnorderedList(a)}),o.memo("help.insertUnorderedList",c.help.insertUnorderedList),this.indent=this.wrapCommand(function(){tt.indent(a)}),o.memo("help.indent",c.help.indent),this.outdent=this.wrapCommand(function(){tt.outdent(a)}),o.memo("help.outdent",c.help.outdent),this.insertImage=function(n,t){return g.createImage(n,t).then(function(n){y();typeof t=="function"?t(n):(typeof t=="string"&&n.attr("data-filename",t),n.css("width",Math.min(s.width(),n.width())));n.show();u.create(a).insertNode(n[0]);u.createFromNodeAfter(n[0]).select();w()}).fail(function(n){o.triggerEvent("image.upload.error",n)})},this.insertImages=function(t){n.each(t,function(n,t){var i=t.name;h.maximumImageFileSize&&h.maximumImageFileSize<t.size?o.triggerEvent("image.upload.error",c.image.maximumFileSizeError):g.readFileAsDataURL(t).then(function(n){return b.insertImage(n,i)}).fail(function(){o.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(n){var t=h.callbacks;t.onImageUpload?o.triggerEvent("image.upload",n):this.insertImages(n)},this.insertNode=this.wrapCommand(function(n){var t=this.createRange();t.insertNode(n);u.createFromNodeAfter(n).select()}),this.insertText=this.wrapCommand(function(n){var r=this.createRange(),i=r.insertNode(t.createText(n));u.create(i,t.nodeLength(i)).select()}),this.getSelectedText=function(){var n=this.createRange();return n.isOnAnchor()&&(n=u.createFromNode(t.ancestor(n.sc,t.isAnchor))),n.toString()},this.pasteHTML=this.wrapCommand(function(n){var t=this.createRange().pasteHTML(n);u.createFromNodeAfter(i.last(t)).select()}),this.formatBlock=this.wrapCommand(function(n){n=f.isMSIE?"<"+n+">":n;document.execCommand("FormatBlock",!1,n)}),this.formatPara=function(){this.formatBlock("P")},o.memo("help.formatPara",c.help.formatPara),l=1;l<=6;l++)this["formatH"+l]=function(n){return function(){this.formatBlock("H"+n)}}(l),o.memo("help.formatH"+l,c.help["formatH"+l]);this.fontSize=function(r){var e=this.createRange(),o,f;e&&e.isCollapsed()?(o=v.styleNodes(e),f=i.head(o),n(o).css({"font-size":r+"px"}),f&&!t.nodeLength(f)&&(f.innerHTML=t.ZERO_WIDTH_NBSP_CHAR,u.createFromNodeAfter(f.firstChild).select(),s.data(p,f))):(y(),n(v.styleNodes(e)).css({"font-size":r+"px"}),w())};this.insertHorizontalRule=this.wrapCommand(function(){var n=this.createRange().insertNode(t.create("HR"));n.nextSibling&&u.create(n.nextSibling,0).normalize().select()});o.memo("help.insertHorizontalRule",c.help.insertHorizontalRule);this.removeBogus=function(){var n=s.data(p),r,u;n&&(r=i.find(i.from(n.childNodes),t.isText),u=r.nodeValue.indexOf(t.ZERO_WIDTH_NBSP_CHAR),u!==-1&&r.deleteData(u,1),t.isEmpty(n)&&t.remove(n),s.removeData(p))};this.lineHeight=this.wrapCommand(function(n){v.stylePara(this.createRange(),{lineHeight:n})});this.unlink=function(){var n=this.createRange(),i;n.isOnAnchor()&&(i=t.ancestor(n.sc,t.isAnchor),n=u.createFromNode(i),n.select(),y(),document.execCommand("unlink"),w())};this.createLink=this.wrapCommand(function(t){var r=t.url,o=t.text,a=t.isNewWindow,e=t.range||this.createRange(),y=e.toString()!==o,f,s;typeof r=="string"&&(r=r.trim());h.onCreateLink&&(r=h.onCreateLink(r));f=[];y?(e=e.deleteContents(),s=e.insertNode(n("<A>"+o+"<\/A>")[0]),f.push(s)):f=v.styleNodes(e,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});n.each(f,function(t,i){r=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(r)?r:"http://"+r;n(i).attr("href",r);a?n(i).attr("target","_blank"):n(i).removeAttr("target")});var p=u.createFromNodeBefore(i.head(f)),c=p.getStartPoint(),w=u.createFromNodeAfter(i.last(f)),l=w.getEndPoint();u.create(c.node,c.offset,l.node,l.offset).select()});this.getLinkInfo=function(){var u=this.createRange().expand(t.isAnchor),r=n(i.head(u.nodes(t.isAnchor)));return{range:u,text:u.toString(),isNewWindow:r.length?r.attr("target")==="_blank":!1,url:r.length?r.attr("href"):""}};this.color=this.wrapCommand(function(n){var t=n.foreColor,i=n.backColor;t&&document.execCommand("foreColor",!1,t);i&&document.execCommand("backColor",!1,i)});this.insertTable=this.wrapCommand(function(n){var t=n.split("x"),i=this.createRange().deleteContents();i.insertNode(rt.createTable(t[0],t[1],h))});this.floatMe=this.wrapCommand(function(t){var i=n(this.restoreTarget());i.css("float",t)});this.resize=this.wrapCommand(function(t){var i=n(this.restoreTarget());i.css({width:t*100+"%",height:""})});this.resizeTo=function(n,t,i){var u,f,r;i?(f=n.y/n.x,r=t.data("ratio"),u={width:r>f?n.x:n.y/r,height:r>f?n.x*r:n.y}):u={width:n.x,height:n.y};t.css(u)};this.removeMedia=this.wrapCommand(function(){var t=n(this.restoreTarget()).detach();o.triggerEvent("media.delete",t,s)});this.hasFocus=function(){return s.is(":focus")};this.focus=function(){this.hasFocus()||s.focus()};this.isEmpty=function(){return t.isEmpty(s[0])||t.emptyPara===s.html()};this.empty=function(){o.invoke("code",t.emptyPara)}},ui=function(r){var u=this,o=r.layoutInfo.editable;this.events={"summernote.keydown":function(n,t){u.needKeydownHook()&&(t.ctrlKey||t.metaKey)&&t.keyCode===e.code.V&&(r.invoke("editor.saveRange"),u.$paste.focus(),setTimeout(function(){u.pasteByHook()},0))}};this.needKeydownHook=function(){return f.isMSIE&&f.browserVersion>10||f.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=n('<div tabindex="-1" />').attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0});o.before(this.$paste);this.$paste.on("paste",function(n){r.triggerEvent("paste",n)})}else o.on("paste",this.pasteByEvent)};this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)};this.pasteByHook=function(){var o=this.$paste[0].firstChild,i,f,e;if(t.isImg(o)){var h=o.src,u=atob(h.split(",")[1]),s=new Uint8Array(u.length);for(i=0;i<u.length;i++)s[i]=u.charCodeAt(i);f=new Blob([s],{type:"image/png"});f.name="clipboard.png";r.invoke("editor.restoreRange");r.invoke("editor.focus");r.invoke("editor.insertImagesOrCallback",[f])}else e=n("<div />").html(this.$paste.html()).html(),r.invoke("editor.restoreRange"),r.invoke("editor.focus"),e&&r.invoke("editor.pasteHTML",e);this.$paste.empty()};this.pasteByEvent=function(n){var t=n.originalEvent.clipboardData,u;t&&t.items&&t.items.length&&(u=i.head(t.items),u.kind==="file"&&u.type.indexOf("image/")!==-1&&r.invoke("editor.insertImagesOrCallback",[u.getAsFile()]),r.invoke("editor.afterCommand"))}},fi=function(t){var f=n(document),r=t.layoutInfo.editor,s=t.layoutInfo.editable,o=t.options,e=o.langInfo,i={},u=n('<div class="note-dropzone">  <div class="note-dropzone-message"/><\/div>').prependTo(r),h=function(){Object.keys(i).forEach(function(n){f.off(n.substr(2).toLowerCase(),i[n])});i={}};this.initialize=function(){if(o.disableDragAndDrop){i.onDrop=function(n){n.preventDefault()};f.on("drop",i.onDrop)}else this.attachDragAndDropEvent()};this.attachDragAndDropEvent=function(){var o=n(),h=u.find(".note-dropzone-message");i.onDragenter=function(n){var i=t.invoke("codeview.isActivated"),f=r.width()>0&&r.height()>0;i||o.length||!f||(r.addClass("dragover"),u.width(r.width()),u.height(r.height()),h.text(e.image.dragImageHere));o=o.add(n.target)};i.onDragleave=function(n){o=o.not(n.target);o.length||r.removeClass("dragover")};i.onDrop=function(){o=n();r.removeClass("dragover")};f.on("dragenter",i.onDragenter).on("dragleave",i.onDragleave).on("drop",i.onDrop);u.on("dragenter",function(){u.addClass("hover");h.text(e.image.dropImage)}).on("dragleave",function(){u.removeClass("hover");h.text(e.image.dragImageHere)});u.on("drop",function(i){var r=i.originalEvent.dataTransfer;r&&r.files&&r.files.length?(i.preventDefault(),s.focus(),t.invoke("editor.insertImagesOrCallback",r.files)):n.each(r.types,function(i,u){var f=r.getData(u);u.toLowerCase().indexOf("text")>-1?t.invoke("editor.pasteHTML",f):n(f).each(function(){t.invoke("editor.insertNode",this)})})}).on("dragover",!1)};this.destroy=function(){h()}},v;f.hasCodeMirror&&(f.isSupportAmd?require(["codemirror"],function(n){v=n}):v=window.CodeMirror);var ei=function(n){var e=n.layoutInfo.editor,r=n.layoutInfo.editable,i=n.layoutInfo.codable,u=n.options;this.sync=function(){var n=this.isActivated();n&&f.hasCodeMirror&&i.data("cmEditor").save()};this.isActivated=function(){return e.hasClass("codeview")};this.toggle=function(){this.isActivated()?this.deactivate():this.activate();n.triggerEvent("codeview.toggled")};this.activate=function(){var o,s;if(i.val(t.html(r,u.prettifyHtml)),i.height(r.height()),n.invoke("toolbar.updateCodeview",!0),e.addClass("codeview"),i.focus(),f.hasCodeMirror){if(o=v.fromTextArea(i[0],u.codemirror),u.codemirror.tern){s=new v.TernServer(u.codemirror.tern);o.ternServer=s;o.on("cursorActivity",function(n){s.updateArgHints(n)})}o.setSize(null,r.outerHeight());i.data("cmEditor",o)}};this.deactivate=function(){var o,s,h;f.hasCodeMirror&&(o=i.data("cmEditor"),i.val(o.getValue()),o.toTextArea());s=t.value(i,u.prettifyHtml)||t.emptyPara;h=r.html()!==s;r.html(s);r.height(u.height?i.height():"auto");e.removeClass("codeview");h&&n.triggerEvent("change",r.html(),r);r.focus();n.invoke("toolbar.updateCodeview",!1)};this.destroy=function(){this.isActivated()&&this.deactivate()}},oi=24,si=function(t){var r=n(document),u=t.layoutInfo.statusbar,f=t.layoutInfo.editable,i=t.options;this.initialize=function(){if(!i.airMode&&!i.disableResizeEditor)u.on("mousedown",function(n){n.preventDefault();n.stopPropagation();var t=f.offset().top-r.scrollTop();r.on("mousemove",function(n){var r=n.clientY-(t+oi);r=i.minheight>0?Math.max(r,i.minheight):r;r=i.maxHeight>0?Math.min(r,i.maxHeight):r;f.height(r)}).one("mouseup",function(){r.off("mousemove")})})};this.destroy=function(){u.off();u.remove()}},hi=function(t){var f=t.layoutInfo.editor,o=t.layoutInfo.toolbar,i=t.layoutInfo.editable,r=t.layoutInfo.codable,u=n(window),e=n("html, body");this.toggle=function(){var n=function(n){i.css("height",n.h);r.css("height",n.h);r.data("cmeditor")&&r.data("cmeditor").setsize(null,n.h)};f.toggleClass("fullscreen");this.isFullscreen()?(i.data("orgHeight",i.css("height")),u.on("resize",function(){n({h:u.height()-o.outerHeight()})}).trigger("resize"),e.css("overflow","hidden")):(u.off("resize"),n({h:i.data("orgHeight")}),e.css("overflow","visible"));t.invoke("toolbar.updateFullscreen",this.isFullscreen())};this.isFullscreen=function(){return f.hasClass("fullscreen")}},ci=function(i){var r=this,u=n(document),e=i.layoutInfo.editingArea,f=i.options;this.events={"summernote.mousedown":function(n,t){r.update(t.target)&&t.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){r.update()}};this.initialize=function(){this.$handle=n(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"><\/div>','<div class="note-control-holder note-control-nw"><\/div>','<div class="note-control-holder note-control-ne"><\/div>','<div class="note-control-holder note-control-sw"><\/div>','<div class="',f.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"><\/div>',f.disableResizeImage?"":'<div class="note-control-selection-info"><\/div>',"<\/div>","<\/div>"].join("")).prependTo(e);this.$handle.on("mousedown",function(n){if(t.isControlSizing(n.target)){n.preventDefault();n.stopPropagation();var f=r.$handle.find(".note-control-selection").data("target"),e=f.offset(),o=u.scrollTop();u.on("mousemove",function(n){i.invoke("editor.resizeTo",{x:n.clientX-e.left,y:n.clientY-(e.top-o)},f,!n.shiftKey);r.update(f[0])}).one("mouseup",function(n){n.preventDefault();u.off("mousemove");i.invoke("editor.afterCommand")});f.data("ratio")||f.data("ratio",f.height()/f.width())}})};this.destroy=function(){this.$handle.remove()};this.update=function(r){var e=t.isImg(r),o=this.$handle.find(".note-control-selection"),h;if(i.invoke("imagePopover.update",r),e){var u=n(r),s=u.position(),f={w:u.outerWidth(!0),h:u.outerHeight(!0)};o.css({display:"block",left:s.left,top:s.top,width:f.w,height:f.h}).data("target",u);h=f.w+"x"+f.h;o.find(".note-control-selection-info").text(h);i.invoke("editor.saveTarget",r)}else this.hide();return e};this.hide=function(){i.invoke("editor.clearTarget");this.$handle.children().hide()}},li=function(t){var r=this,u="http://",f=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(n,t){t.isDefaultPrevented()||r.handleKeyup(t)},"summernote.keydown":function(n,t){r.handleKeydown(t)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){var i,r,e,o;this.lastWordRange&&(i=this.lastWordRange.toString(),r=i.match(f),r&&(r[1]||r[2])&&(e=r[1]?i:u+i,o=n("<a />").html(i).attr("href",e)[0],this.lastWordRange.insertNode(o),this.lastWordRange=null,t.invoke("editor.focus")))};this.handleKeydown=function(n){if(i.contains([e.code.ENTER,e.code.SPACE],n.keyCode)){var r=t.invoke("editor.createRange").getWordRange();this.lastWordRange=r}};this.handleKeyup=function(n){i.contains([e.code.ENTER,e.code.SPACE],n.keyCode)&&this.replace()}},ai=function(n){var i=n.layoutInfo.note;this.events={"summernote.change":function(){i.val(n.invoke("code"))}};this.shouldInitialize=function(){return t.isTextarea(i[0])}},vi=function(t){var i=this,u=t.layoutInfo.editingArea,r=t.options;this.events={"summernote.init summernote.change":function(){i.update()},"summernote.codeview.toggled":function(){i.update()}};this.shouldInitialize=function(){return!!r.placeholder};this.initialize=function(){this.$placeholder=n('<div class="note-placeholder">');this.$placeholder.on("click",function(){t.invoke("focus")}).text(r.placeholder).prependTo(u)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var n=!t.invoke("codeview.isActivated")&&t.invoke("editor.isEmpty");this.$placeholder.toggle(n)}},yi=function(t){var h=this,u=n.summernote.ui,c=t.layoutInfo.toolbar,e=t.options,o=e.langInfo,l=r.invertObject(e.keyMap[f.isMac?"mac":"pc"]),s=this.representShortcut=function(n){var t=l[n];return!e.shortcuts||!t?"":(f.isMac&&(t=t.replace("CMD","â").replace("SHIFT","â§")),t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+t+")")};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.fontInstalledMap={}};this.destroy=function(){delete this.fontInstalledMap};this.isFontInstalled=function(n){return h.fontInstalledMap.hasOwnProperty(n)||(h.fontInstalledMap[n]=f.isFontInstalled(n)||i.contains(e.fontNamesIgnoreCheck,n)),h.fontInstalledMap[n]};this.addToolbarButtons=function(){t.memo("button.style",function(){return u.buttonGroup([u.button({className:"dropdown-toggle",contents:u.icon(e.icons.magic)+" "+u.icon(e.icons.caret,"span"),tooltip:o.style.style,data:{toggle:"dropdown"}}),u.dropdown({className:"dropdown-style",items:t.options.styleTags,template:function(n){typeof n=="string"&&(n={tag:n,title:o.style.hasOwnProperty(n)?o.style[n]:n});var t=n.tag,i=n.title,r=n.style?' style="'+n.style+'" ':"",u=n.className?' class="'+n.className+'"':"";return"<"+t+r+u+">"+i+"<\/"+t+">"},click:t.createInvokeHandler("editor.formatBlock")})]).render()});t.memo("button.bold",function(){return u.button({className:"note-btn-bold",contents:u.icon(e.icons.bold),tooltip:o.font.bold+s("bold"),click:t.createInvokeHandler("editor.bold")}).render()});t.memo("button.italic",function(){return u.button({className:"note-btn-italic",contents:u.icon(e.icons.italic),tooltip:o.font.italic+s("italic"),click:t.createInvokeHandler("editor.italic")}).render()});t.memo("button.underline",function(){return u.button({className:"note-btn-underline",contents:u.icon(e.icons.underline),tooltip:o.font.underline+s("underline"),click:t.createInvokeHandler("editor.underline")}).render()});t.memo("button.clear",function(){return u.button({contents:u.icon(e.icons.eraser),tooltip:o.font.clear+s("removeFormat"),click:t.createInvokeHandler("editor.removeFormat")}).render()});t.memo("button.strikethrough",function(){return u.button({className:"note-btn-strikethrough",contents:u.icon(e.icons.strikethrough),tooltip:o.font.strikethrough+s("strikethrough"),click:t.createInvokeHandler("editor.strikethrough")}).render()});t.memo("button.superscript",function(){return u.button({className:"note-btn-superscript",contents:u.icon(e.icons.superscript),tooltip:o.font.superscript,click:t.createInvokeHandler("editor.superscript")}).render()});t.memo("button.subscript",function(){return u.button({className:"note-btn-subscript",contents:u.icon(e.icons.subscript),tooltip:o.font.subscript,click:t.createInvokeHandler("editor.subscript")}).render()});t.memo("button.fontname",function(){return u.buttonGroup([u.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+u.icon(e.icons.caret,"span"),tooltip:o.font.name,data:{toggle:"dropdown"}}),u.dropdownCheck({className:"dropdown-fontname",checkClassName:e.icons.menuCheck,items:e.fontNames.filter(h.isFontInstalled),template:function(n){return'<span style="font-family:'+n+'">'+n+"<\/span>"},click:t.createInvokeHandler("editor.fontName")})]).render()});t.memo("button.fontsize",function(){return u.buttonGroup([u.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+u.icon(e.icons.caret,"span"),tooltip:o.font.size,data:{toggle:"dropdown"}}),u.dropdownCheck({className:"dropdown-fontsize",checkClassName:e.icons.menuCheck,items:e.fontSizes,click:t.createInvokeHandler("editor.fontSize")})]).render()});t.memo("button.color",function(){return u.buttonGroup({className:"note-color",children:[u.button({className:"note-current-color-button",contents:u.icon(e.icons.font+" note-recent-color"),tooltip:o.color.recent,click:function(i){var r=n(i.currentTarget);t.invoke("editor.color",{backColor:r.attr("data-backColor"),foreColor:r.attr("data-foreColor")})},callback:function(n){var t=n.find(".note-recent-color");t.css("background-color","#FFFF00");n.attr("data-backColor","#FFFF00")}}),u.button({className:"dropdown-toggle",contents:u.icon(e.icons.caret,"span"),tooltip:o.color.more,data:{toggle:"dropdown"}}),u.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+o.color.background+"<\/div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',o.color.transparent,"    <\/button>","  <\/div>",'  <div class="note-holder" data-event="backColor"/>',"<\/div>",'<div class="btn-group">','  <div class="note-palette-title">'+o.color.foreground+"<\/div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',o.color.resetToDefault,"    <\/button>","  <\/div>",'  <div class="note-holder" data-event="foreColor"/>',"<\/div>","<\/li>"].join(""),callback:function(t){t.find(".note-holder").each(function(){var t=n(this);t.append(u.palette({colors:e.colors,eventName:t.data("event")}).render())})},click:function(i){var r=n(i.target),u=r.data("event"),f=r.data("value");if(u&&f){var e=u==="backColor"?"background-color":"color",o=r.closest(".note-color").find(".note-recent-color"),s=r.closest(".note-color").find(".note-current-color-button");o.css(e,f);s.attr("data-"+u,f);t.invoke("editor."+u,f)}}})]}).render()});t.memo("button.ul",function(){return u.button({contents:u.icon(e.icons.unorderedlist),tooltip:o.lists.unordered+s("insertUnorderedList"),click:t.createInvokeHandler("editor.insertUnorderedList")}).render()});t.memo("button.ol",function(){return u.button({contents:u.icon(e.icons.orderedlist),tooltip:o.lists.ordered+s("insertOrderedList"),click:t.createInvokeHandler("editor.insertOrderedList")}).render()});var i=u.button({contents:u.icon(e.icons.alignLeft),tooltip:o.paragraph.left+s("justifyLeft"),click:t.createInvokeHandler("editor.justifyLeft")}),f=u.button({contents:u.icon(e.icons.alignCenter),tooltip:o.paragraph.center+s("justifyCenter"),click:t.createInvokeHandler("editor.justifyCenter")}),c=u.button({contents:u.icon(e.icons.alignRight),tooltip:o.paragraph.right+s("justifyRight"),click:t.createInvokeHandler("editor.justifyRight")}),l=u.button({contents:u.icon(e.icons.alignJustify),tooltip:o.paragraph.justify+s("justifyFull"),click:t.createInvokeHandler("editor.justifyFull")}),a=u.button({contents:u.icon(e.icons.outdent),tooltip:o.paragraph.outdent+s("outdent"),click:t.createInvokeHandler("editor.outdent")}),v=u.button({contents:u.icon(e.icons.indent),tooltip:o.paragraph.indent+s("indent"),click:t.createInvokeHandler("editor.indent")});t.memo("button.justifyLeft",r.invoke(i,"render"));t.memo("button.justifyCenter",r.invoke(f,"render"));t.memo("button.justifyRight",r.invoke(c,"render"));t.memo("button.justifyFull",r.invoke(l,"render"));t.memo("button.outdent",r.invoke(a,"render"));t.memo("button.indent",r.invoke(v,"render"));t.memo("button.paragraph",function(){return u.buttonGroup([u.button({className:"dropdown-toggle",contents:u.icon(e.icons.alignLeft)+" "+u.icon(e.icons.caret,"span"),tooltip:o.paragraph.paragraph,data:{toggle:"dropdown"}}),u.dropdown([u.buttonGroup({className:"note-align",children:[i,f,c,l]}),u.buttonGroup({className:"note-list",children:[a,v]})])]).render()});t.memo("button.height",function(){return u.buttonGroup([u.button({className:"dropdown-toggle",contents:u.icon(e.icons.textHeight)+" "+u.icon(e.icons.caret,"span"),tooltip:o.font.height,data:{toggle:"dropdown"}}),u.dropdownCheck({items:e.lineHeights,checkClassName:e.icons.menuCheck,className:"dropdown-line-height",click:t.createInvokeHandler("editor.lineHeight")})]).render()});t.memo("button.table",function(){return u.buttonGroup([u.button({className:"dropdown-toggle",contents:u.icon(e.icons.table)+" "+u.icon(e.icons.caret,"span"),tooltip:o.table.table,data:{toggle:"dropdown"}}),u.dropdown({className:"note-table",items:'<div class="note-dimension-picker">  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>  <div class="note-dimension-picker-highlighted"/>  <div class="note-dimension-picker-unhighlighted"/><\/div><div class="note-dimension-display">1 x 1<\/div>'})],{callback:function(n){var i=n.find(".note-dimension-picker-mousecatcher");i.css({width:e.insertTableMaxSize.col+"em",height:e.insertTableMaxSize.row+"em"}).mousedown(t.createInvokeHandler("editor.insertTable")).on("mousemove",h.tableMoveHandler)}}).render()});t.memo("button.link",function(){return u.button({contents:u.icon(e.icons.link),tooltip:o.link.link+s("linkDialog.show"),click:t.createInvokeHandler("linkDialog.show")}).render()});t.memo("button.picture",function(){return u.button({contents:u.icon(e.icons.picture),tooltip:o.image.image,click:t.createInvokeHandler("imageDialog.show")}).render()});t.memo("button.video",function(){return u.button({contents:u.icon(e.icons.video),tooltip:o.video.video,click:t.createInvokeHandler("videoDialog.show")}).render()});t.memo("button.hr",function(){return u.button({contents:u.icon(e.icons.minus),tooltip:o.hr.insert+s("insertHorizontalRule"),click:t.createInvokeHandler("editor.insertHorizontalRule")}).render()});t.memo("button.fullscreen",function(){return u.button({className:"btn-fullscreen",contents:u.icon(e.icons.arrowsAlt),tooltip:o.options.fullscreen,click:t.createInvokeHandler("fullscreen.toggle")}).render()});t.memo("button.codeview",function(){return u.button({className:"btn-codeview",contents:u.icon(e.icons.code),tooltip:o.options.codeview,click:t.createInvokeHandler("codeview.toggle")}).render()});t.memo("button.redo",function(){return u.button({contents:u.icon(e.icons.redo),tooltip:o.history.redo+s("redo"),click:t.createInvokeHandler("editor.redo")}).render()});t.memo("button.undo",function(){return u.button({contents:u.icon(e.icons.undo),tooltip:o.history.undo+s("undo"),click:t.createInvokeHandler("editor.undo")}).render()});t.memo("button.help",function(){return u.button({contents:u.icon(e.icons.question),tooltip:o.options.help,click:t.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){t.memo("button.imageSize100",function(){return u.button({contents:'<span class="note-fontsize-10">100%<\/span>',tooltip:o.image.resizeFull,click:t.createInvokeHandler("editor.resize","1")}).render()});t.memo("button.imageSize50",function(){return u.button({contents:'<span class="note-fontsize-10">50%<\/span>',tooltip:o.image.resizeHalf,click:t.createInvokeHandler("editor.resize","0.5")}).render()});t.memo("button.imageSize25",function(){return u.button({contents:'<span class="note-fontsize-10">25%<\/span>',tooltip:o.image.resizeQuarter,click:t.createInvokeHandler("editor.resize","0.25")}).render()});t.memo("button.floatLeft",function(){return u.button({contents:u.icon(e.icons.alignLeft),tooltip:o.image.floatLeft,click:t.createInvokeHandler("editor.floatMe","left")}).render()});t.memo("button.floatRight",function(){return u.button({contents:u.icon(e.icons.alignRight),tooltip:o.image.floatRight,click:t.createInvokeHandler("editor.floatMe","right")}).render()});t.memo("button.floatNone",function(){return u.button({contents:u.icon(e.icons.alignJustify),tooltip:o.image.floatNone,click:t.createInvokeHandler("editor.floatMe","none")}).render()});t.memo("button.removeMedia",function(){return u.button({contents:u.icon(e.icons.trash),tooltip:o.image.remove,click:t.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){t.memo("button.linkDialogShow",function(){return u.button({contents:u.icon(e.icons.link),tooltip:o.link.edit,click:t.createInvokeHandler("linkDialog.show")}).render()});t.memo("button.unlink",function(){return u.button({contents:u.icon(e.icons.unlink),tooltip:o.link.unlink,click:t.createInvokeHandler("editor.unlink")}).render()})};this.build=function(n,i){for(var e,l,r,f=0,o=i.length;f<o;f++){var s=i[f],a=s[0],h=s[1],c=u.buttonGroup({className:"note-"+a}).render();for(e=0,l=h.length;e<l;e++)r=t.memo("button."+h[e]),r&&c.append(typeof r=="function"?r(t):r);c.appendTo(n)}};this.updateCurrentStyle=function(){var r=t.invoke("editor.currentStyle"),e,u,f,o;this.updateBtnStates({".note-btn-bold":function(){return r["font-bold"]==="bold"},".note-btn-italic":function(){return r["font-italic"]==="italic"},".note-btn-underline":function(){return r["font-underline"]==="underline"},".note-btn-subscript":function(){return r["font-subscript"]==="subscript"},".note-btn-superscript":function(){return r["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return r["font-strikethrough"]==="strikethrough"}});r["font-family"]&&(e=r["font-family"].split(",").map(function(n){return n.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),u=i.find(e,h.isFontInstalled),c.find(".dropdown-fontname li a").each(function(){var t=n(this).data("value")+""==u+"";this.className=t?"checked":""}),c.find(".note-current-fontname").text(u));r["font-size"]&&(f=r["font-size"],c.find(".dropdown-fontsize li a").each(function(){var t=n(this).data("value")+""==f+"";this.className=t?"checked":""}),c.find(".note-current-fontsize").text(f));r["line-height"]&&(o=r["line-height"],c.find(".dropdown-line-height li a").each(function(){var t=n(this).data("value")+""==o+"";this.className=t?"checked":""}))};this.updateBtnStates=function(t){n.each(t,function(n,t){u.toggleBtnActive(c.find(n),t())})};this.tableMoveHandler=function(t){var o=18,r=n(t.target.parentNode),h=r.next(),c=r.find(".note-dimension-picker-mousecatcher"),l=r.find(".note-dimension-picker-highlighted"),s=r.find(".note-dimension-picker-unhighlighted"),u,f,i;t.offsetX===undefined?(f=n(t.target).offset(),u={x:t.pageX-f.left,y:t.pageY-f.top}):u={x:t.offsetX,y:t.offsetY};i={c:Math.ceil(u.x/o)||1,r:Math.ceil(u.y/o)||1};l.css({width:i.c+"em",height:i.r+"em"});c.data("value",i.c+"x"+i.r);3<i.c&&i.c<e.insertTableMaxSize.col&&s.css({width:i.c+1+"em"});3<i.r&&i.r<e.insertTableMaxSize.row&&s.css({height:i.r+1+"em"});h.html(i.c+" x "+i.r)}},pi=function(t){var u=n.summernote.ui,f=t.layoutInfo.note,i=t.layoutInfo.toolbar,r=t.options;this.shouldInitialize=function(){return!r.airMode};this.initialize=function(){r.toolbar=r.toolbar||[];r.toolbar.length?t.invoke("buttons.build",i,r.toolbar):i.hide();r.toolbarContainer&&i.appendTo(r.toolbarContainer);f.on("summernote.keyup summernote.mouseup summernote.change",function(){t.invoke("buttons.updateCurrentStyle")});t.invoke("buttons.updateCurrentStyle")};this.destroy=function(){i.children().remove()};this.updateFullscreen=function(n){u.toggleBtnActive(i.find(".btn-fullscreen"),n)};this.updateCodeview=function(n){u.toggleBtnActive(i.find(".btn-codeview"),n);n?this.deactivate():this.activate()};this.activate=function(n){var t=i.find("button");n||(t=t.not(".btn-codeview"));u.toggleBtn(t,!0)};this.deactivate=function(n){var t=i.find("button");n||(t=t.not(".btn-codeview"));u.toggleBtn(t,!1)}},wi=function(t){var i=this,r=n.summernote.ui,o=t.layoutInfo.editor,u=t.options,f=u.langInfo;this.initialize=function(){var t=u.dialogsInBody?n(document.body):o,i='<div class="form-group"><label>'+f.link.textToDisplay+'<\/label><input class="note-link-text form-control" type="text" /><\/div><div class="form-group"><label>'+f.link.url+'<\/label><input class="note-link-url form-control" type="text" value="http://" /><\/div>'+(u.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+f.link.openInNewWindow+"<\/label><\/div>"),e='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+f.link.insert+"<\/button>";this.$dialog=r.dialog({className:"link-dialog",title:f.link.insert,fade:u.dialogsFade,body:i,footer:e}).render().appendTo(t)};this.destroy=function(){r.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===e.code.ENTER&&t.trigger("click")})};this.toggleLinkBtn=function(n,t,i){r.toggleBtn(n,t.val()&&i.val())};this.showLinkDialog=function(u){return n.Deferred(function(n){var f=i.$dialog.find(".note-link-text"),e=i.$dialog.find(".note-link-url"),o=i.$dialog.find(".note-link-btn"),s=i.$dialog.find("input[type=checkbox]");r.onDialogShown(i.$dialog,function(){var r,h;t.triggerEvent("dialog.shown");u.url||(u.url=u.text);f.val(u.text);r=function(){i.toggleLinkBtn(o,f,e);u.text=f.val()};f.on("input",r).on("paste",function(){setTimeout(r,0)});h=function(){i.toggleLinkBtn(o,f,e);u.text||f.val(e.val())};e.on("input",h).on("paste",function(){setTimeout(h,0)}).val(u.url).trigger("focus");i.toggleLinkBtn(o,f,e);i.bindEnterKey(e,o);i.bindEnterKey(f,o);s.prop("checked",u.isNewWindow);o.one("click",function(t){t.preventDefault();n.resolve({range:u.range,url:e.val(),text:f.val(),isNewWindow:s.is(":checked")});i.$dialog.modal("hide")})});r.onDialogHidden(i.$dialog,function(){f.off("input paste keypress");e.off("input paste keypress");o.off("click");n.state()==="pending"&&n.reject()});r.showDialog(i.$dialog)}).promise()};this.show=function(){var n=t.invoke("editor.getLinkInfo");t.invoke("editor.saveRange");this.showLinkDialog(n).then(function(n){t.invoke("editor.restoreRange");t.invoke("editor.createLink",n)}).fail(function(){t.invoke("editor.restoreRange")})};t.memo("help.linkDialog.show",u.langInfo.help["linkDialog.show"])},bi=function(r){var u=this,e=n.summernote.ui,f=r.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){u.update()},"summernote.dialog.shown":function(){u.hide()}};this.shouldInitialize=function(){return!i.isEmpty(f.popover.link)};this.initialize=function(){this.$popover=e.popover({className:"note-link-popover",callback:function(n){var t=n.find(".popover-content");t.prepend('<span><a target="_blank"><\/a>&nbsp;<\/span>')}}).render().appendTo("body");var n=this.$popover.find(".popover-content");r.invoke("buttons.build",n,f.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){var i,u,f,e;if(!r.invoke("editor.hasFocus")){this.hide();return}i=r.invoke("editor.createRange");i.isCollapsed()&&i.isOnAnchor()?(u=t.ancestor(i.sc,t.isAnchor),f=n(u).attr("href"),this.$popover.find("a").attr("href",f).html(f),e=t.posFromPlaceholder(u),this.$popover.css({display:"block",left:e.left,top:e.top})):this.hide()};this.hide=function(){this.$popover.hide()}},ki=function(t){var i=this,r=n.summernote.ui,o=t.layoutInfo.editor,u=t.options,f=u.langInfo;this.initialize=function(){var c=u.dialogsInBody?n(document.body):o,i="",t,e,s,h;u.maximumImageFileSize&&(t=Math.floor(Math.log(u.maximumImageFileSize)/Math.log(1024)),e=(u.maximumImageFileSize/Math.pow(1024,t)).toFixed(2)*1+" "+" KMGTP"[t]+"B",i="<small>"+f.image.maximumFileSize+" : "+e+"<\/small>");s='<div class="form-group note-group-select-from-files"><label>'+f.image.selectFromFiles+'<\/label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+i+'<\/div><div class="form-group note-group-image-url" style="overflow:auto;"><label>'+f.image.url+'<\/label><input class="note-image-url form-control col-md-12" type="text" /><\/div>';h='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+f.image.insert+"<\/button>";this.$dialog=r.dialog({title:f.image.insert,fade:u.dialogsFade,body:s,footer:h}).render().appendTo(c)};this.destroy=function(){r.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===e.code.ENTER&&t.trigger("click")})};this.show=function(){t.invoke("editor.saveRange");this.showImageDialog().then(function(n){r.hideDialog(i.$dialog);t.invoke("editor.restoreRange");typeof n=="string"?t.invoke("editor.insertImage",n):t.invoke("editor.insertImagesOrCallback",n)}).fail(function(){t.invoke("editor.restoreRange")})};this.showImageDialog=function(){return n.Deferred(function(n){var e=i.$dialog.find(".note-image-input"),u=i.$dialog.find(".note-image-url"),f=i.$dialog.find(".note-image-btn");r.onDialogShown(i.$dialog,function(){t.triggerEvent("dialog.shown");e.replaceWith(e.clone().on("change",function(){n.resolve(this.files||this.value)}).val(""));f.click(function(t){t.preventDefault();n.resolve(u.val())});u.on("keyup paste",function(){var n=u.val();r.toggleBtn(f,n)}).val("").trigger("focus");i.bindEnterKey(u,f)});r.onDialogHidden(i.$dialog,function(){e.off("change");u.off("keyup paste keypress");f.off("click");n.state()==="pending"&&n.reject()});r.showDialog(i.$dialog)})}},di=function(r){var f=n.summernote.ui,u=r.options;this.shouldInitialize=function(){return!i.isEmpty(u.popover.image)};this.initialize=function(){this.$popover=f.popover({className:"note-image-popover"}).render().appendTo("body");var n=this.$popover.find(".popover-content");r.invoke("buttons.build",n,u.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(n){if(t.isImg(n)){var i=t.posFromPlaceholder(n);this.$popover.css({display:"block",left:i.left,top:i.top})}else this.hide()};this.hide=function(){this.$popover.hide()}},gi=function(t){var i=this,r=n.summernote.ui,o=t.layoutInfo.editor,f=t.options,u=f.langInfo;this.initialize=function(){var t=f.dialogsInBody?n(document.body):o,i='<div class="form-group row-fluid"><label>'+u.video.url+' <small class="text-muted">'+u.video.providers+'<\/small><\/label><input class="note-video-url form-control span12" type="text" /><\/div>',e='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+u.video.insert+"<\/button>";this.$dialog=r.dialog({title:u.video.insert,fade:f.dialogsFade,body:i,footer:e}).render().appendTo(t)};this.destroy=function(){r.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===e.code.ENTER&&t.trigger("click")})};this.createVideoNode=function(t){var r=t.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/),u=t.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),f=t.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),e=t.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/),o=t.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),s=t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),c=t.match(/^.+.(mp4|m4v)$/),l=t.match(/^.+.(ogg|ogv)$/),a=t.match(/^.+.(webm)$/),i,h;if(r&&r[1].length===11)h=r[1],i=n("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+h).attr("width","640").attr("height","360");else if(u&&u[0].length)i=n("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+u[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(f&&f[0].length)i=n("<iframe>").attr("frameborder",0).attr("src",f[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(e&&e[3].length)i=n("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+e[3]).attr("width","640").attr("height","360");else if(o&&o[2].length)i=n("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+o[2]).attr("width","640").attr("height","360");else if(s&&s[1].length)i=n("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+s[1]);else if(c||l||a)i=n("<video controls>").attr("src",t).attr("width","640").attr("height","360");else return!1;return i.addClass("note-video-clip"),i[0]};this.show=function(){var n=t.invoke("editor.getSelectedText");t.invoke("editor.saveRange");this.showVideoDialog(n).then(function(n){r.hideDialog(i.$dialog);t.invoke("editor.restoreRange");var u=i.createVideoNode(n);u&&t.invoke("editor.insertNode",u)}).fail(function(){t.invoke("editor.restoreRange")})};this.showVideoDialog=function(u){return n.Deferred(function(n){var f=i.$dialog.find(".note-video-url"),e=i.$dialog.find(".note-video-btn");r.onDialogShown(i.$dialog,function(){t.triggerEvent("dialog.shown");f.val(u).on("input",function(){r.toggleBtn(e,f.val())}).trigger("focus");e.click(function(t){t.preventDefault();n.resolve(f.val())});i.bindEnterKey(f,e)});r.onDialogHidden(i.$dialog,function(){f.off("input");e.off("click");n.state()==="pending"&&n.reject()});r.showDialog(i.$dialog)})}},nr=function(t){var u=this,i=n.summernote.ui,e=t.layoutInfo.editor,r=t.options,o=r.langInfo;this.createShortCutList=function(){var i=r.keyMap[f.isMac?"mac":"pc"];return Object.keys(i).map(function(r){var u=i[r],f=n('<div><div class="help-list-item"/><\/div>');return f.append(n("<label><kbd>"+r+"<\/kdb><\/label>").css({width:180,"margin-right":10})).append(n("<span/>").html(t.memo("help."+u)||u)),f.html()}).join("")};this.initialize=function(){var t=r.dialogsInBody?n(document.body):e,u='<p class="text-center"><a href="http://summernote.org/" target="_blank">Summernote 0.8.2<\/a> Â· <a href="https://github.com/summernote/summernote" target="_blank">Project<\/a> Â· <a href="https://github.com/summernote/summernote/issues" target="_blank">Issues<\/a><\/p>';this.$dialog=i.dialog({title:o.options.help,fade:r.dialogsFade,body:this.createShortCutList(),footer:u,callback:function(n){n.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return n.Deferred(function(n){i.onDialogShown(u.$dialog,function(){t.triggerEvent("dialog.shown");n.resolve()});i.showDialog(u.$dialog)}).promise()};this.show=function(){t.invoke("editor.saveRange");this.showHelpDialog().then(function(){t.invoke("editor.restoreRange")})}},tr=function(u){var e=this,s=n.summernote.ui,o=u.options,h=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){e.update()},"summernote.change summernote.dialog.shown":function(){e.hide()},"summernote.focusout":function(n,i){f.isFF||i.relatedTarget&&t.ancestor(i.relatedTarget,r.eq(e.$popover[0]))||e.hide()}};this.shouldInitialize=function(){return o.airMode&&!i.isEmpty(o.popover.air)};this.initialize=function(){this.$popover=s.popover({className:"note-air-popover"}).render().appendTo("body");var n=this.$popover.find(".popover-content");u.invoke("buttons.build",n,o.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var t=u.invoke("editor.currentStyle"),f,n;t.range&&!t.range.isCollapsed()?(f=i.last(t.range.getClientRects()),f&&(n=r.rect2bnd(f),this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-h,top:n.top+n.height}))):this.hide()};this.hide=function(){this.$popover.hide()}},ir=function(f){var o=this,l=n.summernote.ui,c=5,h=f.options.hint||[],a=f.options.hintDirection||"bottom",s=n.isArray(h)?h:[h];this.events={"summernote.keyup":function(n,t){t.isDefaultPrevented()||o.handleKeyup(t)},"summernote.keydown":function(n,t){o.handleKeydown(t)},"summernote.dialog.shown":function(){o.hide()}};this.shouldInitialize=function(){return s.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=l.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){o.$content.find(".active").removeClass("active");n(this).addClass("active");o.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(n){this.$content.find(".active").removeClass("active");n.addClass("active");this.$content[0].scrollTop=n[0].offsetTop-this.$content.innerHeight()/2};this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),i=t.next(),n;i.length?this.selectItem(i):(n=t.parent().next(),n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first()))};this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),i=t.prev(),n;i.length?this.selectItem(i):(n=t.parent().prev(),n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last()))};this.replace=function(){var t=this.$content.find(".note-hint-item.active"),n;t.length&&(n=this.nodeFromItem(t),this.lastWordRange.insertNode(n),u.createFromNode(n).collapse().select(),this.lastWordRange=null,this.hide(),f.invoke("editor.focus"))};this.nodeFromItem=function(n){var r=s[n.data("index")],u=n.data("item"),i=r.content?r.content(u):u;return typeof i=="string"&&(i=t.createText(i)),i};this.createItemTemplates=function(t,i){var r=s[t];return i.map(function(i,u){var f=n('<div class="note-hint-item"/>');return f.append(r.template?r.template(i):i+""),f.data({index:t,item:i}),t===0&&u===0&&f.addClass("active"),f})};this.handleKeydown=function(n){this.$popover.is(":visible")&&(n.keyCode===e.code.ENTER?(n.preventDefault(),this.replace()):n.keyCode===e.code.UP?(n.preventDefault(),this.moveUp()):n.keyCode===e.code.DOWN&&(n.preventDefault(),this.moveDown()))};this.searchKeyword=function(n,t,i){var r=s[n],u;r&&r.match.test(t)&&r.search?(u=r.match.exec(t),r.search(u[1],i)):i()};this.createGroup=function(t,i){var r=n('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,i,function(n){n=n||[];n.length&&(r.html(o.createItemTemplates(t,n)),o.show())}),r};this.handleKeyup=function(n){var u,h,t;if(i.contains([e.code.ENTER,e.code.UP,e.code.DOWN],n.keyCode)){if(n.keyCode===e.code.ENTER&&this.$popover.is(":visible"))return}else u=f.invoke("editor.createRange").getWordRange(),h=u.toString(),s.length&&h?(this.$content.empty(),t=r.rect2bnd(i.last(u.getClientRects())),t&&(this.$popover.hide(),this.lastWordRange=u,s.forEach(function(n,t){n.match.test(h)&&o.createGroup(t,h).appendTo(o.$content)}),a==="top"?this.$popover.css({left:t.left,top:t.top-this.$popover.outerHeight()-c}):this.$popover.css({left:t.left,top:t.top+t.height+c}))):this.hide()};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};n.summernote=n.extend(n.summernote,{version:"0.8.2",ui:s,dom:t,plugins:{},options:{modules:{editor:ri,clipboard:ui,dropzone:fi,codeview:ei,statusbar:si,fullscreen:hi,handle:ci,hintPopover:ir,autoLink:li,autoSync:ai,placeholder:vi,buttons:yi,toolbar:pi,linkDialog:wi,linkPopover:bi,imageDialog:ki,imagePopover:di,videoDialog:gi,helpDialog:nr,airPopover:tr},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});
/*!
 * Datepicker for Bootstrap v1.7.0-dev (https://github.com/uxsolutions/bootstrap-datepicker)
 *
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n,t){function u(){return new Date(Date.UTC.apply(Date,arguments))}function o(){var n=new Date;return u(n.getFullYear(),n.getMonth(),n.getDate())}function l(n,t){return n.getUTCFullYear()===t.getUTCFullYear()&&n.getUTCMonth()===t.getUTCMonth()&&n.getUTCDate()===t.getUTCDate()}function s(i,r){return function(){return r!==t&&n.fn.datepicker.deprecated(r),this[i].apply(this,arguments)}}function p(n){return n&&!isNaN(n.getTime())}function w(t,i){function s(n,t){return t.toLowerCase()}var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in u)i.test(r)&&(e=r.replace(o,s),f[e]=u[r]);return f}function b(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(y,function(n,t){t in i&&(u[t]=i[t])}),u}var a=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(0<=this[t].valueOf()-i&&this[t].valueOf()-i<864e5)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var n=new a;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),f=function(t,r){n.data(t,"datepicker",this);this._process_options(r);this.dates=new a;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=n(t);this.isInput=this.element.is("input");this.inputField=this.isInput?this.element:this.element.find("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.component&&this.component.length===0&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=n(i.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(n,t){return Number(t)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()},h,v,e,c,y,r,i;f.prototype={constructor:f,_resolveViewName:function(t){return n.each(i.viewModes,function(i,r){if(t===i||n.inArray(t,r.names)!==-1)return t=i,!1}),t},_resolveDaysOfWeek:function(t){return n.isArray(t)||(t=t.split(/[,\s]*/)),n.map(t,Number)},_check_template:function(i){try{if(i===t||i==="")return!1;if((i.match(/[<>]/g)||[]).length<=0)return!0;var r=n(i);return r.length>0}catch(u){return!1}},_process_options:function(t){var f,s,l,e,h;if(this._o=n.extend({},this._o,t),f=this.o=n.extend({},this._o),s=f.language,r[s]||(s=s.split("-")[0],r[s]||(s=c.language)),f.language=s,f.startView=this._resolveViewName(f.startView),f.minViewMode=this._resolveViewName(f.minViewMode),f.maxViewMode=this._resolveViewName(f.maxViewMode),f.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,f.startView)),f.multidate!==!0&&(f.multidate=Number(f.multidate)||!1,f.multidate!==!1&&(f.multidate=Math.max(0,f.multidate))),f.multidateSeparator=String(f.multidateSeparator),f.weekStart%=7,f.weekEnd=(f.weekStart+6)%7,l=i.parseFormat(f.format),f.startDate!==-Infinity&&(f.startDate=f.startDate?f.startDate instanceof Date?this._local_to_utc(this._zero_time(f.startDate)):i.parseDate(f.startDate,l,f.language,f.assumeNearbyYear):-Infinity),f.endDate!==Infinity&&(f.endDate=f.endDate?f.endDate instanceof Date?this._local_to_utc(this._zero_time(f.endDate)):i.parseDate(f.endDate,l,f.language,f.assumeNearbyYear):Infinity),f.daysOfWeekDisabled=this._resolveDaysOfWeek(f.daysOfWeekDisabled||[]),f.daysOfWeekHighlighted=this._resolveDaysOfWeek(f.daysOfWeekHighlighted||[]),f.datesDisabled=f.datesDisabled||[],n.isArray(f.datesDisabled)||(f.datesDisabled=f.datesDisabled.split(",")),f.datesDisabled=n.map(f.datesDisabled,function(n){return i.parseDate(n,l,f.language,f.assumeNearbyYear)}),e=String(f.orientation).toLowerCase().split(/\s+/g),h=f.orientation.toLowerCase(),e=n.grep(e,function(n){return/^auto|left|right|top|bottom$/.test(n)}),f.orientation={x:"auto",y:"auto"},h&&h!=="auto")if(e.length===1)switch(e[0]){case"top":case"bottom":f.orientation.y=e[0];break;case"left":case"right":f.orientation.x=e[0]}else h=n.grep(e,function(n){return/^left|right$/.test(n)}),f.orientation.x=h[0]||"auto",h=n.grep(e,function(n){return/^top|bottom$/.test(n)}),f.orientation.y=h[0]||"auto";if(f.defaultViewDate instanceof Date||typeof f.defaultViewDate=="string")f.defaultViewDate=i.parseDate(f.defaultViewDate,l,f.language,f.assumeNearbyYear);else if(f.defaultViewDate){var a=f.defaultViewDate.year||(new Date).getFullYear(),v=f.defaultViewDate.month||0,y=f.defaultViewDate.day||1;f.defaultViewDate=u(a,v,y)}else f.defaultViewDate=o()},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++){f=n[i][0];n[i].length===2?(r=t,u=n[i][1]):n[i].length===3&&(r=n[i][1],u=n[i][2]);f.on(u,r)}},_unapplyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++)f=n[i][0],n[i].length===2?(u=t,r=n[i][1]):n[i].length===3&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){var t={keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this),paste:n.proxy(this.paste,this)};this.o.showOnFocus===!0&&(t.focus=n.proxy(this.show,this));this._events=this.isInput?[[this.element,t]]:this.component&&this.inputField.length?[[this.inputField,t],[this.component,{click:n.proxy(this.show,this)}]]:[[this.element,{click:n.proxy(this.show,this),keydown:n.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":n.proxy(function(n){this.update(n.date)},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[this.picker,".prev, .next",{click:n.proxy(this.navArrowsClick,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,viewMode:this.viewMode,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){arguments.length===0?(n=this.dates.length-1,t=this.o.format):typeof n=="string"&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){if(!this.inputField.prop("disabled")&&(!this.inputField.prop("readonly")||this.o.enableOnReadonly!==!1))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&n(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var i;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&n.inArray("text/plain",t.originalEvent.clipboardData.types)!==-1)i=t.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)i=window.clipboardData.getData("Text");else return;this.setDate(i);this.update();t.preventDefault()},_utc_to_local:function(n){if(!n)return n;var t=new Date(n.getTime()+n.getTimezoneOffset()*6e4);return t.getTimezoneOffset()!==n.getTimezoneOffset()&&(t=new Date(n.getTime()+t.getTimezoneOffset()*6e4)),t},_local_to_utc:function(n){return n&&new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&u(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var n=this.dates.get(-1);return n!==t?new Date(n):null},clearDates:function(){this.inputField.val("");this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,n.map(t,this._utc_to_local)),this},setDate:s("setDates"),setUTCDate:s("setUTCDates"),remove:s("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var n=this.getFormattedDate();return this.inputField.val(n),this},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(n){return this._process_options({startDate:n}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(n){return this._process_options({endDate:n}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(n){return this._process_options({daysOfWeekDisabled:n}),this.update(),this},setDaysOfWeekHighlighted:function(n){return this._process_options({daysOfWeekHighlighted:n}),this.update(),this},setDatesDisabled:function(n){return this._process_options({datesDisabled:n}),this.update(),this},place:function(){var r,y,p;if(this.isInline)return this;var f=this.picker.outerWidth(),s=this.picker.outerHeight(),e=n(this.o.container),h=e.width(),c=this.o.container==="body"?n(document).scrollTop():e.scrollTop(),l=e.offset(),a=[0];this.element.parents().each(function(){var t=n(this).css("z-index");t!=="auto"&&Number(t)!==0&&a.push(Number(t))});var v=Math.max.apply(Math,a)+this.o.zIndexOffset,u=this.component?this.component.parent().offset():this.element.offset(),w=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),o=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),t=u.left-l.left,i=u.top-l.top;return this.o.container!=="body"&&(i+=c),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(t-=f-o)):u.left<0?(this.picker.addClass("datepicker-orient-left"),t-=u.left-10):t+f>h?(this.picker.addClass("datepicker-orient-right"),t+=o-f):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left"),r=this.o.orientation.y,r==="auto"&&(y=-c+i-s,r=y<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+r),r==="top"?i-=s+parseInt(this.picker.css("padding-top")):i+=w,this.o.rtl?(p=h-(t+o),this.picker.css({top:i,right:p,zIndex:v})):this.picker.css({top:i,left:t,zIndex:v}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var r=this.dates.copy(),t=[],u=!1;return arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),u=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date),t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),t=n.grep(t,n.proxy(function(n){return!this.dateWithinRange(n)||!n},this),!0),this.dates.replace(t),this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate),u?(this.setValue(),this.element.change()):this.dates.length&&(typeof this.o.format=="string"?(String(this.element[0].value).length===String(this.o.format).length&&String(r)!==String(this.dates)&&this._trigger("changeDate"),this.element.change()):String(r)!==String(this.dates)&&(this._trigger("changeDate"),this.element.change())),!this.dates.length&&r.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){var i=this.o.weekStart,t="<tr>";for(this.o.calendarWeeks&&(t+='<th class="cw">&#160;<\/th>');i<this.o.weekStart+7;)t+='<th class="dow',n.inArray(i,this.o.daysOfWeekDisabled)!==-1&&(t+=" disabled"),t+='">'+r[this.o.language].daysMin[i++%7]+"<\/th>";t+="<\/tr>";this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),i="",u,n=0;n<12;n++)u=t&&t.getMonth()===n?" focused":"",i+='<span class="month'+u+'">'+r[this.o.language].monthsShort[n]+"<\/span>";this.picker.find(".datepicker-months td").html(i)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),u=this.viewDate.getUTCMonth(),f=o();return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<u?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>u)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&l(t,f)&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),this.dateWithinRange(t)||i.push("disabled"),this.dateIsDisabled(t)&&i.push("disabled","disabled-date"),n.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1&&i.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected"),t.valueOf()===this.range[0]&&i.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&i.push("range-end")),i},_fill_yearsView:function(i,r,u,f,e,o,s){for(var w="",c=u/10,b=this.picker.find(i),v=Math.floor(f/u)*u,p=v+c*9,k=Math.floor(this.viewDate.getFullYear()/c)*c,d=n.map(this.dates,function(n){return Math.floor(n.getUTCFullYear()/c)*c}),l,y,h,a=v-c;a<=p+c;a+=c)l=[r],y=null,a===v-c?l.push("old"):a===p+c&&l.push("new"),n.inArray(a,d)!==-1&&l.push("active"),(a<e||a>o)&&l.push("disabled"),a===k&&l.push("focused"),s!==n.noop&&(h=s(new Date(a,0,1)),h===t?h={}:typeof h=="boolean"?h={enabled:h}:typeof h=="string"&&(h={classes:h}),h.enabled===!1&&l.push("disabled"),h.classes&&(l=l.concat(h.classes.split(/\s+/))),h.tooltip&&(y=h.tooltip)),w+='<span class="'+l.join(" ")+'"'+(y?' title="'+y+'"':"")+">"+a+"<\/span>";b.find(".datepicker-switch").text(v+"-"+p);b.find("td").html(w)},fill:function(){var w=new Date(this.viewDate),o=w.getUTCFullYear(),k=w.getUTCMonth(),a=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,rt=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,v=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,ut=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,ft=r[this.o.language].today||r.en.today||"",et=r[this.o.language].clear||r.en.clear||"",ot=r[this.o.language].titleFormat||r.en.titleFormat,y,e,f,d,h,c,p,s,tt,l,it;if(!isNaN(o)&&!isNaN(k)){for(this.picker.find(".datepicker-days .datepicker-switch").text(i.formatDate(w,ot,this.o.language)),this.picker.find("tfoot .today").text(ft).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(et).toggle(this.o.clearBtn!==!1),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(this.o.title!==""),this.updateNavArrows(),this.fillMonths(),f=u(o,k,0),d=f.getUTCDate(),f.setUTCDate(d-(f.getUTCDay()-this.o.weekStart+7)%7),h=new Date(f),f.getUTCFullYear()<100&&h.setUTCFullYear(f.getUTCFullYear()),h.setUTCDate(h.getUTCDate()+42),h=h.valueOf(),c=[];f.valueOf()<h;){if(p=f.getUTCDay(),p===this.o.weekStart&&(c.push("<tr>"),this.o.calendarWeeks)){var g=new Date(+f+(this.o.weekStart-p-7)%7*864e5),nt=new Date(Number(g)+(11-g.getUTCDay())%7*864e5),b=new Date(Number(b=u(nt.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),st=(nt-b)/6048e5+1;c.push('<td class="cw">'+st+"<\/td>")}s=this.getClassNames(f);s.push("day");this.o.beforeShowDay!==n.noop&&(e=this.o.beforeShowDay(this._utc_to_local(f)),e===t?e={}:typeof e=="boolean"?e={enabled:e}:typeof e=="string"&&(e={classes:e}),e.enabled===!1&&s.push("disabled"),e.classes&&(s=s.concat(e.classes.split(/\s+/))),e.tooltip&&(y=e.tooltip));s=n.isFunction(n.uniqueSort)?n.uniqueSort(s):n.unique(s);c.push('<td class="'+s.join(" ")+'"'+(y?' title="'+y+'"':"")+(this.o.dateCells?' data-date="'+f.getTime().toString()+'"':"")+">"+f.getUTCDate()+"<\/td>");y=null;p===this.o.weekEnd&&c.push("<\/tr>");f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(c.join(""));tt=r[this.o.language].monthsTitle||r.en.monthsTitle||"Months";l=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?tt:o).end().find("tbody span").removeClass("active");n.each(this.dates,function(n,t){t.getUTCFullYear()===o&&l.eq(t.getUTCMonth()).addClass("active")});(o<a||o>v)&&l.addClass("disabled");o===a&&l.slice(0,rt).addClass("disabled");o===v&&l.slice(ut+1).addClass("disabled");this.o.beforeShowMonth!==n.noop&&(it=this,n.each(l,function(i,r){var f=new Date(o,i,1),u=it.o.beforeShowMonth(f);u===t?u={}:typeof u=="boolean"?u={enabled:u}:typeof u=="string"&&(u={classes:u});u.enabled!==!1||n(r).hasClass("disabled")||n(r).addClass("disabled");u.classes&&n(r).addClass(u.classes);u.tooltip&&n(r).prop("title",u.tooltip)}));this._fill_yearsView(".datepicker-years","year",10,o,a,v,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,o,a,v,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1e3,o,a,v,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var u=new Date(this.viewDate),t=u.getUTCFullYear(),f=u.getUTCMonth(),e=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,s=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,o=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,h=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,i,r,n=1;switch(this.viewMode){case 0:i=t<=e&&f<=s;r=t>=o&&f>=h;break;case 4:n*=10;case 3:n*=10;case 2:n*=10;case 1:i=Math.floor(t/n)*n<=e;r=Math.floor(t/n)*n+n>=o}this.picker.find(".prev").toggleClass("disabled",i);this.picker.find(".next").toggleClass("disabled",r)}},click:function(t){t.preventDefault();t.stopPropagation();var r,s,h,e,f;r=n(t.target);r.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(o(),this.o.todayBtn==="linked"?null:"view"));r.hasClass("clear")&&this.clearDates();r.hasClass("disabled")||(r.hasClass("day")&&(h=Number(r.text()),e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),(r.hasClass("old")||r.hasClass("new"))&&(s=r.hasClass("old")?-1:1,f=(f+s+12)%12,(s===-1&&f===11||s===1&&f===0)&&(e+=s,this.o.updateViewDate&&this._trigger("changeYear",this.viewDate)),this.o.updateViewDate&&this._trigger("changeMonth",this.viewDate)),this._setDate(u(e,f,h))),(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),h=1,this.viewMode===1?(f=r.parent().find("span").index(r),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(f)):(f=0,e=Number(r.text()),this.viewDate.setUTCFullYear(e)),this._trigger(i.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(u(e,f,h)):(this.setViewMode(this.viewMode-1),this.fill())));this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus();delete this._focused_from},navArrowsClick:function(t){var u=n(t.target),r=u.hasClass("prev")?-1:1;this.viewMode!==0&&(r*=i.viewModes[this.viewMode].navStep*12);this.viewDate=this.moveMonth(this.viewDate,r);this._trigger(i.viewModes[this.viewMode].e,this.viewDate);this.fill()},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n||this.dates.clear(),t!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(n)):this.dates.push(n),typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(n,t){t&&t!=="date"||this._toggle_multidate(n&&new Date(n));(!t&&this.o.updateViewDate||t==="view")&&(this.viewDate=n&&new Date(n));this.fill();this.setValue();t&&t==="view"||this._trigger("changeDate");this.inputField.trigger("change");this.o.autoclose&&(!t||t==="date")&&this.hide()},moveDay:function(n,t){var i=new Date(n);return i.setUTCDate(n.getUTCDate()+t),i},moveWeek:function(n,t){return this.moveDay(n,t*7)},moveMonth:function(n,t){var f;if(!p(n))return this.o.defaultViewDate;if(!t)return n;var i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t),r,u;if(t=t>0?1:-1,s===1)u=t===-1?function(){return i.getUTCMonth()===o}:function(){return i.getUTCMonth()!==r},r=o+t,i.setUTCMonth(r),r=(r+12)%12;else{for(f=0;f<s;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!==i.getUTCMonth()}}while(u())i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,t*12)},moveAvailableDate:function(n,t,i){do{if(n=this[i](n,t),!this.dateWithinRange(n))return!1;i="moveDay"}while(this.dateIsDisabled(n));return n},weekOfDateIsDisabled:function(t){return n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||n.grep(this.o.datesDisabled,function(n){return l(t,n)}).length>0},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){if(!this.picker.is(":visible")){(n.keyCode===40||n.keyCode===27)&&(this.show(),n.stopPropagation());return}var u=!1,t,i,r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();n.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||this.o.daysOfWeekDisabled.length===7)break;t=n.keyCode===37||n.keyCode===38?-1:1;this.viewMode===0?n.ctrlKey?(i=this.moveAvailableDate(r,t,"moveYear"),i&&this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveAvailableDate(r,t,"moveMonth"),i&&this._trigger("changeMonth",this.viewDate)):n.keyCode===37||n.keyCode===39?i=this.moveAvailableDate(r,t,"moveDay"):this.weekOfDateIsDisabled(r)||(i=this.moveAvailableDate(r,t,"moveWeek")):this.viewMode===1?((n.keyCode===38||n.keyCode===40)&&(t=t*4),i=this.moveAvailableDate(r,t,"moveMonth")):this.viewMode===2&&((n.keyCode===38||n.keyCode===40)&&(t=t*4),i=this.moveAvailableDate(r,t,"moveYear"));i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),n.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(r),u=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),n.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}u&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))},setViewMode:function(n){this.viewMode=n;this.picker.children("div").hide().filter(".datepicker-"+i.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};h=function(t,i){n.data(t,"datepicker",this);this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;this.keepEmptyValues=i.keepEmptyValues;delete i.keepEmptyValues;e.call(n(this.inputs),i).on("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n.data(t,"datepicker")});this.updateDates()};h.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(i){var u;if(!this.updating&&(this.updating=!0,u=n.data(i.target,"datepicker"),u!==t)){var r=u.getUTCDate(),s=this.keepEmptyValues,o=n.inArray(i.target,this.inputs),f=o-1,e=o+1,h=this.inputs.length;if(o!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t!==u&&s||t.setUTCDate(r)}),r<this.dates[f])while(f>=0&&r<this.dates[f])this.pickers[f--].setUTCDate(r);else if(r>this.dates[e])while(e<h&&r>this.dates[e])this.pickers[e++].setUTCDate(r);this.updateDates();delete this.updating}}},destroy:function(){n.map(this.pickers,function(n){n.destroy()});n(this.inputs).off("changeDate",this.dateUpdated);delete this.element.data().datepicker},remove:s("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};v=n.fn.datepicker;e=function(i){var u=Array.apply(null,arguments),r;if(u.shift(),this.each(function(){var o=n(this),t=o.data("datepicker"),s=typeof i=="object"&&i;if(!t){var l=w(this,"date"),a=n.extend({},c,l,s),v=b(a.language),e=n.extend({},c,v,l,s);o.hasClass("input-daterange")||e.inputs?(n.extend(e,{inputs:e.inputs||o.find("input").toArray()}),t=new h(this,e)):t=new f(this,e);o.data("datepicker",t)}typeof i=="string"&&typeof t[i]=="function"&&(r=t[i].apply(t,u))}),r===t||r instanceof f||r instanceof h)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");else return r};n.fn.datepicker=e;c=n.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:n.noop,beforeShowMonth:n.noop,beforeShowYear:n.noop,beforeShowDecade:n.noop,beforeShowCentury:n.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,dateCells:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"}};y=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=f;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}};i={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(n){if(typeof n.toValue=="function"&&typeof n.toDisplay=="function")return n;var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(u,e,s,h){function et(n,t){return t===!0&&(t=10),n<100&&(n+=2e3,n>(new Date).getFullYear()+t&&(n-=100)),n}function ut(){var n=this.slice(0,l[c].length),t=l[c].slice(0,n.length);return n.toLowerCase()===t.toLowerCase()}var tt,g,l,y,it,c,rt,v,ft,d,w;if(!u)return t;if(u instanceof Date)return u;if(typeof e=="string"&&(e=i.parseFormat(e)),e.toValue)return e.toValue(u,e,s);if(tt={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},g={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},u in g&&(u=g[u]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(u)){for(l=u.match(/([\-+]\d+)([dmwy])/gi),u=new Date,c=0;c<l.length;c++)y=l[c].match(/([\-+]\d+)([dmwy])/i),it=Number(y[1]),rt=tt[y[2].toLowerCase()],u=f.prototype[rt](u,it);return f.prototype._zero_utc_time(u)}l=u&&u.match(this.nonpunctuation)||[];var b={},nt=["yyyy","yy","M","MM","m","mm","d","dd"],a={yyyy:function(n,t){return n.setUTCFullYear(h?et(t,h):t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},p,k;if(a.yy=a.yyyy,a.M=a.MM=a.mm=a.m,a.dd=a.d,u=o(),v=e.parts.slice(),l.length!==v.length&&(v=n(v).filter(function(t,i){return n.inArray(i,nt)!==-1}).toArray()),l.length===v.length){for(c=0,ft=v.length;c<ft;c++){if(p=parseInt(l[c],10),y=v[c],isNaN(p))switch(y){case"MM":k=n(r[s].months).filter(ut);p=n.inArray(k[0],r[s].months)+1;break;case"M":k=n(r[s].monthsShort).filter(ut);p=n.inArray(k[0],r[s].monthsShort)+1}b[y]=p}for(c=0;c<nt.length;c++)w=nt[c],w in b&&!isNaN(b[w])&&(d=new Date(u),a[w](d,b[w]),isNaN(d)||(u=d))}return u},formatDate:function(t,u,f){var e,s,o,h;if(!t)return"";if(typeof u=="string"&&(u=i.parseFormat(u)),u.toDisplay)return u.toDisplay(t,u,f);for(e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,t=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"><\/th><\/tr><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-decades"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-centuries"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=v,this};n.fn.datepicker.version="1.7.0-dev";n.fn.datepicker.deprecated=function(n){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+n)};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),e.call(i,"show"))});n(function(){e.call(n('[data-provide="datepicker-inline"]'))})});
//! moment.js
//! version : 2.9.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(n){function it(n,t,i){switch(arguments.length){case 2:return n!=null?n:t;case 3:return n!=null?n:t!=null?t:i;default:throw new Error("Implement me");}}function g(n,t){return dr.call(n,t)}function vt(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function pi(n){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+n)}function o(n,t){var i=!0;return nt(function(){return i&&(pi(n),i=!1),t.apply(this,arguments)},t)}function bu(n,t){vi[n]||(pi(t),vi[n]=!0)}function wi(n,t){return function(i){return r(n.call(this,i),t)}}function ku(n,t){return function(i){return this.localeData().ordinal(n.call(this,i),t)}}function du(n,t){var r=(t.year()-n.year())*12+(t.month()-n.month()),i=n.clone().add(r,"months"),u,f;return t-i<0?(u=n.clone().add(r-1,"months"),f=(t-i)/(i-u)):(u=n.clone().add(r+1,"months"),f=(t-i)/(u-i)),-(r+f)}function gu(n,t,i){var r;return i==null?t:n.meridiemHour!=null?n.meridiemHour(t,i):n.isPM!=null?(r=n.isPM(i),r&&t<12&&(t+=12),r||t!==12||(t=0),t):t}function bi(){}function et(n,i){i!==!1&&er(n);ki(this,n);this._d=new Date(+n._d);at===!1&&(at=!0,t.updateOffset(this),at=!1)}function yt(n){var i=ir(n),r=i.year||0,u=i.quarter||0,f=i.month||0,e=i.week||0,o=i.day||0,s=i.hour||0,h=i.minute||0,c=i.second||0,l=i.millisecond||0;this._milliseconds=+l+c*1e3+h*6e4+s*36e5;this._days=+o+e*7;this._months=+f+u*3+r*12;this._data={};this._locale=t.localeData();this._bubble()}function nt(n,t){for(var i in t)g(t,i)&&(n[i]=t[i]);return g(t,"toString")&&(n.toString=t.toString),g(t,"valueOf")&&(n.valueOf=t.valueOf),n}function ki(n,t){var u,i,r;if(typeof t._isAMomentObject!="undefined"&&(n._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(n._i=t._i),typeof t._f!="undefined"&&(n._f=t._f),typeof t._l!="undefined"&&(n._l=t._l),typeof t._strict!="undefined"&&(n._strict=t._strict),typeof t._tzm!="undefined"&&(n._tzm=t._tzm),typeof t._isUTC!="undefined"&&(n._isUTC=t._isUTC),typeof t._offset!="undefined"&&(n._offset=t._offset),typeof t._pf!="undefined"&&(n._pf=t._pf),typeof t._locale!="undefined"&&(n._locale=t._locale),ut.length>0)for(u in ut)i=ut[u],r=t[i],typeof r!="undefined"&&(n[i]=r);return n}function h(n){return n<0?Math.ceil(n):Math.floor(n)}function r(n,t,i){for(var r=""+Math.abs(n),u=n>=0;r.length<t;)r="0"+r;return(u?i?"+":"":"-")+r}function di(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+(t.year()-n.year())*12,n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function nf(n,t){var i;return t=bt(t,n),n.isBefore(t)?i=di(n,t):(i=di(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function gi(n,i){return function(r,u){var f,e;return u===null||isNaN(+u)||(bu(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period)."),e=r,r=u,u=e),r=typeof r=="string"?+r:r,f=t.duration(r,u),nr(this,f,n),this}}function nr(n,i,r,u){var o=i._milliseconds,f=i._days,e=i._months;u=u==null?!0:u;o&&n._d.setTime(+n._d+o*r);f&&pr(n,"Date",ii(n,"Date")+f*r);e&&yr(n,ii(n,"Month")+e*r);u&&t.updateOffset(n,f||e)}function ot(n){return Object.prototype.toString.call(n)==="[object Array]"}function pt(n){return Object.prototype.toString.call(n)==="[object Date]"||n instanceof Date}function tr(n,t,r){for(var e=Math.min(n.length,t.length),o=Math.abs(n.length-t.length),f=0,u=0;u<e;u++)(r&&n[u]!==t[u]||!r&&i(n[u])!==i(t[u]))&&f++;return f+o}function e(n){if(n){var t=n.toLowerCase().replace(/(.)s$/,"$1");n=pu[n]||wu[t]||t}return n}function ir(n){var r={},t;for(var i in n)g(n,i)&&(t=e(i),t&&(r[t]=n[i]));return r}function tf(i){var r,u;if(i.indexOf("week")===0)r=7,u="day";else if(i.indexOf("month")===0)r=12,u="month";else return;t[i]=function(f,e){var o,s,c=t._locale[i],h=[];if(typeof f=="number"&&(e=f,f=n),s=function(n){var i=t().utc().set(u,n);return c.call(t._locale,i,f||"")},e!=null)return s(e);for(o=0;o<r;o++)h.push(s(o));return h}}function i(n){var t=+n,i=0;return t!==0&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function wt(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function rr(n,i,r){return tt(t([n,11,31+i-r]),i,r).week}function ur(n){return fr(n)?366:365}function fr(n){return n%4==0&&n%100!=0||n%400==0}function er(n){var t;n._a&&n._pf.overflow===-2&&(t=n._a[l]<0||n._a[l]>11?l:n._a[s]<1||n._a[s]>wt(n._a[c],n._a[l])?s:n._a[f]<0||n._a[f]>24||n._a[f]===24&&(n._a[w]!==0||n._a[b]!==0||n._a[k]!==0)?f:n._a[w]<0||n._a[w]>59?w:n._a[b]<0||n._a[b]>59?b:n._a[k]<0||n._a[k]>999?k:-1,n._pf._overflowDayOfYear&&(t<c||t>s)&&(t=s),n._pf.overflow=t)}function or(t){return t._isValid==null&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&t._pf.charsLeftOver===0&&t._pf.unusedTokens.length===0&&t._pf.bigHour===n)),t._isValid}function sr(n){return n?n.toLowerCase().replace("_","-"):n}function rf(n){for(var r=0,i,t,f,u;r<n.length;){for(u=sr(n[r]).split("-"),i=u.length,t=sr(n[r+1]),t=t?t.split("-"):null;i>0;){if(f=hr(u.slice(0,i).join("-")),f)return f;if(t&&t.length>=i&&tr(u,t,!0)>=i-1)break;i--}r++}return null}function hr(n){var i=null;if(!d[n]&&ui)try{i=t.locale();require("./locale/"+n);t.locale(i)}catch(r){}return d[n]}function bt(n,i){var r,u;return i._isUTC?(r=i.clone(),u=(t.isMoment(n)||pt(n)?+n:+t(n))-+r,r._d.setTime(+r._d+u),t.updateOffset(r,!1),r):t(n).local()}function uf(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function ff(n){for(var i=n.match(fi),t=0,r=i.length;t<r;t++)i[t]=a[i[t]]?a[i[t]]:uf(i[t]);return function(u){var f="";for(t=0;t<r;t++)f+=i[t]instanceof Function?i[t].call(u,n):i[t];return f}}function kt(n,t){return n.isValid()?(t=cr(t,n.localeData()),lt[t]||(lt[t]=ff(t)),lt[t](n)):n.localeData().invalidDate()}function cr(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(ft.lastIndex=0;i>=0&&ft.test(n);)n=n.replace(ft,r),ft.lastIndex=0,i-=1;return n}function ef(n,t){var i=t._strict;switch(n){case"Q":return oi;case"DDDD":return hi;case"YYYY":case"GGGG":case"gggg":return i?cu:ru;case"Y":case"G":case"g":return au;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?lu:uu;case"S":if(i)return oi;case"SS":if(i)return si;case"SSS":if(i)return hi;case"DDD":return iu;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return eu;case"a":case"A":return t._locale._meridiemParse;case"x":return su;case"X":return hu;case"Z":case"ZZ":return st;case"T":return ou;case"SSSS":return fu;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?si:ei;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return ei;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp(af(lf(n.replace("\\","")),"i"))}}function dt(n){n=n||"";var r=n.match(st)||[],f=r[r.length-1]||[],t=(f+"").match(yu)||["-",0,0],u=+(t[1]*60)+i(t[2]);return t[0]==="+"?u:-u}function of(n,r,u){var o,e=u._a;switch(n){case"Q":r!=null&&(e[l]=(i(r)-1)*3);break;case"M":case"MM":r!=null&&(e[l]=i(r)-1);break;case"MMM":case"MMMM":o=u._locale.monthsParse(r,n,u._strict);o!=null?e[l]=o:u._pf.invalidMonth=r;break;case"D":case"DD":r!=null&&(e[s]=i(r));break;case"Do":r!=null&&(e[s]=i(parseInt(r.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":r!=null&&(u._dayOfYear=i(r));break;case"YY":e[c]=t.parseTwoDigitYear(r);break;case"YYYY":case"YYYYY":case"YYYYYY":e[c]=i(r);break;case"a":case"A":u._meridiem=r;break;case"h":case"hh":u._pf.bigHour=!0;case"H":case"HH":e[f]=i(r);break;case"m":case"mm":e[w]=i(r);break;case"s":case"ss":e[b]=i(r);break;case"S":case"SS":case"SSS":case"SSSS":e[k]=i(("0."+r)*1e3);break;case"x":u._d=new Date(i(r));break;case"X":u._d=new Date(parseFloat(r)*1e3);break;case"Z":case"ZZ":u._useUTC=!0;u._tzm=dt(r);break;case"dd":case"ddd":case"dddd":o=u._locale.weekdaysParse(r);o!=null?(u._w=u._w||{},u._w.d=o):u._pf.invalidWeekday=r;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":n=n.substr(0,1);case"gggg":case"GGGG":case"GGGGG":n=n.substr(0,2);r&&(u._w=u._w||{},u._w[n]=i(r));break;case"gg":case"GG":u._w=u._w||{};u._w[n]=t.parseTwoDigitYear(r)}}function sf(n){var i,o,f,u,r,e,s;i=n._w;i.GG!=null||i.W!=null||i.E!=null?(r=1,e=4,o=it(i.GG,n._a[c],tt(t(),1,4).year),f=it(i.W,1),u=it(i.E,1)):(r=n._locale._week.dow,e=n._locale._week.doy,o=it(i.gg,n._a[c],tt(t(),r,e).year),f=it(i.w,1),i.d!=null?(u=i.d,u<r&&++f):u=i.e!=null?i.e+r:r);s=ne(o,f,u,e,r);n._a[c]=s.year;n._dayOfYear=s.dayOfYear}function gt(n){var t,i,r=[],u,e;if(!n._d){for(u=cf(n),n._w&&n._a[s]==null&&n._a[l]==null&&sf(n),n._dayOfYear&&(e=it(n._a[c],u[c]),n._dayOfYear>ur(e)&&(n._pf._overflowDayOfYear=!0),i=ti(e,0,n._dayOfYear),n._a[l]=i.getUTCMonth(),n._a[s]=i.getUTCDate()),t=0;t<3&&n._a[t]==null;++t)n._a[t]=r[t]=u[t];for(;t<7;t++)n._a[t]=r[t]=n._a[t]==null?t===2?1:0:n._a[t];n._a[f]===24&&n._a[w]===0&&n._a[b]===0&&n._a[k]===0&&(n._nextDay=!0,n._a[f]=0);n._d=(n._useUTC?ti:bf).apply(null,r);n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm);n._nextDay&&(n._a[f]=24)}}function hf(n){var t;n._d||(t=ir(n._i),n._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],gt(n))}function cf(n){var t=new Date;return n._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ni(i){if(i._f===t.ISO_8601){lr(i);return}i._a=[];i._pf.empty=!0;for(var r=""+i._i,u,e,h,l=r.length,c=0,s=cr(i._f,i._locale).match(fi)||[],o=0;o<s.length;o++)e=s[o],u=(r.match(ef(e,i))||[])[0],u&&(h=r.substr(0,r.indexOf(u)),h.length>0&&i._pf.unusedInput.push(h),r=r.slice(r.indexOf(u)+u.length),c+=u.length),a[e]?(u?i._pf.empty=!1:i._pf.unusedTokens.push(e),of(e,u,i)):i._strict&&!u&&i._pf.unusedTokens.push(e);i._pf.charsLeftOver=l-c;r.length>0&&i._pf.unusedInput.push(r);i._pf.bigHour===!0&&i._a[f]<=12&&(i._pf.bigHour=n);i._a[f]=gu(i._locale,i._a[f],i._meridiem);gt(i);er(i)}function lf(n){return n.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u})}function af(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function vf(n){var t,f,u,r,i;if(n._f.length===0){n._pf.invalidFormat=!0;n._d=new Date(NaN);return}for(r=0;r<n._f.length;r++)(i=0,t=ki({},n),n._useUTC!=null&&(t._useUTC=n._useUTC),t._pf=vt(),t._f=n._f[r],ni(t),or(t))&&(i+=t._pf.charsLeftOver,i+=t._pf.unusedTokens.length*10,t._pf.score=i,(u==null||i<u)&&(u=i,f=t));nt(n,f||t)}function lr(n){var t,i,r=n._i,u=vu.exec(r);if(u){for(n._pf.iso=!0,t=0,i=ht.length;t<i;t++)if(ht[t][1].exec(r)){n._f=ht[t][0]+(u[6]||" ");break}for(t=0,i=ct.length;t<i;t++)if(ct[t][1].exec(r)){n._f+=ct[t][0];break}r.match(st)&&(n._f+="Z");ni(n)}else n._isValid=!1}function yf(n){lr(n);n._isValid===!1&&(delete n._isValid,t.createFromInputFallback(n))}function pf(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function wf(i){var r=i._i,u;r===n?i._d=new Date:pt(r)?i._d=new Date(+r):(u=gr.exec(r))!==null?i._d=new Date(+u[1]):typeof r=="string"?yf(i):ot(r)?(i._a=pf(r.slice(0),function(n){return parseInt(n,10)}),gt(i)):typeof r=="object"?hf(i):typeof r=="number"?i._d=new Date(r):t.createFromInputFallback(i)}function bf(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return n<1970&&o.setFullYear(n),o}function ti(n){var t=new Date(Date.UTC.apply(null,arguments));return n<1970&&t.setUTCFullYear(n),t}function kf(n,t){if(typeof n=="string")if(isNaN(n)){if(n=t.weekdaysParse(n),typeof n!="number")return null}else n=parseInt(n,10);return n}function df(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function gf(n,i,r){var u=t.duration(n).abs(),c=p(u.as("s")),e=p(u.as("m")),o=p(u.as("h")),s=p(u.as("d")),h=p(u.as("M")),l=p(u.as("y")),f=c<y.s&&["s",c]||e===1&&["m"]||e<y.m&&["mm",e]||o===1&&["h"]||o<y.h&&["hh",o]||s===1&&["d"]||s<y.d&&["dd",s]||h===1&&["M"]||h<y.M&&["MM",h]||l===1&&["y"]||["yy",l];return f[2]=i,f[3]=+n>0,f[4]=r,df.apply({},f)}function tt(n,i,r){var e=r-i,u=r-n.day(),f;return u>e&&(u-=7),u<e-7&&(u+=7),f=t(n).add(u,"d"),{week:Math.ceil(f.dayOfYear()/7),year:f.year()}}function ne(n,t,i,r,u){var f=ti(n,0,1).getUTCDay(),o,e;return f=f===0?7:f,i=i!=null?i:u,o=u-f+(f>r?7:0)-(f<u?7:0),e=7*(t-1)+(i-u)+o+1,{year:e>0?n:n-1,dayOfYear:e>0?e:ur(n-1)+e}}function ar(i){var r=i._i,f=i._f,u;return(i._locale=i._locale||t.localeData(i._l),r===null||f===n&&r==="")?t.invalid({nullInput:!0}):(typeof r=="string"&&(i._i=r=i._locale.preparse(r)),t.isMoment(r))?new et(r,!0):(f?ot(f)?vf(i):ni(i):wf(i),u=new et(i),u._nextDay&&(u.add(1,"d"),u._nextDay=n),u)}function vr(n,i){var u,r;if(i.length===1&&ot(i[0])&&(i=i[0]),!i.length)return t();for(u=i[0],r=1;r<i.length;++r)i[r][n](u)&&(u=i[r]);return u}function yr(n,t){var i;return typeof t=="string"&&(t=n.localeData().monthsParse(t),typeof t!="number")?n:(i=Math.min(n.date(),wt(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n)}function ii(n,t){return n._d["get"+(n._isUTC?"UTC":"")+t]()}function pr(n,t,i){return t==="Month"?yr(n,i):n._d["set"+(n._isUTC?"UTC":"")+t](i)}function v(n,i){return function(r){return r!=null?(pr(this,n,r),t.updateOffset(this,i),this):ii(this,n)}}function wr(n){return n*400/146097}function br(n){return n*146097/400}function te(n){t.duration.fn[n]=function(){return this._data[n]}}function kr(n){typeof ender=="undefined"&&(ri=rt.moment,rt.moment=n?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",t):t)}for(var t,rt=typeof global!="undefined"&&(typeof window=="undefined"||window===global.window)?global:this,ri,p=Math.round,dr=Object.prototype.hasOwnProperty,u,c=0,l=1,s=2,f=3,w=4,b=5,k=6,d={},ut=[],ui=typeof module!="undefined"&&module&&module.exports,gr=/^\/?Date\((\-?\d+)/i,nu=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,tu=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,fi=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,ft=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ei=/\d\d?/,iu=/\d{1,3}/,ru=/\d{1,4}/,uu=/[+\-]?\d{1,6}/,fu=/\d+/,eu=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,st=/Z|[\+\-]\d\d:?\d\d/gi,ou=/T/i,su=/[\+\-]?\d+/,hu=/[\+\-]?\d+(\.\d{1,3})?/,oi=/\d/,si=/\d\d/,hi=/\d{3}/,cu=/\d{4}/,lu=/[+-]?\d{6}/,au=/[+-]?\d+/,vu=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ct=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],yu=/([\+\-]|\d\d)/gi,ie="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ci={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},pu={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},wu={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lt={},y={s:45,m:45,h:22,d:26,M:11},li="DDD w W M D d".split(" "),ai="M D H h m s w W".split(" "),a={M:function(){return this.month()+1},MMM:function(n){return this.localeData().monthsShort(this,n)},MMMM:function(n){return this.localeData().months(this,n)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(n){return this.localeData().weekdaysMin(this,n)},ddd:function(n){return this.localeData().weekdaysShort(this,n)},dddd:function(n){return this.localeData().weekdays(this,n)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},YYYYYY:function(){var n=this.year(),t=n>=0?"+":"-";return t+r(Math.abs(n),6)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return r(this.weekYear(),4)},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return r(this.isoWeekYear(),4)},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return i(this.milliseconds()/100)},SS:function(){return r(i(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var n=this.utcOffset(),t="+";return n<0&&(n=-n,t="-"),t+r(i(n/60),2)+":"+r(i(n)%60,2)},ZZ:function(){var n=this.utcOffset(),t="+";return n<0&&(n=-n,t="-"),t+r(i(n/60),2)+r(i(n)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},vi={},yi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],at=!1;li.length;)u=li.pop(),a[u+"o"]=ku(a[u],u);while(ai.length)u=ai.pop(),a[u+u]=wi(a[u],2);for(a.DDDD=wi(a.DDD,3),nt(bi.prototype,{set:function(n){var t;for(var i in n)t=n[i],typeof t=="function"?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(n){return this._months[n.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(n){return this._monthsShort[n.month()]},monthsParse:function(n,i,r){var u,f,e;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),u=0;u<12;u++)if((f=t.utc([2e3,u]),r&&!this._longMonthsParse[u]&&(this._longMonthsParse[u]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[u]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),r||this._monthsParse[u]||(e="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[u]=new RegExp(e.replace(".",""),"i")),r&&i==="MMMM"&&this._longMonthsParse[u].test(n))||r&&i==="MMM"&&this._shortMonthsParse[u].test(n)||!r&&this._monthsParse[u].test(n))return u},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(n){return this._weekdays[n.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(n){return this._weekdaysShort[n.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(n){return this._weekdaysMin[n.day()]},weekdaysParse:function(n){var i,r,u;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;i<7;i++)if(this._weekdaysParse[i]||(r=t([2e3,1]).day(i),u="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(u.replace(".",""),"i")),this._weekdaysParse[i].test(n))return i},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(n){var t=this._longDateFormat[n];return!t&&this._longDateFormat[n.toUpperCase()]&&(t=this._longDateFormat[n.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n]=t),t},isPM:function(n){return(n+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(n,t,i){var r=this._calendar[n];return typeof r=="function"?r.apply(t,[i]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(n,t,i,r){var u=this._relativeTime[i];return typeof u=="function"?u(n,t,i,r):u.replace(/%d/i,n)},pastFuture:function(n,t){var i=this._relativeTime[n>0?"future":"past"];return typeof i=="function"?i(t):i.replace(/%s/i,t)},ordinal:function(n){return this._ordinal.replace("%d",n)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(n){return n},postformat:function(n){return n},week:function(n){return tt(n,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,i,r,u){var f;return typeof r=="boolean"&&(u=r,r=n),f={},f._isAMomentObject=!0,f._i=t,f._f=i,f._l=r,f._strict=u,f._isUTC=!1,f._pf=vt(),ar(f)},t.suppressDeprecationWarnings=!1,t.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))}),t.min=function(){var n=[].slice.call(arguments,0);return vr("isBefore",n)},t.max=function(){var n=[].slice.call(arguments,0);return vr("isAfter",n)},t.utc=function(t,i,r,u){var f;return typeof r=="boolean"&&(u=r,r=n),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=r,f._i=t,f._f=i,f._strict=u,f._pf=vt(),ar(f).utc()},t.unix=function(n){return t(n*1e3)},t.duration=function(n,r){var u=n,e=null,o,c,h,l;return t.isDuration(n)?u={ms:n._milliseconds,d:n._days,M:n._months}:typeof n=="number"?(u={},r?u[r]=n:u.milliseconds=n):(e=nu.exec(n))?(o=e[1]==="-"?-1:1,u={y:0,d:i(e[s])*o,h:i(e[f])*o,m:i(e[w])*o,s:i(e[b])*o,ms:i(e[k])*o}):(e=tu.exec(n))?(o=e[1]==="-"?-1:1,h=function(n){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*o},u={y:h(e[2]),M:h(e[3]),d:h(e[4]),h:h(e[5]),m:h(e[6]),s:h(e[7]),w:h(e[8])}):u==null?u={}:typeof u=="object"&&("from"in u||"to"in u)&&(l=nf(t(u.from),t(u.to)),u={},u.ms=l.milliseconds,u.M=l.months),c=new yt(u),t.isDuration(n)&&g(n,"_locale")&&(c._locale=n._locale),c},t.version="2.9.0",t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.ISO_8601=function(){},t.momentProperties=ut,t.updateOffset=function(){},t.relativeTimeThreshold=function(t,i){return y[t]===n?!1:i===n?y[t]:(y[t]=i,!0)},t.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(n,i){return t.locale(n,i)}),t.locale=function(n,i){var r;return n&&(r=typeof i!="undefined"?t.defineLocale(n,i):t.localeData(n),r&&(t.duration._locale=t._locale=r)),t._locale._abbr},t.defineLocale=function(n,i){return i!==null?(i.abbr=n,d[n]||(d[n]=new bi),d[n].set(i),t.locale(n),d[n]):(delete d[n],null)},t.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(n){return t.localeData(n)}),t.localeData=function(n){var i;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return t._locale;if(!ot(n)){if(i=hr(n),i)return i;n=[n]}return rf(n)},t.isMoment=function(n){return n instanceof et||n!=null&&g(n,"_isAMomentObject")},t.isDuration=function(n){return n instanceof yt},u=yi.length-1;u>=0;--u)tf(yi[u]);t.normalizeUnits=function(n){return e(n)};t.invalid=function(n){var i=t.utc(NaN);return n!=null?nt(i._pf,n):i._pf.userInvalidated=!0,i};t.parseZone=function(){return t.apply(null,arguments).parseZone()};t.parseTwoDigitYear=function(n){return i(n)+(i(n)>68?1900:2e3)};t.isDate=pt;nt(t.fn=et.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d-(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var n=t(this).utc();return 0<n.year()&&n.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():kt(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):kt(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var n=this;return[n.year(),n.month(),n.date(),n.hours(),n.minutes(),n.seconds(),n.milliseconds()]},isValid:function(){return or(this)},isDSTShifted:function(){return this._a?this.isValid()&&tr(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return nt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(n){return this.utcOffset(0,n)},local:function(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(n){var i=kt(this,n||t.defaultFormat);return this.localeData().postformat(i)},add:gi(1,"add"),subtract:gi(-1,"subtract"),diff:function(n,t,i){var f=bt(n,this),o=(f.utcOffset()-this.utcOffset())*6e4,u,r;return t=e(t),t==="year"||t==="month"||t==="quarter"?(r=du(this,f),t==="quarter"?r=r/3:t==="year"&&(r=r/12)):(u=this-f,r=t==="second"?u/1e3:t==="minute"?u/6e4:t==="hour"?u/36e5:t==="day"?(u-o)/864e5:t==="week"?(u-o)/6048e5:u),i?r:h(r)},from:function(n,i){return t.duration({to:this,from:n}).locale(this.locale()).humanize(!i)},fromNow:function(n){return this.from(t(),n)},calendar:function(n){var r=n||t(),u=bt(r,this).startOf("day"),i=this.diff(u,"days",!0),f=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(f,this,t(r)))},isLeapYear:function(){return fr(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(n){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return n!=null?(n=kf(n,this.localeData()),this.add(n-t,"d")):t},month:v("Month",!0),startOf:function(n){n=e(n);switch(n){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return n==="week"?this.weekday(0):n==="isoWeek"&&this.isoWeekday(1),n==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(t){return(t=e(t),t===n||t==="millisecond")?this:this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")},isAfter:function(n,i){var r;return i=e(typeof i!="undefined"?i:"millisecond"),i==="millisecond"?(n=t.isMoment(n)?n:t(n),+this>+n):(r=t.isMoment(n)?+n:+t(n),r<+this.clone().startOf(i))},isBefore:function(n,i){var r;return i=e(typeof i!="undefined"?i:"millisecond"),i==="millisecond"?(n=t.isMoment(n)?n:t(n),+this<+n):(r=t.isMoment(n)?+n:+t(n),+this.clone().endOf(i)<r)},isBetween:function(n,t,i){return this.isAfter(n,i)&&this.isBefore(t,i)},isSame:function(n,i){var r;return i=e(i||"millisecond"),i==="millisecond"?(n=t.isMoment(n)?n:t(n),+this==+n):(r=+t(n),+this.clone().startOf(i)<=r&&r<=+this.clone().endOf(i))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(n){return n=t.apply(null,arguments),n<this?this:n}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(n){return n=t.apply(null,arguments),n>this?this:n}),zone:o("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(n,t){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,t),this):-this.utcOffset()}),utcOffset:function(n,i){var r=this._offset||0,u;return n!=null?(typeof n=="string"&&(n=dt(n)),Math.abs(n)<16&&(n=n*60),!this._isUTC&&i&&(u=this._dateUtcOffset()),this._offset=n,this._isUTC=!0,u!=null&&this.add(u,"m"),r!==n&&(!i||this._changeInProgress?nr(this,t.duration(n-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&this._offset===0},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(dt(this._i)),this},hasAlignedHourOffset:function(n){return n=n?t(n).utcOffset():0,(this.utcOffset()-n)%60==0},daysInMonth:function(){return wt(this.year(),this.month())},dayOfYear:function(n){var i=p((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return n==null?i:this.add(n-i,"d")},quarter:function(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)},weekYear:function(n){var t=tt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return n==null?t:this.add(n-t,"y")},isoWeekYear:function(n){var t=tt(this,1,4).year;return n==null?t:this.add(n-t,"y")},week:function(n){var t=this.localeData().week(this);return n==null?t:this.add((n-t)*7,"d")},isoWeek:function(n){var t=tt(this,1,4).week;return n==null?t:this.add((n-t)*7,"d")},weekday:function(n){var t=(this.day()+7-this.localeData()._week.dow)%7;return n==null?t:this.add(n-t,"d")},isoWeekday:function(n){return n==null?this.day()||7:this.day(this.day()%7?n:n-7)},isoWeeksInYear:function(){return rr(this.year(),1,4)},weeksInYear:function(){var n=this.localeData()._week;return rr(this.year(),n.dow,n.doy)},get:function(n){return n=e(n),this[n]()},set:function(n,t){var i;if(typeof n=="object")for(i in n)this.set(i,n[i]);else n=e(n),typeof this[n]=="function"&&this[n](t);return this},locale:function(i){var r;return i===n?this._locale._abbr:(r=t.localeData(i),r!=null&&(this._locale=r),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===n?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return-Math.round(this._d.getTimezoneOffset()/15)*15}});t.fn.millisecond=t.fn.milliseconds=v("Milliseconds",!1);t.fn.second=t.fn.seconds=v("Seconds",!1);t.fn.minute=t.fn.minutes=v("Minutes",!1);t.fn.hour=t.fn.hours=v("Hours",!0);t.fn.date=v("Date",!0);t.fn.dates=o("dates accessor is deprecated. Use date instead.",v("Date",!0));t.fn.year=v("FullYear",!0);t.fn.years=o("years accessor is deprecated. Use year instead.",v("FullYear",!0));t.fn.days=t.fn.day;t.fn.months=t.fn.month;t.fn.weeks=t.fn.week;t.fn.isoWeeks=t.fn.isoWeek;t.fn.quarters=t.fn.quarter;t.fn.toJSON=t.fn.toISOString;t.fn.isUTC=t.fn.isUtc;nt(t.duration.fn=yt.prototype,{_bubble:function(){var o=this._milliseconds,t=this._days,i=this._months,n=this._data,u,f,e,r=0;n.milliseconds=o%1e3;u=h(o/1e3);n.seconds=u%60;f=h(u/60);n.minutes=f%60;e=h(f/60);n.hours=e%24;t+=h(e/24);r=h(wr(t));t-=h(br(r));i+=h(t/30);t%=30;r+=h(i/12);i%=12;n.days=t;n.months=i;n.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+i(this._months/12)*31536e6},humanize:function(n){var t=gf(this,!n,this.localeData());return n&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(n,i){var r=t.duration(n,i);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(n,i){var r=t.duration(n,i);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(n){return n=e(n),this[n.toLowerCase()+"s"]()},as:function(n){var t,i;if(n=e(n),n==="month"||n==="year")return t=this._days+this._milliseconds/864e5,i=this._months+wr(t)*12,n==="month"?i:i/12;t=this._days+Math.round(br(this._months/12));switch(n){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*1440+this._milliseconds/6e4;case"second":return t*86400+this._milliseconds/1e3;case"millisecond":return Math.floor(t*864e5)+this._milliseconds;default:throw new Error("Unknown unit "+n);}},lang:t.fn.lang,locale:t.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var r=Math.abs(this.years()),u=Math.abs(this.months()),f=Math.abs(this.days()),n=Math.abs(this.hours()),t=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(r?r+"Y":"")+(u?u+"M":"")+(f?f+"D":"")+(n||t||i?"T":"")+(n?n+"H":"")+(t?t+"M":"")+(i?i+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}});t.duration.fn.toString=t.duration.fn.toISOString;for(u in ci)g(ci,u)&&te(u.toLowerCase());t.duration.fn.asMilliseconds=function(){return this.as("ms")};t.duration.fn.asSeconds=function(){return this.as("s")};t.duration.fn.asMinutes=function(){return this.as("m")};t.duration.fn.asHours=function(){return this.as("h")};t.duration.fn.asDays=function(){return this.as("d")};t.duration.fn.asWeeks=function(){return this.as("weeks")};t.duration.fn.asMonths=function(){return this.as("M")};t.duration.fn.asYears=function(){return this.as("y")};t.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10,r=i(n%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return n+r}});ui?module.exports=t:typeof define=="function"&&define.amd?(define(function(n,i,r){return r.config&&r.config()&&r.config().noGlobal===!0&&(rt.moment=ri),t}),kr(!0)):kr()}).call(this),function(n){n.color={};n.color.make=function(t,i,r,u){var f={};return f.r=t||0,f.g=i||0,f.b=r||0,f.a=u!=null?u:1,f.add=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]+=t;return f.normalize()},f.scale=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]*=t;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function n(n,t,i){return t<n?n:t>i?i:t}return f.r=n(0,parseInt(f.r),255),f.g=n(0,parseInt(f.g),255),f.b=n(0,parseInt(f.b),255),f.a=n(0,f.a,1),f},f.clone=function(){return n.color.make(f.r,f.b,f.g,f.a)},f.normalize()};n.color.extract=function(t,i){var r;do{if(r=t.css(i).toLowerCase(),r!=""&&r!="transparent")break;t=t.parent()}while(t.length&&!n.nodeName(t.get(0),"body"));return r=="rgba(0, 0, 0, 0)"&&(r="transparent"),n.color.parse(r)};n.color.parse=function(i){var r,u=n.color.make,f;return(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4])):(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55):(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4])):(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))?u(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)):(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))?u(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)):(f=n.trim(i).toLowerCase(),f=="transparent"?u(255,255,255,0):(r=t[f]||[0,0,0],u(r[0],r[1],r[2])))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(n){function t(t,i){var r=i.children("."+t)[0];if(r==null&&(r=document.createElement("canvas"),r.className=t,n(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var u=this.context=r.getContext("2d"),f=window.devicePixelRatio||1,e=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;this.pixelRatio=f/e;this.resize(i.width(),i.height());this.textContainer=null;this.text={};this._textCache={}}function r(i,r,f,e){function nt(n,t){t=[l].concat(t);for(var i=0;i<n.length;++i)n[i].apply(this,t)}function ui(){for(var i,u={Canvas:t},r=0;r<e.length;++r)i=e[r],i.init(l,u),i.options&&n.extend(!0,o,i.options)}function fi(t){var f;n.extend(!0,o,t);t&&t.colors&&(o.colors=t.colors);o.xaxis.color==null&&(o.xaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString());o.yaxis.color==null&&(o.yaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString());o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color);o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color);o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color);o.grid.tickColor==null&&(o.grid.tickColor=n.color.parse(o.grid.color).scale("a",.22).toString());for(var r,s=i.css("font-size"),c=s?+s.replace("px",""):13,h={style:i.css("font-style"),size:Math.round(.8*c),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")},e=o.xaxes.length||1,u=0;u<e;++u)r=o.xaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.xaxis,r),o.xaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(e=o.yaxes.length||1,u=0;u<e;++u)r=o.yaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.yaxis,r),o.yaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=n.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=n.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&n.extend(!0,o.series.lines,o.lines),o.points&&n.extend(!0,o.series.points,o.points),o.bars&&n.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),u=0;u<o.xaxes.length;++u)et(y,u+1).options=o.xaxes[u];for(u=0;u<o.yaxes.length;++u)et(w,u+1).options=o.yaxes[u];for(f in p)o.hooks[f]&&o.hooks[f].length&&(p[f]=p[f].concat(o.hooks[f]));nt(p.processOptions,[o])}function ht(n){c=ei(n);si();hi()}function ei(t){for(var r,u=[],i=0;i<t.length;++i)r=n.extend(!0,{},o.series),t[i].data!=null?(r.data=t[i].data,delete t[i].data,n.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],u.push(r);return u}function ft(n,t){var i=n[t+"axis"];return typeof i=="object"&&(i=i.n),typeof i!="number"&&(i=1),i}function it(){return n.grep(y.concat(w),function(n){return n})}function ct(n){for(var i={},t,r=0;r<y.length;++r)t=y[r],t&&t.used&&(i["x"+t.n]=t.c2p(n.left));for(r=0;r<w.length;++r)t=w[r],t&&t.used&&(i["y"+t.n]=t.c2p(n.top));return i.x1!==undefined&&(i.x=i.x1),i.y1!==undefined&&(i.y=i.y1),i}function oi(n){for(var u={},t,i,r=0;r<y.length;++r)if(t=y[r],t&&t.used&&(i="x"+t.n,n[i]==null&&t.n==1&&(i="x"),n[i]!=null)){u.left=t.p2c(n[i]);break}for(r=0;r<w.length;++r)if(t=w[r],t&&t.used&&(i="y"+t.n,n[i]==null&&t.n==1&&(i="y"),n[i]!=null)){u.top=t.p2c(n[i]);break}return u}function et(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==y?"x":"y",options:n.extend(!0,{},t==y?o.xaxis:o.yaxis)}),t[i-1]}function si(){for(var f=c.length,e=-1,u,h,t,l,a,i=0;i<c.length;++i)u=c[i].color,u!=null&&(f--,typeof u=="number"&&u>e&&(e=u));f<=e&&(f=e+1);var v,s=[],p=o.colors,b=p.length,r=0;for(i=0;i<f;i++)v=n.color.parse(p[i%b]||"#666"),i%b==0&&i&&(r=r>=0?r<.5?-r-.2:0:-r),s[i]=v.scale("rgb",1+r);for(h=0,i=0;i<c.length;++i){if(t=c[i],t.color==null?(t.color=s[h].toString(),++h):typeof t.color=="number"&&(t.color=s[t.color].toString()),t.lines.show==null){a=!0;for(l in t)if(t[l]&&t[l].show){a=!1;break}a&&(t.lines.show=!0)}t.lines.zero==null&&(t.lines.zero=!!t.lines.fill);t.xaxis=et(y,ft(t,"x"));t.yaxis=et(w,ft(t,"y"))}}function hi(){function b(n,t,i){t<n.datamin&&t!=-v&&(n.datamin=t);i>n.datamax&&i!=v&&(n.datamax=i)}var y=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,v=Number.MAX_VALUE,f,l,e,r,t,u,h,i,s,ut,ft,o,et,ot,k,a;for(n.each(it(),function(n,t){t.datamin=y;t.datamax=w;t.used=!1}),f=0;f<c.length;++f)t=c[f],t.datapoints={points:[]},nt(p.processRawData,[t,t.data,t.datapoints]);for(f=0;f<c.length;++f)if(t=c[f],ft=t.data,o=t.datapoints.format,o||(o=[],o.push({x:!0,number:!0,required:!0}),o.push({y:!0,number:!0,required:!0}),(t.bars.show||t.lines.show&&t.lines.fill)&&(et=!!(t.bars.show&&t.bars.zero||t.lines.show&&t.lines.zero),o.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:et}),t.bars.horizontal&&(delete o[o.length-1].y,o[o.length-1].x=!0)),t.datapoints.format=o),t.datapoints.pointsize==null)for(t.datapoints.pointsize=o.length,h=t.datapoints.pointsize,u=t.datapoints.points,ot=t.lines.show&&t.lines.steps,t.xaxis.used=t.yaxis.used=!0,l=e=0;l<ft.length;++l,e+=h){if(ut=ft[l],k=ut==null,!k)for(r=0;r<h;++r)i=ut[r],s=o[r],s&&(s.number&&i!=null&&(i=+i,isNaN(i)?i=null:i==Infinity?i=v:i==-Infinity&&(i=-v)),i==null&&(s.required&&(k=!0),s.defaultValue!=null&&(i=s.defaultValue))),u[e+r]=i;if(k)for(r=0;r<h;++r)i=u[e+r],i!=null&&(s=o[r],s.autoscale!==!1&&(s.x&&b(t.xaxis,i,i),s.y&&b(t.yaxis,i,i))),u[e+r]=null;else if(ot&&e>0&&u[e-h]!=null&&u[e-h]!=u[e]&&u[e-h+1]!=u[e+1]){for(r=0;r<h;++r)u[e+h+r]=u[e+r];u[e+1]=u[e-h+1];e+=h}}for(f=0;f<c.length;++f)t=c[f],nt(p.processDatapoints,[t,t.datapoints]);for(f=0;f<c.length;++f){t=c[f];u=t.datapoints.points;h=t.datapoints.pointsize;o=t.datapoints.format;var d=y,g=y,tt=w,rt=w;for(l=0;l<u.length;l+=h)if(u[l]!=null)for(r=0;r<h;++r)(i=u[l+r],s=o[r],s&&s.autoscale!==!1&&i!=v&&i!=-v)&&(s.x&&(i<d&&(d=i),i>tt&&(tt=i)),s.y&&(i<g&&(g=i),i>rt&&(rt=i)));if(t.bars.show){switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}t.bars.horizontal?(g+=a,rt+=a+t.bars.barWidth):(d+=a,tt+=a+t.bars.barWidth)}b(t.xaxis,d,tt);b(t.yaxis,g,rt)}n.each(it(),function(n,t){t.datamin==y&&(t.datamin=null);t.datamax==w&&(t.datamax=null)})}function ci(){i.css("padding",0).children().filter(function(){return!n(this).hasClass("flot-overlay")&&!n(this).hasClass("flot-base")}).remove();i.css("position")=="static"&&i.css("position","relative");a=new t("flot-base",i);tt=new t("flot-overlay",i);s=a.context;v=tt.context;k=n(tt.element).unbind();var r=i.data("plot");r&&(r.shutdown(),tt.clear());i.data("plot",l)}function li(){o.grid.hoverable&&(k.mousemove(bt),k.bind("mouseleave",kt));o.grid.clickable&&k.click(dt);nt(p.bindEvents,[k])}function lt(){rt&&clearTimeout(rt);k.unbind("mousemove",bt);k.unbind("mouseleave",kt);k.unbind("click",dt);nt(p.shutdown,[k])}function ai(n){function u(n){return n}var i,r,t=n.options.transform||u,f=n.options.inverseTransform;n.direction=="x"?(i=n.scale=d/Math.abs(t(n.max)-t(n.min)),r=Math.min(t(n.max),t(n.min))):(i=n.scale=b/Math.abs(t(n.max)-t(n.min)),i=-i,r=Math.max(t(n.max),t(n.min)));n.p2c=t==u?function(n){return(n-r)*i}:function(n){return(t(n)-r)*i};n.c2p=f?function(n){return f(r+n/i)}:function(n){return r+n/i}}function vi(n){for(var e,o,t=n.options,r=n.ticks||[],i=t.labelWidth||0,u=t.labelHeight||0,s=i||(n.direction=="x"?Math.floor(a.width/(r.length||1)):null),h=n.direction+"Axis "+n.direction+n.n+"Axis",c="flot-"+n.direction+"-axis flot-"+n.direction+n.n+"-axis "+h,l=t.font||"flot-tick-label tickLabel",f=0;f<r.length;++f)(e=r[f],e.label)&&(o=a.getTextInfo(c,e.label,l,null,s),i=Math.max(i,o.width),u=Math.max(u,o.height));n.labelWidth=t.labelWidth||i;n.labelHeight=t.labelHeight||u}function yi(t){var r=t.labelWidth,u=t.labelHeight,e=t.options.position,l=t.direction==="x",f=t.options.tickLength,i=o.grid.axisMargin,s=o.grid.labelMargin,v=!0,p=!0,b=!0,c=!1;n.each(l?y:w,function(n,i){i&&(i.show||i.reserveSpace)&&(i===t?c=!0:i.options.position===e&&(c?p=!1:v=!1),c||(b=!1))});p&&(i=0);f==null&&(f=b?"full":5);isNaN(+f)||(s+=+f);l?(u+=s,e=="bottom"?(h.bottom+=u+i,t.box={top:a.height-h.bottom,height:u}):(t.box={top:h.top+i,height:u},h.top+=u+i)):(r+=s,e=="left"?(t.box={left:h.left+i,width:r},h.left+=r+i):(h.right+=r+i,t.box={left:a.width-h.right,width:r}));t.position=e;t.tickLength=f;t.box.padding=s;t.innermost=v}function pi(n){n.direction=="x"?(n.box.left=h.left-n.labelWidth/2,n.box.width=a.width-h.left-h.right+n.labelWidth):(n.box.top=h.top-n.labelHeight/2,n.box.height=a.height-h.bottom-h.top+n.labelHeight)}function wi(){var i=o.grid.minBorderMargin,r,t;if(i==null)for(i=0,r=0;r<c.length;++r)i=Math.max(i,2*(c[r].points.radius+c[r].points.lineWidth/2));t={left:i,right:i,top:i,bottom:i};n.each(it(),function(n,i){i.reserveSpace&&i.ticks&&i.ticks.length&&(i.direction==="x"?(t.left=Math.max(t.left,i.labelWidth/2),t.right=Math.max(t.right,i.labelWidth/2)):(t.bottom=Math.max(t.bottom,i.labelHeight/2),t.top=Math.max(t.top,i.labelHeight/2)))});h.left=Math.ceil(Math.max(t.left,h.left));h.right=Math.ceil(Math.max(t.right,h.right));h.top=Math.ceil(Math.max(t.top,h.top));h.bottom=Math.ceil(Math.max(t.bottom,h.bottom))}function at(){var r,e=it(),u=o.grid.show,f,t,i;for(t in h)f=o.grid.margin||0,h[t]=typeof f=="number"?f:f[t]||0;nt(p.processOffset,[h]);for(t in h)h[t]+=typeof o.grid.borderWidth=="object"?u?o.grid.borderWidth[t]:0:u?o.grid.borderWidth:0;if(n.each(e,function(n,t){var i=t.options;t.show=i.show==null?t.used:i.show;t.reserveSpace=i.reserveSpace==null?t.show:i.reserveSpace;bi(t)}),u){for(i=n.grep(e,function(n){return n.show||n.reserveSpace}),n.each(i,function(n,t){ki(t);di(t);gi(t,t.ticks);vi(t)}),r=i.length-1;r>=0;--r)yi(i[r]);wi();n.each(i,function(n,t){pi(t)})}d=a.width-h.left-h.right;b=a.height-h.bottom-h.top;n.each(e,function(n,t){ai(t)});u&&tr();er()}function bi(n){var t=n.options,r=+(t.min!=null?t.min:n.datamin),i=+(t.max!=null?t.max:n.datamax),f=i-r,e,u;f==0?(e=i==0?1:.01,t.min==null&&(r-=e),(t.max==null||t.min!=null)&&(i+=e)):(u=t.autoscaleMargin,u!=null&&(t.min==null&&(r-=f*u,r<0&&n.datamin!=null&&n.datamin>=0&&(r=0)),t.max==null&&(i+=f*u,i>0&&n.datamax!=null&&n.datamax<=0&&(i=0))));n.min=r;n.max=i}function ki(t){var i=t.options,b,v,h,f,r,s,p,c;b=typeof i.ticks=="number"&&i.ticks>0?i.ticks:.3*Math.sqrt(t.direction=="x"?a.width:a.height);var l=(t.max-t.min)/b,o=-Math.floor(Math.log(l)/Math.LN10),e=i.tickDecimals;if(e!=null&&o>e&&(o=e),v=Math.pow(10,-o),h=l/v,h<1.5?f=1:h<3?(f=2,h>2.25&&(e==null||o+1<=e)&&(f=2.5,++o)):f=h<7.5?5:10,f*=v,i.minTickSize!=null&&f<i.minTickSize&&(f=i.minTickSize),t.delta=l,t.tickDecimals=Math.max(0,e!=null?e:o),t.tickSize=i.tickSize||f,i.mode=="time"&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");t.tickGenerator||(t.tickGenerator=function(n){var i=[],e=u(n.min,n.tickSize),r=0,t=Number.NaN,f;do f=t,t=e+r*n.tickSize,i.push(t),++r;while(t<n.max&&t!=f);return i},t.tickFormatter=function(n,t){var u=t.tickDecimals?Math.pow(10,t.tickDecimals):1,i=""+Math.round(n*u)/u,f,r;return t.tickDecimals!=null&&(f=i.indexOf("."),r=f==-1?0:i.length-f-1,r<t.tickDecimals)?(r?i:i+".")+(""+u).substr(1,t.tickDecimals-r):i});n.isFunction(i.tickFormatter)&&(t.tickFormatter=function(n,t){return""+i.tickFormatter(n,t)});i.alignTicksWithAxis!=null&&(r=(t.direction=="x"?y:w)[i.alignTicksWithAxis-1],r&&r.used&&r!=t&&(s=t.tickGenerator(t),s.length>0&&(i.min==null&&(t.min=Math.min(t.min,s[0])),i.max==null&&s.length>1&&(t.max=Math.max(t.max,s[s.length-1]))),t.tickGenerator=function(n){for(var u=[],t,i=0;i<r.ticks.length;++i)t=(r.ticks[i].v-r.min)/(r.max-r.min),t=n.min+t*(n.max-n.min),u.push(t);return u},t.mode||i.tickDecimals!=null||(p=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),c=t.tickGenerator(t),c.length>1&&/\..*0$/.test((c[1]-c[0]).toFixed(p))||(t.tickDecimals=p))))}function di(t){var i=t.options.ticks,e=[],o,u,f,r;for(i==null||typeof i=="number"&&i>0?e=t.tickGenerator(t):i&&(e=n.isFunction(i)?i(t):i),t.ticks=[],o=0;o<e.length;++o)f=null,r=e[o],typeof r=="object"?(u=+r[0],r.length>1&&(f=r[1])):u=+r,f==null&&(f=t.tickFormatter(u,t)),isNaN(u)||t.ticks.push({v:u,label:f})}function gi(n,t){n.options.autoscaleMargin&&t.length>0&&(n.options.min==null&&(n.min=Math.min(n.min,t[0].v)),n.options.max==null&&t.length>1&&(n.max=Math.max(n.max,t[t.length-1].v)))}function vt(){var n,t;for(a.clear(),nt(p.drawBackground,[s]),n=o.grid,n.show&&n.backgroundColor&&nr(),n.show&&!n.aboveData&&pt(),t=0;t<c.length;++t)nt(p.drawSeries,[s,c[t]]),ir(c[t]);nt(p.draw,[s]);n.show&&n.aboveData&&pt();a.render();ut()}function yt(n,t){for(var s,f,i,r,u,o=it(),e=0;e<o.length;++e)if(f=o[e],f.direction==t&&(u=t+f.n+"axis",n[u]||f.n!=1||(u=t+"axis"),n[u])){i=n[u].from;r=n[u].to;break}return n[u]||(f=t=="x"?y[0]:w[0],i=n[t+"1"],r=n[t+"2"]),i!=null&&r!=null&&i>r&&(s=i,i=r,r=s),{from:i,to:r,axis:f}}function nr(){s.save();s.translate(h.left,h.top);s.fillStyle=ri(o.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)");s.fillRect(0,0,d,b);s.restore()}function pt(){var v,f,t,e,k,rt,et,ot,tt,ut,w;if(s.save(),s.translate(h.left,h.top),k=o.grid.markings,k)for(n.isFunction(k)&&(f=l.getAxes(),f.xmin=f.xaxis.min,f.xmax=f.xaxis.max,f.ymin=f.yaxis.min,f.ymax=f.yaxis.max,k=k(f)),v=0;v<k.length;++v){var nt=k[v],i=yt(nt,"x"),r=yt(nt,"y");(i.from==null&&(i.from=i.axis.min),i.to==null&&(i.to=i.axis.max),r.from==null&&(r.from=r.axis.min),r.to==null&&(r.to=r.axis.max),i.to<i.axis.min||i.from>i.axis.max||r.to<r.axis.min||r.from>r.axis.max)||(i.from=Math.max(i.from,i.axis.min),i.to=Math.min(i.to,i.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),rt=i.from===i.to,et=r.from===r.to,rt&&et)||(i.from=Math.floor(i.axis.p2c(i.from)),i.to=Math.floor(i.axis.p2c(i.to)),r.from=Math.floor(r.axis.p2c(r.from)),r.to=Math.floor(r.axis.p2c(r.to)),rt||et?(ot=nt.lineWidth||o.grid.markingsLineWidth,tt=ot%2?.5:0,s.beginPath(),s.strokeStyle=nt.color||o.grid.markingsColor,s.lineWidth=ot,rt?(s.moveTo(i.to+tt,r.from),s.lineTo(i.to+tt,r.to)):(s.moveTo(i.from,r.to+tt),s.lineTo(i.to,r.to+tt)),s.stroke()):(s.fillStyle=nt.color||o.grid.markingsColor,s.fillRect(i.from,r.to,i.to-i.from,r.from-r.to)))}for(f=it(),t=o.grid.borderWidth,ut=0;ut<f.length;++ut){var u=f[ut],ft=u.box,g=u.tickLength,c,a,y,p;if(u.show&&u.ticks.length!=0){for(s.lineWidth=1,u.direction=="x"?(c=0,a=g=="full"?u.position=="top"?0:b:ft.top-h.top+(u.position=="top"?ft.height:0)):(a=0,c=g=="full"?u.position=="left"?0:d:ft.left-h.left+(u.position=="left"?ft.width:0)),u.innermost||(s.strokeStyle=u.options.color,s.beginPath(),y=p=0,u.direction=="x"?y=d+1:p=b+1,s.lineWidth==1&&(u.direction=="x"?a=Math.floor(a)+.5:c=Math.floor(c)+.5),s.moveTo(c,a),s.lineTo(c+y,a+p),s.stroke()),s.strokeStyle=u.options.tickColor,s.beginPath(),v=0;v<u.ticks.length;++v)(w=u.ticks[v].v,y=p=0,isNaN(w)||w<u.min||w>u.max||g=="full"&&(typeof t=="object"&&t[u.position]>0||t>0)&&(w==u.min||w==u.max))||(u.direction=="x"?(c=u.p2c(w),p=g=="full"?-b:g,u.position=="top"&&(p=-p)):(a=u.p2c(w),y=g=="full"?-d:g,u.position=="left"&&(y=-y)),s.lineWidth==1&&(u.direction=="x"?c=Math.floor(c)+.5:a=Math.floor(a)+.5),s.moveTo(c,a),s.lineTo(c+y,a+p));s.stroke()}}t&&(e=o.grid.borderColor,typeof t=="object"||typeof e=="object"?(typeof t!="object"&&(t={top:t,right:t,bottom:t,left:t}),typeof e!="object"&&(e={top:e,right:e,bottom:e,left:e}),t.top>0&&(s.strokeStyle=e.top,s.lineWidth=t.top,s.beginPath(),s.moveTo(0-t.left,0-t.top/2),s.lineTo(d,0-t.top/2),s.stroke()),t.right>0&&(s.strokeStyle=e.right,s.lineWidth=t.right,s.beginPath(),s.moveTo(d+t.right/2,0-t.top),s.lineTo(d+t.right/2,b),s.stroke()),t.bottom>0&&(s.strokeStyle=e.bottom,s.lineWidth=t.bottom,s.beginPath(),s.moveTo(d+t.right,b+t.bottom/2),s.lineTo(0,b+t.bottom/2),s.stroke()),t.left>0&&(s.strokeStyle=e.left,s.lineWidth=t.left,s.beginPath(),s.moveTo(0-t.left/2,b+t.bottom),s.lineTo(0-t.left/2,0),s.stroke())):(s.lineWidth=t,s.strokeStyle=o.grid.borderColor,s.strokeRect(-t/2,-t/2,d+t,b+t)));s.restore()}function tr(){n.each(it(),function(n,t){var i=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,v=t.options.font||"flot-tick-label tickLabel",r,u,f,o,s,e;if(a.removeText(c),t.show&&t.ticks.length!=0)for(e=0;e<t.ticks.length;++e)(r=t.ticks[e],!r.label||r.v<t.min||r.v>t.max)||(t.direction=="x"?(o="center",u=h.left+t.p2c(r.v),t.position=="bottom"?f=i.top+i.padding:(f=i.top+i.height-i.padding,s="bottom")):(s="middle",f=h.top+t.p2c(r.v),t.position=="left"?(u=i.left+i.width-i.padding,o="right"):u=i.left+i.padding),a.addText(c,u,f,r.label,v,null,null,o,s))})}function ir(n){n.lines.show&&rr(n);n.bars.show&&fr(n);n.points.show&&ur(n)}function rr(n){function u(n,t,i,r,u){var l=n.points,a=n.pointsize,v=null,y=null,c;for(s.beginPath(),c=a;c<l.length;c+=a){var f=l[c-a],e=l[c-a+1],o=l[c],h=l[c+1];if(f!=null&&o!=null){if(e<=h&&e<u.min){if(h<u.min)continue;f=(u.min-e)/(h-e)*(o-f)+f;e=u.min}else if(h<=e&&h<u.min){if(e<u.min)continue;o=(u.min-e)/(h-e)*(o-f)+f;h=u.min}if(e>=h&&e>u.max){if(h>u.max)continue;f=(u.max-e)/(h-e)*(o-f)+f;e=u.max}else if(h>=e&&h>u.max){if(e>u.max)continue;o=(u.max-e)/(h-e)*(o-f)+f;h=u.max}if(f<=o&&f<r.min){if(o<r.min)continue;e=(r.min-f)/(o-f)*(h-e)+e;f=r.min}else if(o<=f&&o<r.min){if(f<r.min)continue;h=(r.min-f)/(o-f)*(h-e)+e;o=r.min}if(f>=o&&f>r.max){if(o>r.max)continue;e=(r.max-f)/(o-f)*(h-e)+e;f=r.max}else if(o>=f&&o>r.max){if(f>r.max)continue;h=(r.max-f)/(o-f)*(h-e)+e;o=r.max}(f!=v||e!=y)&&s.moveTo(r.p2c(f)+t,u.p2c(e)+i);v=o;y=h;s.lineTo(r.p2c(o)+t,u.p2c(h)+i)}}s.stroke()}function e(n,t,i){for(var c=n.points,o=n.pointsize,b=Math.min(Math.max(0,i.min),i.max),h=0,l=!1,a=1,p=0,w=0,v,y;;){if(o>0&&h>c.length+o)break;h+=o;var r=c[h-o],u=c[h-o+a],f=c[h],e=c[h+a];if(l){if(o>0&&r!=null&&f==null){w=h;o=-o;a=2;continue}if(o<0&&h==p+o){s.fill();l=!1;o=-o;a=1;h=p=w+o;continue}}if(r!=null&&f!=null){if(r<=f&&r<t.min){if(f<t.min)continue;u=(t.min-r)/(f-r)*(e-u)+u;r=t.min}else if(f<=r&&f<t.min){if(r<t.min)continue;e=(t.min-r)/(f-r)*(e-u)+u;f=t.min}if(r>=f&&r>t.max){if(f>t.max)continue;u=(t.max-r)/(f-r)*(e-u)+u;r=t.max}else if(f>=r&&f>t.max){if(r>t.max)continue;e=(t.max-r)/(f-r)*(e-u)+u;f=t.max}if(l||(s.beginPath(),s.moveTo(t.p2c(r),i.p2c(b)),l=!0),u>=i.max&&e>=i.max){s.lineTo(t.p2c(r),i.p2c(i.max));s.lineTo(t.p2c(f),i.p2c(i.max));continue}else if(u<=i.min&&e<=i.min){s.lineTo(t.p2c(r),i.p2c(i.min));s.lineTo(t.p2c(f),i.p2c(i.min));continue}v=r;y=f;u<=e&&u<i.min&&e>=i.min?(r=(i.min-u)/(e-u)*(f-r)+r,u=i.min):e<=u&&e<i.min&&u>=i.min&&(f=(i.min-u)/(e-u)*(f-r)+r,e=i.min);u>=e&&u>i.max&&e<=i.max?(r=(i.max-u)/(e-u)*(f-r)+r,u=i.max):e>=u&&e>i.max&&u<=i.max&&(f=(i.max-u)/(e-u)*(f-r)+r,e=i.max);r!=v&&s.lineTo(t.p2c(v),i.p2c(u));s.lineTo(t.p2c(r),i.p2c(u));s.lineTo(t.p2c(f),i.p2c(e));f!=y&&(s.lineTo(t.p2c(f),i.p2c(e)),s.lineTo(t.p2c(y),i.p2c(e)))}}}var t,i,r,f;s.save();s.translate(h.left,h.top);s.lineJoin="round";t=n.lines.lineWidth;i=n.shadowSize;t>0&&i>0&&(s.lineWidth=i,s.strokeStyle="rgba(0,0,0,0.1)",r=Math.PI/18,u(n.datapoints,Math.sin(r)*(t/2+i/2),Math.cos(r)*(t/2+i/2),n.xaxis,n.yaxis),s.lineWidth=i/2,u(n.datapoints,Math.sin(r)*(t/2+i/4),Math.cos(r)*(t/2+i/4),n.xaxis,n.yaxis));s.lineWidth=t;s.strokeStyle=n.color;f=ot(n.lines,n.color,0,b);f&&(s.fillStyle=f,e(n.datapoints,n.xaxis,n.yaxis));t>0&&u(n.datapoints,0,0,n.xaxis,n.yaxis);s.restore()}function ur(n){function r(n,t,i,r,u,f,e,o){for(var h,c,a=n.points,v=n.pointsize,l=0;l<a.length;l+=v)(h=a[l],c=a[l+1],h==null||h<f.min||h>f.max||c<e.min||c>e.max)||(s.beginPath(),h=f.p2c(h),c=e.p2c(c)+r,o=="circle"?s.arc(h,c,t,0,u?Math.PI:Math.PI*2,!1):o(s,h,c,t,u),s.closePath(),i&&(s.fillStyle=i,s.fill()),s.stroke())}var t;s.save();s.translate(h.left,h.top);var i=n.points.lineWidth,e=n.shadowSize,u=n.points.radius,f=n.points.symbol;i==0&&(i=.0001);i>0&&e>0&&(t=e/2,s.lineWidth=t,s.strokeStyle="rgba(0,0,0,0.1)",r(n.datapoints,u,null,t+t/2,!0,n.xaxis,n.yaxis,f),s.strokeStyle="rgba(0,0,0,0.2)",r(n.datapoints,u,null,t/2,!0,n.xaxis,n.yaxis,f));s.lineWidth=i;s.strokeStyle=n.color;r(n.datapoints,u,ot(n.points,n.color),0,!1,n.xaxis,n.yaxis,f);s.restore()}function wt(n,t,i,r,u,f,e,o,s,h,c){var l,y,a,v,p,w,b,k,d;(h?(k=w=b=!0,p=!1,l=i,y=n,v=t+r,a=t+u,y<l&&(d=y,y=l,l=d,p=!0,w=!1)):(p=w=b=!0,k=!1,l=n+r,y=n+u,a=i,v=t,v<a&&(d=v,v=a,a=d,k=!0,b=!1)),y<e.min||l>e.max||v<o.min||a>o.max)||(l<e.min&&(l=e.min,p=!1),y>e.max&&(y=e.max,w=!1),a<o.min&&(a=o.min,k=!1),v>o.max&&(v=o.max,b=!1),l=e.p2c(l),a=o.p2c(a),y=e.p2c(y),v=o.p2c(v),f&&(s.fillStyle=f(a,v),s.fillRect(l,v,y-l,a-v)),c>0&&(p||w||b||k)&&(s.beginPath(),s.moveTo(l,a),p?s.lineTo(l,v):s.moveTo(l,v),b?s.lineTo(y,v):s.moveTo(y,v),w?s.lineTo(y,a):s.moveTo(y,a),k?s.lineTo(l,a):s.moveTo(l,a),s.stroke()))}function fr(n){function r(t,i,r,u,f,e){for(var h=t.points,c=t.pointsize,o=0;o<h.length;o+=c)h[o]!=null&&wt(h[o],h[o+1],h[o+2],i,r,u,f,e,s,n.bars.horizontal,n.bars.lineWidth)}var t,i;s.save();s.translate(h.left,h.top);s.lineWidth=n.bars.lineWidth;s.strokeStyle=n.color;switch(n.bars.align){case"left":t=0;break;case"right":t=-n.bars.barWidth;break;default:t=-n.bars.barWidth/2}i=n.bars.fill?function(t,i){return ot(n.bars,n.color,t,i)}:null;r(n.datapoints,t,t+n.bars.barWidth,i,n.xaxis,n.yaxis);s.restore()}function ot(t,i,r,u){var e=t.fill,f;return e?t.fillColor?ri(t.fillColor,r,u,i):(f=n.color.parse(i),f.a=typeof e=="number"?e:.4,f.normalize(),f.toString()):null}function er(){var g,r,w,b,v,t,k;if(o.legend.container!=null?n(o.legend.container).html(""):i.find(".legend").remove(),o.legend.show){var f=[],e=[],y=!1,d=o.legend.labelFormatter,s,p;for(r=0;r<c.length;++r)s=c[r],s.label&&(p=d?d(s.label,s):s.label,p&&e.push({label:p,color:s.color}));for(o.legend.sorted&&(n.isFunction(o.legend.sorted)?e.sort(o.legend.sorted):o.legend.sorted=="reverse"?e.reverse():(g=o.legend.sorted!="descending",e.sort(function(n,t){return n.label==t.label?0:n.label<t.label!=g?1:-1}))),r=0;r<e.length;++r)w=e[r],r%o.legend.noColumns==0&&(y&&f.push("<\/tr>"),f.push("<tr>"),y=!0),f.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+w.color+';overflow:hidden"><\/div><\/div><\/td><td class="legendLabel">'+w.label+"<\/td>");if(y&&f.push("<\/tr>"),f.length!=0)if(b='<table style="font-size:smaller;color:'+o.grid.color+'">'+f.join("")+"<\/table>",o.legend.container!=null)n(o.legend.container).html(b);else{var l="",a=o.legend.position,u=o.legend.margin;u[0]==null&&(u=[u,u]);a.charAt(0)=="n"?l+="top:"+(u[1]+h.top)+"px;":a.charAt(0)=="s"&&(l+="bottom:"+(u[1]+h.bottom)+"px;");a.charAt(1)=="e"?l+="right:"+(u[0]+h.right)+"px;":a.charAt(1)=="w"&&(l+="left:"+(u[0]+h.left)+"px;");v=n('<div class="legend">'+b.replace('style="','style="position:absolute;'+l+";")+"<\/div>").appendTo(i);o.legend.backgroundOpacity!=0&&(t=o.legend.backgroundColor,t==null&&(t=o.grid.backgroundColor,t=t&&typeof t=="string"?n.color.parse(t):n.color.extract(v,"background-color"),t.a=1,t=t.toString()),k=v.children(),n('<div style="position:absolute;width:'+k.width()+"px;height:"+k.height()+"px;"+l+"background-color:"+t+';"> <\/div>').prependTo(v).css("opacity",o.legend.backgroundOpacity))}}}function or(n,t,i){for(var w=o.grid.mouseActiveRadius,it=w*w+1,a=null,r,s,e,h,p,tt,u=c.length-1;u>=0;--u)if(i(c[u])){var f=c[u],b=f.xaxis,k=f.yaxis,l=f.datapoints.points,v=b.c2p(n),y=k.c2p(t),g=w/b.scale,nt=w/k.scale;if(s=f.datapoints.pointsize,b.options.inverseTransform&&(g=Number.MAX_VALUE),k.options.inverseTransform&&(nt=Number.MAX_VALUE),f.lines.show||f.points.show)for(r=0;r<l.length;r+=s)if((e=l[r],h=l[r+1],e!=null)&&!(e-v>g)&&!(e-v<-g)&&!(h-y>nt)&&!(h-y<-nt)){var rt=Math.abs(b.p2c(e)-n),ut=Math.abs(k.p2c(h)-t),ft=rt*rt+ut*ut;ft<it&&(it=ft,a=[u,r/s])}if(f.bars.show&&!a){switch(f.bars.align){case"left":p=0;break;case"right":p=-f.bars.barWidth;break;default:p=-f.bars.barWidth/2}for(tt=p+f.bars.barWidth,r=0;r<l.length;r+=s){var e=l[r],h=l[r+1],d=l[r+2];e!=null&&(c[u].bars.horizontal?v<=Math.max(d,e)&&v>=Math.min(d,e)&&y>=h+p&&y<=h+tt:v>=e+p&&v<=e+tt&&y>=Math.min(d,h)&&y<=Math.max(d,h))&&(a=[u,r/s])}}}return a?(u=a[0],r=a[1],s=c[u].datapoints.pointsize,{datapoint:c[u].datapoints.points.slice(r*s,(r+1)*s),dataIndex:r,series:c[u],seriesIndex:u}):null}function bt(n){o.grid.hoverable&&st("plothover",n,function(n){return n.hoverable!=!1})}function kt(n){o.grid.hoverable&&st("plothover",n,function(){return!1})}function dt(n){st("plotclick",n,function(n){return n.clickable!=!1})}function st(n,t,r){var e=k.offset(),l=t.pageX-e.left-h.left,a=t.pageY-e.top-h.top,c=ct({left:l,top:a}),u,s,f;if(c.pageX=t.pageX,c.pageY=t.pageY,u=or(l,a,r),u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+e.left+h.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+e.top+h.top,10)),o.grid.autoHighlight){for(s=0;s<g.length;++s)f=g[s],f.auto!=n||u&&f.series==u.series&&f.point[0]==u.datapoint[0]&&f.point[1]==u.datapoint[1]||ti(f.series,f.point);u&&ni(u.series,u.datapoint,n)}i.trigger(n,[c,u])}function ut(){var n=o.interaction.redrawOverlayInterval;if(n==-1){gt();return}rt||(rt=setTimeout(gt,n))}function gt(){rt=null;v.save();tt.clear();v.translate(h.left,h.top);for(var n,t=0;t<g.length;++t)n=g[t],n.series.bars.show?hr(n.series,n.point):sr(n.series,n.point);v.restore();nt(p.drawOverlay,[v])}function ni(n,t,i){var r,u;typeof n=="number"&&(n=c[n]);typeof t=="number"&&(r=n.datapoints.pointsize,t=n.datapoints.points.slice(r*t,r*(t+1)));u=ii(n,t);u==-1?(g.push({series:n,point:t,auto:i}),ut()):i||(g[u].auto=!1)}function ti(n,t){var i,r;if(n==null&&t==null){g=[];ut();return}typeof n=="number"&&(n=c[n]);typeof t=="number"&&(i=n.datapoints.pointsize,t=n.datapoints.points.slice(i*t,i*(t+1)));r=ii(n,t);r!=-1&&(g.splice(r,1),ut())}function ii(n,t){for(var r,i=0;i<g.length;++i)if(r=g[i],r.series==n&&r.point[0]==t[0]&&r.point[1]==t[1])return i;return-1}function sr(t,i){var r=i[0],u=i[1],f=t.xaxis,e=t.yaxis,h=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),o,s;r<f.min||r>f.max||u<e.min||u>e.max||(o=t.points.radius+t.points.lineWidth/2,v.lineWidth=o,v.strokeStyle=h,s=1.5*o,r=f.p2c(r),u=e.p2c(u),v.beginPath(),t.points.symbol=="circle"?v.arc(r,u,s,0,2*Math.PI,!1):t.points.symbol(v,r,u,s,!1),v.closePath(),v.stroke())}function hr(t,i){var u=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),f=u,r;switch(t.bars.align){case"left":r=0;break;case"right":r=-t.bars.barWidth;break;default:r=-t.bars.barWidth/2}v.lineWidth=t.bars.lineWidth;v.strokeStyle=u;wt(i[0],i[1],i[2]||0,r,r+t.bars.barWidth,function(){return f},t.xaxis,t.yaxis,v,t.bars.horizontal,t.bars.lineWidth)}function ri(t,i,r,u){var h,e,c,f,o;if(typeof t=="string")return t;for(h=s.createLinearGradient(0,r,0,i),e=0,c=t.colors.length;e<c;++e)f=t.colors[e],typeof f!="string"&&(o=n.color.parse(u),f.brightness!=null&&(o=o.scale("rgb",f.brightness)),f.opacity!=null&&(o.a*=f.opacity),f=o.toString()),h.addColorStop(e/(c-1),f);return h}var c=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},a=null,tt=null,k=null,s=null,v=null,y=[],w=[],h={left:0,right:0,top:0,bottom:0},d=0,b=0,p={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},l=this,g,rt;l.setData=ht;l.setupGrid=at;l.draw=vt;l.getPlaceholder=function(){return i};l.getCanvas=function(){return a.element};l.getPlotOffset=function(){return h};l.width=function(){return d};l.height=function(){return b};l.offset=function(){var n=k.offset();return n.left+=h.left,n.top+=h.top,n};l.getData=function(){return c};l.getAxes=function(){var t={};return n.each(y.concat(w),function(n,i){i&&(t[i.direction+(i.n!=1?i.n:"")+"axis"]=i)}),t};l.getXAxes=function(){return y};l.getYAxes=function(){return w};l.c2p=ct;l.p2c=oi;l.getOptions=function(){return o};l.highlight=ni;l.unhighlight=ti;l.triggerRedrawOverlay=ut;l.pointOffset=function(n){return{left:parseInt(y[ft(n,"x")-1].p2c(+n.x)+h.left,10),top:parseInt(w[ft(n,"y")-1].p2c(+n.y)+h.top,10)}};l.shutdown=lt;l.destroy=function(){lt();i.removeData("plot").empty();c=[];o=null;a=null;tt=null;k=null;s=null;v=null;y=[];w=[];p=null;g=[];l=null};l.resize=function(){var n=i.width(),t=i.height();a.resize(n,t);tt.resize(n,t)};l.hooks=p;ui(l);fi(f);ci();ht(r);at();vt();li();g=[];rt=null}function u(n,t){return t*Math.floor(n/t)}var i=Object.prototype.hasOwnProperty;n.fn.detach||(n.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});t.prototype.resize=function(n,t){if(n<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+n+", height = "+t);var i=this.element,u=this.context,r=this.pixelRatio;this.width!=n&&(i.width=n*r,i.style.width=n+"px",this.width=n);this.height!=t&&(i.height=t*r,i.style.height=t+"px",this.height=t);u.restore();u.save();u.scale(r,r)};t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};t.prototype.render=function(){var h=this._textCache,r,u,f,c,t,e,o,s,n;for(r in h)if(i.call(h,r)){u=this.getTextLayer(r);f=h[r];u.hide();for(c in f)if(i.call(f,c)){t=f[c];for(e in t)if(i.call(t,e)){for(o=t[e].positions,s=0;n=o[s];s++)n.active?n.rendered||(u.append(n.element),n.rendered=!0):(o.splice(s--,1),n.rendered&&n.element.detach());o.length==0&&delete t[e]}}u.show()}};t.prototype.getTextLayer=function(t){var i=this.text[t];return i==null&&(this.textContainer==null&&(this.textContainer=n("<div class='flot-text'><\/div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[t]=n("<div><\/div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i};t.prototype.getTextInfo=function(t,i,r,u,f){var h,o,s,c,e;return i=""+i,h=typeof r=="object"?r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:r,o=this._textCache[t],o==null&&(o=this._textCache[t]={}),s=o[h],s==null&&(s=o[h]={}),c=s[i],c==null&&(e=n("<div><\/div>").html(i).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(t)),typeof r=="object"?e.css({font:h,color:r.color}):typeof r=="string"&&e.addClass(r),c=s[i]={width:e.outerWidth(!0),height:e.outerHeight(!0),element:e,positions:[]},e.detach()),c};t.prototype.addText=function(n,t,i,r,u,f,e,o,s){var h=this.getTextInfo(n,r,u,f,e),l=h.positions,a,c;for(o=="center"?t-=h.width/2:o=="right"&&(t-=h.width),s=="middle"?i-=h.height/2:s=="bottom"&&(i-=h.height),a=0;c=l[a];a++)if(c.x==t&&c.y==i){c.active=!0;return}c={active:!0,rendered:!1,element:l.length?h.element.clone():h.element,x:t,y:i};l.push(c);c.element.css({top:Math.round(i),left:Math.round(t),"text-align":o})};t.prototype.removeText=function(n,t,r,u,f,e){var h,a,c,v,l,o,s;if(u==null){if(h=this._textCache[n],h!=null)for(a in h)if(i.call(h,a)){c=h[a];for(v in c)if(i.call(c,v))for(l=c[v].positions,o=0;s=l[o];o++)s.active=!1}}else for(l=this.getTextInfo(n,u,f,e).positions,o=0;s=l[o];o++)s.x==t&&s.y==r&&(s.active=!1)};n.plot=function(t,i,u){return new r(n(t),i,u,n.plot.plugins)};n.plot.version="0.8.3";n.plot.plugins=[];n.fn.plot=function(t,i){return this.each(function(){n.plot(this,t,i)})}}(jQuery),function(n){function i(n,t){return t*Math.floor(n/t)}function r(n,t,i,r){var c,o,u;if(typeof n.strftime=="function")return n.strftime(t);var f=function(n,t){return n=""+n,t=""+(t==null?"0":t),n.length==1?t+n:n},s=[],h=!1,e=n.getHours(),l=e<12;for(i==null&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),r==null&&(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),c=e>12?e-12:e==0?12:e,o=0;o<t.length;++o)if(u=t.charAt(o),h){switch(u){case"a":u=""+r[n.getDay()];break;case"b":u=""+i[n.getMonth()];break;case"d":u=f(n.getDate());break;case"e":u=f(n.getDate()," ");break;case"h":case"H":u=f(e);break;case"I":u=f(c);break;case"l":u=f(c," ");break;case"m":u=f(n.getMonth()+1);break;case"M":u=f(n.getMinutes());break;case"q":u=""+(Math.floor(n.getMonth()/3)+1);break;case"S":u=f(n.getSeconds());break;case"y":u=f(n.getFullYear()%100);break;case"Y":u=""+n.getFullYear();break;case"p":u=l?"am":"pm";break;case"P":u=l?"AM":"PM";break;case"w":u=""+n.getDay()}s.push(u);h=!1}else u=="%"?h=!0:s.push(u);return s.join("")}function f(n){function u(n,t,i,r){n[t]=function(){return i[r].apply(i,arguments)}}var i={date:n},r,t;for(n.strftime!=undefined&&u(i,"strftime",n,"strftime"),u(i,"getTime",n,"getTime"),u(i,"setTime",n,"setTime"),r=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],t=0;t<r.length;t++)u(i,"get"+r[t],n,"getUTC"+r[t]),u(i,"set"+r[t],n,"setUTC"+r[t]);return i}function u(n,t){if(t.timezone=="browser")return new Date(n);if(t.timezone&&t.timezone!="utc"){if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var i=new timezoneJS.Date;return i.setTimezone(t.timezone),i.setTime(n),i}return f(new Date(n))}return f(new Date(n))}function h(f){f.hooks.processOptions.push(function(f){n.each(f.getAxes(),function(n,f){var e=f.options;e.mode=="time"&&(f.tickGenerator=function(n){var k=[],r=u(n.min,e),d=0,l=e.tickSize&&e.tickSize[1]==="quarter"||e.minTickSize&&e.minTickSize[1]==="quarter"?s:o,c,y,f,w,p,h,a,b,v,g,nt,tt;for(e.minTickSize!=null&&(d=typeof e.tickSize=="number"?e.tickSize:e.minTickSize[0]*t[e.minTickSize[1]]),c=0;c<l.length-1;++c)if(n.delta<(l[c][0]*t[l[c][1]]+l[c+1][0]*t[l[c+1][1]])/2&&l[c][0]*t[l[c][1]]>=d)break;y=l[c][0];f=l[c][1];f=="year"&&(e.minTickSize!=null&&e.minTickSize[1]=="year"?y=Math.floor(e.minTickSize[0]):(w=Math.pow(10,Math.floor(Math.log(n.delta/t.year)/Math.LN10)),p=n.delta/t.year/w,y=(p<1.5?1:p<3?2:p<7.5?5:10)*w),y<1&&(y=1));n.tickSize=e.tickSize||[y,f];h=n.tickSize[0];f=n.tickSize[1];a=h*t[f];f=="second"?r.setSeconds(i(r.getSeconds(),h)):f=="minute"?r.setMinutes(i(r.getMinutes(),h)):f=="hour"?r.setHours(i(r.getHours(),h)):f=="month"?r.setMonth(i(r.getMonth(),h)):f=="quarter"?r.setMonth(3*i(r.getMonth()/3,h)):f=="year"&&r.setFullYear(i(r.getFullYear(),h));r.setMilliseconds(0);a>=t.minute&&r.setSeconds(0);a>=t.hour&&r.setMinutes(0);a>=t.day&&r.setHours(0);a>=t.day*4&&r.setDate(1);a>=t.month*2&&r.setMonth(i(r.getMonth(),3));a>=t.quarter*2&&r.setMonth(i(r.getMonth(),6));a>=t.year&&r.setMonth(0);b=0;v=Number.NaN;do g=v,v=r.getTime(),k.push(v),f=="month"||f=="quarter"?h<1?(r.setDate(1),nt=r.getTime(),r.setMonth(r.getMonth()+(f=="quarter"?3:1)),tt=r.getTime(),r.setTime(v+b*t.hour+(tt-nt)*h),b=r.getHours(),r.setHours(0)):r.setMonth(r.getMonth()+h*(f=="quarter"?3:1)):f=="year"?r.setFullYear(r.getFullYear()+h):r.setTime(v+a);while(v<n.max&&v!=g);return k},f.tickFormatter=function(n,i){var l=u(n,i.options);if(e.timeformat!=null)return r(l,e.timeformat,e.monthNames,e.dayNames);var o=i.options.tickSize&&i.options.tickSize[1]=="quarter"||i.options.minTickSize&&i.options.minTickSize[1]=="quarter",f=i.tickSize[0]*t[i.tickSize[1]],s=i.max-i.min,h=e.twelveHourClock?" %p":"",c=e.twelveHourClock?"%I":"%H",a;return a=f<t.minute?c+":%M:%S"+h:f<t.day?s<2*t.day?c+":%M"+h:"%b %d "+c+":%M"+h:f<t.month?"%b %d":o&&f<t.quarter||!o&&f<t.year?s<t.year?"%b":"%b %Y":o&&f<t.year?s<t.year?"Q%q":"Q%q %Y":"%Y",r(l,a,e.monthNames,e.dayNames)})})})}var t={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:365.2425*864e5},e=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],o=e.concat([[3,"month"],[6,"month"],[1,"year"]]),s=e.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);n.plot.plugins.push({init:h,options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"});n.plot.formatDate=r;n.plot.dateGenerator=u}(jQuery),function($,n,t){function c(t){var a,o;for(f===!0&&(f=t||1),a=i.length-1;a>=0;a--)if(o=$(i[a]),o[0]==n||o.is(":visible")){var v=o.width(),y=o.height(),s=o.data(e);s&&(v!==s.w||y!==s.h)&&(o.trigger(h,[s.w=v,s.h=y]),f=t||!0)}else s=o.data(e),s.w=0,s.h=0;u!==null&&(f&&(t==null||t-f<1e3)?u=n.requestAnimationFrame(c):(u=setTimeout(c,r[l]),f=!1))}var i=[],r=$.resize=$.extend($.resize,{}),u,f=!1,s="setTimeout",h="resize",e=h+"-special-event",l="pendingDelay",a="activeDelay",o="throttleWindow";r[l]=200;r[a]=20;r[o]=!0;$.event.special[h]={setup:function(){if(!r[o]&&this[s])return!1;var n=$(this);i.push(this);n.data(e,{w:n.width(),h:n.height()});i.length===1&&(u=t,c())},teardown:function(){var t,n;if(!r[o]&&this[s])return!1;for(t=$(this),n=i.length-1;n>=0;n--)if(i[n]==this){i.splice(n,1);break}t.removeData(e);i.length||(f?cancelAnimationFrame(u):clearTimeout(u),u=null)},add:function(n){function u(n,r,u){var f=$(this),o=f.data(e)||{};o.w=r!==t?r:f.width();o.h=u!==t?u:f.height();i.apply(this,arguments)}if(!r[o]&&this[s])return!1;var i;if($.isFunction(n))return i=n,u;i=n.handler;n.handler=u}};n.requestAnimationFrame||(n.requestAnimationFrame=function(){return n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){return n.setTimeout(function(){t((new Date).getTime())},r[a])}}());n.cancelAnimationFrame||(n.cancelAnimationFrame=function(){return n.webkitCancelRequestAnimationFrame||n.mozCancelRequestAnimationFrame||n.oCancelRequestAnimationFrame||n.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(n){function t(n){function t(){var t=n.getPlaceholder();t.width()!=0&&t.height()!=0&&(n.resize(),n.setupGrid(),n.draw())}function i(n){n.getPlaceholder().resize(t)}function r(n){n.getPlaceholder().unbind("resize",t)}n.hooks.bindEvents.push(i);n.hooks.shutdown.push(r)}n.plot.plugins.push({init:t,options:{},name:"resize",version:"1.0"})}(jQuery),function(n){function t(n){function h(n,r,f){var e=null;if(c(r)&&(w(r),l(n),a(n),p(r),i>=2)){var o=b(r),h=0,v=k();h=d(o)?-1*s(t,o-1,Math.floor(i/2)-1)-v:s(t,Math.ceil(i/2),o-2)+v+u*2;e=g(f,r,h);f.points=e}return e}function c(n){return n.bars!=null&&n.bars.show&&n.bars.order!=null}function l(n){var i=r?n.getPlaceholder().innerHeight():n.getPlaceholder().innerWidth(),t=r?o(n.getData(),1):o(n.getData(),0),u=t[1]-t[0];e=u/i}function o(n,t){for(var r=[],i=0;i<n.length;i++)r[0]=n[i].data[0][t],r[1]=n[i].data[n[i].data.length-1][t];return r}function a(n){t=v(n.getData());i=t.length}function v(n){for(var i=[],t=0;t<n.length;t++)n[t].bars.order!=null&&n[t].bars.show&&i.push(n[t]);return i.sort(y)}function y(n,t){var i=n.bars.order,r=t.bars.order;return i<r?-1:i>r?1:0}function p(n){f=n.bars.lineWidth?n.bars.lineWidth:2;u=f*e}function w(n){n.bars.horizontal&&(r=!0)}function b(n){for(var r=0,i=0;i<t.length;++i)if(n==t[i]){r=i;break}return r+1}function k(){var n=0;return i%2!=0&&(n=t[Math.ceil(i/2)].bars.barWidth/2),n}function d(n){return n<=Math.ceil(i/2)}function s(n,t,i){for(var f=0,r=t;r<=i;r++)f+=n[r].bars.barWidth+u*2;return f}function g(n,t,i){for(var o=n.pointsize,u=n.points,e=0,f=r?1:0;f<u.length;f+=o)u[f]+=i,t.data[e][3]=u[f],e++;return u}var t,i,f,u,e=1,r=!1;n.hooks.processDatapoints.push(h)}n.plot.plugins.push({init:t,options:{series:{bars:{order:null}}},name:"orderBars",version:"0.2"})}(jQuery),function(n){function r(r){function w(t){l||(l=!0,a=t.getCanvas(),h=n(a).parent(),u=t.getOptions(),t.setData(b(t.getData())))}function b(t){for(var i,f=0,e=0,o=0,s=u.series.pie.combine.color,h=[],r=0;r<t.length;++r)i=t[r].data,n.isArray(i)&&i.length==1&&(i=i[0]),n.isArray(i)?i[1]=!isNaN(parseFloat(i[1]))&&isFinite(i[1])?+i[1]:0:i=!isNaN(parseFloat(i))&&isFinite(i)?[1,+i]:[1,0],t[r].data=[i];for(r=0;r<t.length;++r)f+=t[r].data[0][1];for(r=0;r<t.length;++r)i=t[r].data[0][1],i/f<=u.series.pie.combine.threshold&&(e+=i,o++,s||(s=t[r].color));for(r=0;r<t.length;++r)i=t[r].data[0][1],(o<2||i/f>u.series.pie.combine.threshold)&&h.push(n.extend(t[r],{data:[[1,i]],color:t[r].color,label:t[r].label,angle:i*Math.PI*2/f,percent:i/(f/100)}));return o>1&&h.push({data:[[1,e]],color:s,label:u.series.pie.combine.label,angle:e*Math.PI*2/f,percent:e/(f/100)}),h}function k(r,s){function k(){f.clearRect(0,0,y,p);h.children().filter(".pieLabel, .pieLabelBackground").remove()}function d(){var i=u.series.pie.shadow.left,r=u.series.pie.shadow.top,s=10,h=u.series.pie.shadow.alpha,n=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius,t;if(!(n>=y/2-i)&&!(n*u.series.pie.tilt>=p/2-r)&&!(n<=s)){for(f.save(),f.translate(i,r),f.globalAlpha=h,f.fillStyle="#000",f.translate(e,c),f.scale(1,u.series.pie.tilt),t=1;t<=s;t++)f.beginPath(),f.arc(0,0,n,0,Math.PI*2,!1),f.fill(),n-=t;f.restore()}}function g(){function l(n,t,r){n<=0||isNaN(n)||(r?f.fillStyle=t:(f.strokeStyle=t,f.lineJoin="round"),f.beginPath(),Math.abs(n-Math.PI*2)>1e-9&&f.moveTo(0,0),f.arc(0,0,s,i,i+n/2,!1),f.arc(0,0,s,i+n/2,i+n,!1),f.closePath(),i+=n,r?f.fill():f.stroke())}function w(){function s(t,i,r){var w,s,b,v,nt;if(t.data[0][1]==0)return!0;w=u.legend.labelFormatter;b=u.series.pie.label.formatter;s=w?w(t.label,t):t.label;b&&(s=b(s,t));var k=(i+t.angle+i)/2,d=e+Math.round(Math.cos(k)*f),g=c+Math.round(Math.sin(k)*f)*u.series.pie.tilt,tt="<span class='pieLabel' id='pieLabel"+r+"' style='position:absolute;top:"+g+"px;left:"+d+"px;'>"+s+"<\/span>";h.append(tt);var o=h.children("#pieLabel"+r),l=g-o.height()/2,a=d-o.width()/2;return(o.css("top",l),o.css("left",a),0-l>0||0-a>0||p-(l+o.height())<0||y-(a+o.width())<0)?!1:(u.series.pie.label.background.opacity!=0&&(v=u.series.pie.label.background.color,v==null&&(v=t.color),nt="top:"+l+"px;left:"+a+"px;",n("<div class='pieLabelBackground' style='position:absolute;width:"+o.width()+"px;height:"+o.height()+"px;"+nt+"background-color:"+v+";'><\/div>").css("opacity",u.series.pie.label.background.opacity).insertBefore(o)),!0)}for(var i=r,f=u.series.pie.label.radius>1?u.series.pie.label.radius:o*u.series.pie.label.radius,t=0;t<a.length;++t){if(a[t].percent>=u.series.pie.label.threshold*100&&!s(a[t],i,t))return!1;i+=a[t].angle}return!0}var r=Math.PI*u.series.pie.startAngle,s=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius,i,t;for(f.save(),f.translate(e,c),f.scale(1,u.series.pie.tilt),f.save(),i=r,t=0;t<a.length;++t)a[t].startAngle=i,l(a[t].angle,a[t].color,!0);if(f.restore(),u.series.pie.stroke.width>0){for(f.save(),f.lineWidth=u.series.pie.stroke.width,i=r,t=0;t<a.length;++t)l(a[t].angle,u.series.pie.stroke.color,!1);f.restore()}return v(f),f.restore(),u.series.pie.label.show?w():!0}var a,w;if(h){var y=r.getPlaceholder().width(),p=r.getPlaceholder().height(),b=h.children().filter(".legend").children().width()||0;f=s;l=!1;o=Math.min(y,p/u.series.pie.tilt)/2;c=p/2+u.series.pie.offset.top;e=y/2;u.series.pie.offset.left=="auto"?(u.legend.position.match("w")?e+=b/2:e-=b/2,e<o?e=o:e>y-o&&(e=y-o)):e+=u.series.pie.offset.left;a=r.getData();w=0;do w>0&&(o*=i),w+=1,k(),u.series.pie.tilt<=.8&&d();while(!g()&&w<t);w>=t&&(k(),h.prepend("<div class='error'>Could not draw pie with labels contained inside canvas<\/div>"));r.setSeries&&r.insertLegend&&(r.setSeries(a),r.insertLegend())}}function v(n){if(u.series.pie.innerRadius>0){n.save();var t=u.series.pie.innerRadius>1?u.series.pie.innerRadius:o*u.series.pie.innerRadius;n.globalCompositeOperation="destination-out";n.beginPath();n.fillStyle=u.series.pie.stroke.color;n.arc(0,0,t,0,Math.PI*2,!1);n.fill();n.closePath();n.restore();n.save();n.beginPath();n.strokeStyle=u.series.pie.stroke.color;n.arc(0,0,t,0,Math.PI*2,!1);n.stroke();n.closePath();n.restore()}}function d(n,t){for(var u=!1,i=-1,f=n.length,r=f-1;++i<f;r=i)(n[i][1]<=t[1]&&t[1]<n[r][1]||n[r][1]<=t[1]&&t[1]<n[i][1])&&t[0]<(n[r][0]-n[i][0])*(t[1]-n[i][1])/(n[r][1]-n[i][1])+n[i][0]&&(u=!u);return u}function g(n,t){for(var i,l=r.getData(),h=r.getOptions(),u=h.series.pie.radius>1?h.series.pie.radius:o*h.series.pie.radius,a,v,s=0;s<l.length;++s)if(i=l[s],i.pie.show){if(f.save(),f.beginPath(),f.moveTo(0,0),f.arc(0,0,u,i.startAngle,i.startAngle+i.angle/2,!1),f.arc(0,0,u,i.startAngle+i.angle/2,i.startAngle+i.angle,!1),f.closePath(),a=n-e,v=t-c,f.isPointInPath){if(f.isPointInPath(n-e,t-c))return f.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:s}}else{var y=u*Math.cos(i.startAngle),p=u*Math.sin(i.startAngle),w=u*Math.cos(i.startAngle+i.angle/4),b=u*Math.sin(i.startAngle+i.angle/4),k=u*Math.cos(i.startAngle+i.angle/2),g=u*Math.sin(i.startAngle+i.angle/2),nt=u*Math.cos(i.startAngle+i.angle/1.5),tt=u*Math.sin(i.startAngle+i.angle/1.5),it=u*Math.cos(i.startAngle+i.angle),rt=u*Math.sin(i.startAngle+i.angle),ut=[[0,0],[y,p],[w,b],[k,g],[nt,tt],[it,rt]],ft=[a,v];if(d(ut,ft))return f.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:s}}f.restore()}return null}function nt(n){y("plothover",n)}function tt(n){y("plotclick",n)}function y(n,t){var o=r.offset(),l=parseInt(t.pageX-o.left),a=parseInt(t.pageY-o.top),i=g(l,a),f,e,c;if(u.grid.autoHighlight)for(f=0;f<s.length;++f)e=s[f],e.auto!=n||i&&e.series==i.series||rt(e.series);i&&it(i.series,n);c={pageX:t.pageX,pageY:t.pageY};h.trigger(n,[c,i])}function it(n,t){var i=p(n);i==-1?(s.push({series:n,auto:t}),r.triggerRedrawOverlay()):t||(s[i].auto=!1)}function rt(n){n==null&&(s=[],r.triggerRedrawOverlay());var t=p(n);t!=-1&&(s.splice(t,1),r.triggerRedrawOverlay())}function p(n){for(var i,t=0;t<s.length;++t)if(i=s[t],i.series==n)return t;return-1}function ut(n,t){function f(n){n.angle<=0||isNaN(n.angle)||(t.fillStyle="rgba(255, 255, 255, "+i.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(n.angle-Math.PI*2)>1e-9&&t.moveTo(0,0),t.arc(0,0,u,n.startAngle,n.startAngle+n.angle/2,!1),t.arc(0,0,u,n.startAngle+n.angle/2,n.startAngle+n.angle,!1),t.closePath(),t.fill())}var i=n.getOptions(),u=i.series.pie.radius>1?i.series.pie.radius:o*i.series.pie.radius,r;for(t.save(),t.translate(e,c),t.scale(1,i.series.pie.tilt),r=0;r<s.length;++r)f(s[r].series);v(t);t.restore()}var a=null,h=null,u=null,o=null,e=null,c=null,l=!1,f=null,s=[];r.hooks.processOptions.push(function(n,t){t.series.pie.show&&(t.grid.show=!1,t.series.pie.label.show=="auto"&&(t.series.pie.label.show=t.legend.show?!1:!0),t.series.pie.radius=="auto"&&(t.series.pie.radius=t.series.pie.label.show?3/4:1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))});r.hooks.bindEvents.push(function(n,t){var i=n.getOptions();i.series.pie.show&&(i.grid.hoverable&&t.unbind("mousemove").mousemove(nt),i.grid.clickable&&t.unbind("click").click(tt))});r.hooks.processDatapoints.push(function(n,t,i,r){var u=n.getOptions();u.series.pie.show&&w(n,t,i,r)});r.hooks.drawOverlay.push(function(n,t){var i=n.getOptions();i.series.pie.show&&ut(n,t)});r.hooks.draw.push(function(n,t){var i=n.getOptions();i.series.pie.show&&k(n,t)})}var t=10,i=.95,u={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(n,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+n+"<br/>"+Math.round(t.percent)+"%<\/div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};n.plot.plugins.push({init:r,options:u,name:"pie",version:"1.1"})}(jQuery),function(n){function i(n){function i(n,t){t.series.curvedLines.active&&n.hooks.processDatapoints.unshift(r)}function r(n,i,r){var l=r.points.length/r.pointsize,a=o(i.curvedLines),e,h;if(!a&&i.curvedLines.apply==!0&&i.originSeries===undefined&&l>1+.005)if(i.lines.fill){e=t(r,i.curvedLines,1);h=t(r,i.curvedLines,2);r.pointsize=3;r.points=[];for(var s=0,u=0,f=0,c=2;f<e.length||s<h.length;)e[f]==h[s]?(r.points[u]=e[f],r.points[u+1]=e[f+1],r.points[u+2]=h[s+1],s+=c,f+=c):e[f]<h[s]?(r.points[u]=e[f],r.points[u+1]=e[f+1],r.points[u+2]=u>0?r.points[u-1]:null,f+=c):(r.points[u]=h[s],r.points[u+1]=u>1?r.points[u-2]:null,r.points[u+2]=h[s+1],s+=c),u+=3}else i.lines.lineWidth>0&&(r.points=t(r,i.curvedLines,1),r.pointsize=2)}function t(n,t,i){if(typeof t.legacyOverride!="undefined"&&t.legacyOverride!=!1){var r={fit:!1,curvePointFactor:20,fitPointDist:undefined},f=jQuery.extend(r,t.legacyOverride);return e(n,f,i)}return u(n,t,i)}function u(n,t,i){for(var o,r=n.points,e=n.pointsize,y=f(n,t,i),u=[],c=0,s=0;s<r.length-e;s+=e){var h=s,p=s+i,l=r[h],a=r[h+e],v=(a-l)/Number(t.nrSplinePoints);for(u.push(r[h]),u.push(r[p]),o=l+=v;o<a;o+=v)u.push(o),u.push(y[c](o));c++}return u.push(r[r.length-e]),u.push(r[r.length-e+i]),u}function f(n,t,i){for(var e,h,v,c,l,y,p,b,tt,f=n.points,u=n.pointsize,o=[],s=[],r=0;r<f.length-u;r+=u){var c=r,l=r+i,k=f[c+u]-f[c],it=f[l+u]-f[l];o.push(k);s.push(it/k)}if(e=[s[0]],t.monotonicFit)for(r=1;r<o.length;r++)if(h=s[r],v=s[r-1],h*v<=0)e.push(0);else{var d=o[r],g=o[r-1],a=d+g;e.push(3*a/((a+d)/v+(a+g)/h))}else for(r=u;r<f.length-u;r+=u)c=r,l=r+i,e.push(Number(t.tension)*(f[l+u]-f[l-u])/(f[c+u]-f[c-u]));for(e.push(s[s.length-1]),y=[],p=[],r=0;r<o.length;r++){var nt=e[r],rt=e[r+1],h=s[r],w=1/o[r],a=nt+rt-h-h;y.push(a*w*w);p.push((h-a-nt)*w)}for(b=[],r=0;r<o.length;r++)tt=function(n,t,i,r,u){return function(f){var e=f-n,o=e*e;return t*e*o+i*o+r*e+u}},b.push(tt(f[r*u],y[r],p[r],e[r],f[r*u+i]));return b}function e(n,t,i){var e=n.points,nt=n.pointsize,ht=Number(t.curvePointFactor)*(e.length/nt),f=[],o=[],s=-1,v=-1,u=0,y,ct,lt,tt,it,rt,r,ot,ut,st,l,a,et,w,b,k;if(t.fit)for(typeof t.fitPointDist=="undefined"?(ct=e[0],lt=e[e.length-nt],y=(lt-ct)/5e4):y=Number(t.fitPointDist),r=0;r<e.length;r+=nt){for(s=r,v=r+i,tt=e[s]-y,it=e[s]+y,rt=2;tt==e[s]||it==e[s];)tt=e[s]-y*rt,it=e[s]+y*rt,rt++;f[u]=tt;o[u]=e[v];u++;f[u]=e[s];o[u]=e[v];u++;f[u]=it;o[u]=e[v];u++}else for(r=0;r<e.length;r+=nt)s=r,v=r+i,f[u]=e[s],o[u]=e[v],u++;var d=f.length,h=[],p=[];for(h[0]=0,h[d-1]=0,p[0]=0,r=1;r<d-1;++r){if(ot=f[r+1]-f[r-1],ot==0)return[];ut=(f[r]-f[r-1])/ot;st=ut*h[r-1]+2;h[r]=(ut-1)/st;p[r]=(o[r+1]-o[r])/(f[r+1]-f[r])-(o[r]-o[r-1])/(f[r]-f[r-1]);p[r]=(6*p[r]/(f[r+1]-f[r-1])-ut*p[r-1])/st}for(u=d-2;u>=0;--u)h[u]=h[u]*h[u+1]+p[u];var at=(f[d-1]-f[0])/(ht-1),c=[],ft=[],g=[];for(c[0]=f[0],ft[0]=o[0],g.push(c[0]),g.push(ft[0]),u=1;u<ht;++u){for(c[u]=c[0]+u*at,l=d-1,a=0;l-a>1;)et=Math.round((l+a)/2),f[et]>c[u]?l=et:a=et;if(w=f[l]-f[a],w==0)return[];b=(f[l]-c[u])/w;k=(c[u]-f[a])/w;ft[u]=b*o[a]+k*o[l]+((b*b*b-b)*h[a]+(k*k*k-k)*h[l])*w*w/6;g.push(c[u]);g.push(ft[u])}return g}function o(n){if(typeof n.fit!="undefined"||typeof n.curvePointFactor!="undefined"||typeof n.fitPointDist!="undefined")throw new Error("CurvedLines detected illegal parameters. The CurvedLines API changed with version 1.0.0 please check the options object.");return!1}n.hooks.processOptions.push(i)}var t={series:{curvedLines:{active:!1,apply:!1,monotonicFit:!1,tension:.5,nrSplinePoints:20,legacyOverride:undefined}}};n.plot.plugins.push({init:i,options:t,name:"curvedLines",version:"1.1.1"})}(jQuery);
/*!jQuery Knob*/
(function(n){typeof exports=="object"?module.exports=n(require("jquery")):typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){"use strict";var t={},i=Math.max,r=Math.min;t.c={};t.c.d=n(document);t.c.t=function(n){return n.originalEvent.touches.length-1};t.o=function(){var i=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.w=0;this.h=0;this.$c=null;this.c=null;this.t=0;this.isInit=!1;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.scale=1;this.relative=!1;this.relativeWidth=!1;this.relativeHeight=!1;this.$div=null;this.run=function(){var t=function(n,t){for(var r in t)i.o[r]=t[r];i._carve().init();i._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=n.extend({min:this.$.data("min")!==undefined?this.$.data("min"):0,max:this.$.data("max")!==undefined?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||this.$.attr("readonly")==="readonly",cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:this.$.data("displayinput")==null||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(n){return n},parse:function(n){return parseFloat(n)}},this.o),this.o.flip=this.o.rotation==="anticlockwise"||this.o.rotation==="acw",this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(t){var r=n(this);i.i[t]=r;i.v[t]=i.o.parse(r.val());r.bind("change blur",function(){var n={};n[t]=r.val();i.val(i._validate(n))})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),this.v===""&&(this.v=this.o.min),this.$.bind("change blur",function(){i.val(i._validate(i.o.parse(i.$.val())))})),this.o.displayInput||this.$.hide(),this.$c=n(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=n('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"><\/div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),typeof G_vmlCanvasManager!="undefined"&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!=0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!=0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",t).parent().bind("configure",t),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}};this._carve=function(){if(this.relative){var n=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),t=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(n,t)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),this.scale!==1&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this};this._draw=function(){var n=!0;i.g=i.c;i.clear();i.dH&&(n=i.dH());n!==!1&&i.draw()};this._touch=function(n){var r=function(n){var t=i.xy2val(n.originalEvent.touches[i.t].pageX,n.originalEvent.touches[i.t].pageY);t!=i.cv&&(i.cH&&i.cH(t)===!1||(i.change(i._validate(t)),i._draw()))};return this.t=t.c.t(n),r(n),t.c.d.bind("touchmove.k",r).bind("touchend.k",function(){t.c.d.unbind("touchmove.k touchend.k");i.val(i.cv)}),this};this._mouse=function(n){var r=function(n){var t=i.xy2val(n.pageX,n.pageY);t!=i.cv&&(i.cH&&i.cH(t)===!1||(i.change(i._validate(t)),i._draw()))};return r(n),t.c.d.bind("mousemove.k",r).bind("keyup.k",function(n){if(n.keyCode===27){if(t.c.d.unbind("mouseup.k mousemove.k keyup.k"),i.eH&&i.eH()===!1)return;i.cancel()}}).bind("mouseup.k",function(){t.c.d.unbind("mousemove.k mouseup.k keyup.k");i.val(i.cv)}),this};this._xy=function(){var n=this.$c.offset();return this.x=n.left,this.y=n.top,this};this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(n){n.preventDefault();i._xy()._mouse(n)}).bind("touchstart",function(n){n.preventDefault();i._xy()._touch(n)}),this.listen()),this.relative&&n(window).resize(function(){i._carve().init();i._draw()}),this};this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this};this._clear=function(){this.$c[0].width=this.$c[0].width};this._validate=function(n){var t=~~((n<0?-.5:.5)+n/this.o.step)*this.o.step;return Math.round(t*100)/100};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(){};this.val=function(){};this.xy2val=function(){};this.draw=function(){};this.clear=function(){this._clear()};this.h2rgba=function(n,t){var i;return n=n.substring(1,7),i=[parseInt(n.substring(0,2),16),parseInt(n.substring(2,4),16),parseInt(n.substring(4,6),16)],"rgba("+i[0]+","+i[1]+","+i[2]+","+t+")"};this.copy=function(n,t){for(var i in n)t[i]=n[i]}};t.Dial=function(){t.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=n.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)};this.val=function(n,t){if(null!=n){if(n=this.o.parse(n),t!==!1&&n!=this.v&&this.rH&&this.rH(n)===!1)return;this.cv=this.o.stopper?i(r(n,this.o.max),this.o.min):n;this.v=this.cv;this.$.val(this.o.format(this.v));this._draw()}else return this.v};this.xy2val=function(n,t){var u,f;return u=Math.atan2(n-(this.x+this.w2),-(t-this.y-this.w2))-this.angleOffset,this.o.flip&&(u=this.angleArc-u-this.PI2),this.angleArc!=this.PI2&&u<0&&u>-.5?u=0:u<0&&(u+=this.PI2),f=u*(this.o.max-this.o.min)/this.angleArc+this.o.min,this.o.stopper&&(f=i(r(f,this.o.max),this.o.min)),f};this.listen=function(){var t=this,u,e,h=function(n){n.preventDefault();var o=n.originalEvent,s=o.detail||o.wheelDeltaX,h=o.detail||o.wheelDeltaY,f=t._validate(t.o.parse(t.$.val()))+(s>0||h>0?t.o.step:s<0||h<0?-t.o.step:0);f=i(r(f,t.o.max),t.o.min);t.val(f,!1);t.rH&&(clearTimeout(u),u=setTimeout(function(){t.rH(f);u=null},100),e||(e=setTimeout(function(){u&&t.rH(f);e=null},200)))},o,f,s=1,c={37:-t.o.step,38:t.o.step,39:t.o.step,40:-t.o.step};this.$.bind("keydown",function(u){var e=u.keyCode,h;e>=96&&e<=105&&(e=u.keyCode=e-48);o=parseInt(String.fromCharCode(e));isNaN(o)&&(e!==13&&e!==8&&e!==9&&e!==189&&(e!==190||t.$.val().match(/\./))&&u.preventDefault(),n.inArray(e,[37,38,39,40])>-1&&(u.preventDefault(),h=t.o.parse(t.$.val())+c[e]*s,t.o.stopper&&(h=i(r(h,t.o.max),t.o.min)),t.change(t._validate(h)),t._draw(),f=window.setTimeout(function(){s*=2},30)))}).bind("keyup",function(){isNaN(o)?f&&(window.clearTimeout(f),f=null,s=1,t.val(t.$.val())):t.$.val()>t.o.max&&t.$.val(t.o.max)||t.$.val()<t.o.min&&t.$.val(t.o.min)});this.$c.bind("mousewheel DOMMouseScroll",h);this.$.bind("mousewheel DOMMouseScroll",h)};this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min);this.$.val(this.v);this.w2=this.w/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2*this.scale;this.lineWidth=this.xy*this.o.thickness;this.lineCap=this.o.lineCap;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var n=i(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(this.w*3/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/n>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})};this.change=function(n){this.cv=n;this.$.val(this.o.format(n))};this.angle=function(n){return(n-this.o.min)*this.angleArc/(this.o.max-this.o.min)};this.arc=function(n){var t,i;return n=this.angle(n),this.o.flip?(t=this.endAngle+1e-5,i=t-n-1e-5):(t=this.startAngle-1e-5,i=t+n+1e-5),this.o.cursor&&(t=i-this.cursorExt)&&(i=i+this.cursorExt),{s:t,e:i,d:this.o.flip&&!this.o.cursor}};this.draw=function(){var n=this.g,i=this.arc(this.cv),t,r=1;n.lineWidth=this.lineWidth;n.lineCap=this.lineCap;this.o.bgColor!=="none"&&(n.beginPath(),n.strokeStyle=this.o.bgColor,n.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),n.stroke());this.o.displayPrevious&&(t=this.arc(this.v),n.beginPath(),n.strokeStyle=this.pColor,n.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d),n.stroke(),r=this.cv==this.v);n.beginPath();n.strokeStyle=r?this.o.fgColor:this.fgColor;n.arc(this.xy,this.xy,this.radius,i.s,i.e,i.d);n.stroke()};this.cancel=function(){this.val(this.v)}};n.fn.dial=n.fn.knob=function(i){return this.each(function(){var r=new t.Dial;r.o=i;r.$=n(this);r.run()}).parent()}}),function(n,t,i){(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.sparkline&&n(jQuery)})(function(r){"use strict";var c={},tt,u,e,s,l,o,v,it,rt,y,pt,ut,ft,et,h,ot,st,a,p,ht,ct,lt,w,b,k,at,vt,yt,d,g,nt,f,wt=0;tt=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new e("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new e("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new e("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}};at='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}';u=function(){var n,t;return n=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(n.prototype=r.extend(new arguments[0],arguments[arguments.length-1]),n._super=arguments[0].prototype):n.prototype=arguments[arguments.length-1],arguments.length>2&&(t=Array.prototype.slice.call(arguments,1,-1),t.unshift(n.prototype),r.extend.apply(r,t))):n.prototype=arguments[0],n.prototype.cls=n,n};r.SPFormatClass=e=u({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(n,t){this.format=n;this.fclass=t},render:function(n,t,r){var h=this,c=n,e,o,f,u,s;return this.format.replace(this.fre,function(){var n;return o=arguments[1],f=arguments[3],e=h.precre.exec(o),e?(s=e[2],o=e[1]):s=!1,u=c[o],u===i?"":f&&t&&t[f]?(n=t[f],n.get?t[f].get(u)||u:t[f][u]||u):(rt(u)&&(u=r.get("numberFormatter")?r.get("numberFormatter")(u):et(u,s,r.get("numberDigitGroupCount"),r.get("numberDigitGroupSep"),r.get("numberDecimalMark"))),u)})}});r.spformat=function(n,t){return new e(n,t)};s=function(n,t,i){return n<t?t:n>i?i:n};l=function(n,i){var r;return i===2?(r=t.floor(n.length/2),n.length%2?n[r]:(n[r-1]+n[r])/2):n.length%2?(r=(n.length*i+i)/4,r%1?(n[t.floor(r)]+n[t.floor(r)-1])/2:n[r-1]):(r=(n.length*i+2)/4,r%1?(n[t.floor(r)]+n[t.floor(r)-1])/2:n[r-1])};o=function(n){var t;switch(n){case"undefined":n=i;break;case"null":n=null;break;case"true":n=!0;break;case"false":n=!1;break;default:t=parseFloat(n);n==t&&(n=t)}return n};v=function(n){for(var i=[],t=n.length;t--;)i[t]=o(n[t]);return i};it=function(n,t){for(var u=[],i=0,r=n.length;i<r;i++)n[i]!==t&&u.push(n[i]);return u};rt=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};et=function(n,t,i,u,f){var e,o;for(n=(t===!1?parseFloat(n).toString():n.toFixed(t)).split(""),e=(e=r.inArray(".",n))<0?n.length:e,e<n.length&&(n[e]=f),o=e-i;o>0;o-=i)n.splice(o,0,u);return n.join("")};y=function(n,t,i){for(var r=t.length;r--;)if((!i||t[r]!==null)&&t[r]!==n)return!1;return!0};pt=function(n){for(var i=0,t=n.length;t--;)i+=typeof n[t]=="number"?n[t]:0;return i};ft=function(n){return r.isArray(n)?n:[n]};ut=function(t){var i;n.createStyleSheet?n.createStyleSheet().cssText=t:(i=n.createElement("style"),i.type="text/css",n.getElementsByTagName("head")[0].appendChild(i),i[typeof n.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t)};r.fn.simpledraw=function(t,u,f,e){var o,s,h;if(f&&(o=this.data("_jqs_vcanvas")))return o;if(r.fn.sparkline.canvas===!1)return!1;if(r.fn.sparkline.canvas===i)if(h=n.createElement("canvas"),h.getContext&&h.getContext("2d"))r.fn.sparkline.canvas=function(n,t,i,r){return new g(n,t,i,r)};else{if(!n.namespaces||!!n.namespaces.v)return r.fn.sparkline.canvas=!1,!1;n.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");r.fn.sparkline.canvas=function(n,t,i){return new nt(n,t,i)}}return t===i&&(t=r(this).innerWidth()),u===i&&(u=r(this).innerHeight()),o=r.fn.sparkline.canvas(t,u,this,e),s=r(this).data("_jqs_mhandler"),s&&s.registerCanvas(o),o};r.fn.cleardraw=function(){var n=this.data("_jqs_vcanvas");n&&n.reset()};r.RangeMapClass=h=u({init:function(n){var i,t,r=[];for(i in n)n.hasOwnProperty(i)&&typeof i=="string"&&i.indexOf(":")>-1&&(t=i.split(":"),t[0]=t[0].length===0?-Infinity:parseFloat(t[0]),t[1]=t[1].length===0?Infinity:parseFloat(t[1]),t[2]=n[i],r.push(t));this.map=n;this.rangelist=r||!1},get:function(n){var r=this.rangelist,u,t,f;if((f=this.map[n])!==i)return f;if(r)for(u=r.length;u--;)if(t=r[u],t[0]<=n&&t[1]>=n)return t[2];return i}});r.range_map=function(n){return new h(n)};ot=u({init:function(n,t){var i=r(n);this.$el=i;this.options=t;this.currentPageX=0;this.currentPageY=0;this.el=n;this.splist=[];this.tooltip=null;this.over=!1;this.displayTooltips=!t.get("disableTooltips");this.highlightEnabled=!t.get("disableHighlight")},registerSparkline:function(n){this.splist.push(n);this.over&&this.updateDisplay()},registerCanvas:function(n){var t=r(n.canvas);this.canvas=n;this.$canvas=t;t.mouseenter(r.proxy(this.mouseenter,this));t.mouseleave(r.proxy(this.mouseleave,this));t.click(r.proxy(this.mouseclick,this))},reset:function(n){this.splist=[];this.tooltip&&n&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(n){var t=r.Event("sparklineClick");t.originalEvent=n;t.sparklines=this.splist;this.$el.trigger(t)},mouseenter:function(t){r(n.body).unbind("mousemove.jqs");r(n.body).bind("mousemove.jqs",r.proxy(this.mousemove,this));this.over=!0;this.currentPageX=t.pageX;this.currentPageY=t.pageY;this.currentEl=t.target;!this.tooltip&&this.displayTooltips&&(this.tooltip=new st(this.options),this.tooltip.updatePosition(t.pageX,t.pageY));this.updateDisplay()},mouseleave:function(){r(n.body).unbind("mousemove.jqs");var i=this.splist,e=i.length,u=!1,f,t;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),t=0;t<e;t++)f=i[t],f.clearRegionHighlight()&&(u=!0);u&&this.canvas.render()},mousemove:function(n){this.currentPageX=n.pageX;this.currentPageY=n.pageY;this.currentEl=n.target;this.tooltip&&this.tooltip.updatePosition(n.pageX,n.pageY);this.updateDisplay()},updateDisplay:function(){var i=this.splist,o=i.length,s=!1,h=this.$canvas.offset(),c=this.currentPageX-h.left,l=this.currentPageY-h.top,u,t,n,f,e;if(this.over){for(n=0;n<o;n++)t=i[n],f=t.setRegionHighlight(this.currentEl,c,l),f&&(s=!0);if(s){if(e=r.Event("sparklineRegionChange"),e.sparklines=this.splist,this.$el.trigger(e),this.tooltip){for(u="",n=0;n<o;n++)t=i[n],u+=t.getCurrentRegionTooltip();this.tooltip.setContent(u)}this.disableHighlight||this.canvas.render()}f===null&&this.mouseleave()}}});st=u({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var u=t.get("tooltipClassname","jqstooltip"),f=this.sizeStyle,i;this.container=t.get("tooltipContainer")||n.body;this.tooltipOffsetX=t.get("tooltipOffsetX",10);this.tooltipOffsetY=t.get("tooltipOffsetY",12);r("#jqssizetip").remove();r("#jqstooltip").remove();this.sizetip=r("<div/>",{id:"jqssizetip",style:f,"class":u});this.tooltip=r("<div/>",{id:"jqstooltip","class":u}).appendTo(this.container);i=this.tooltip.offset();this.offsetLeft=i.left;this.offsetTop=i.top;this.hidden=!0;r(window).unbind("resize.jqs scroll.jqs");r(window).bind("resize.jqs scroll.jqs",r.proxy(this.updateWindowDims,this));this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=r(window).scrollTop();this.scrollLeft=r(window).scrollLeft();this.scrollRight=this.scrollLeft+r(window).width();this.updatePosition()},getSize:function(n){this.sizetip.html(n).appendTo(this.container);this.width=this.sizetip.width()+1;this.height=this.sizetip.height();this.sizetip.remove()},setContent:function(n){if(!n){this.tooltip.css("visibility","hidden");this.hidden=!0;return}this.getSize(n);this.tooltip.html(n).css({width:this.width,height:this.height,visibility:"visible"});this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(n,t){if(n===i){if(this.mousex===i)return;n=this.mousex-this.offsetLeft;t=this.mousey-this.offsetTop}else this.mousex=n-=this.offsetLeft,this.mousey=t-=this.offsetTop;this.height&&this.width&&!this.hidden&&(t-=this.height+this.tooltipOffsetY,n+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),n<this.scrollLeft?n=this.scrollLeft:n+this.width>this.scrollRight&&(n=this.scrollRight-this.width),this.tooltip.css({left:n,top:t}))},remove:function(){this.tooltip.remove();this.sizetip.remove();this.sizetip=this.tooltip=i;r(window).unbind("resize.jqs scroll.jqs")}});vt=function(){ut(at)};r(vt);f=[];r.fn.sparkline=function(t,u){return this.each(function(){var e=new r.fn.sparkline.options(this,u),h=r(this),s,o;if(s=function(){var s,a,c,f,u,l,o;if(t==="html"||t===i?(o=this.getAttribute(e.get("tagValuesAttribute")),(o===i||o===null)&&(o=h.html()),s=o.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):s=t,a=e.get("width")==="auto"?s.length*e.get("defaultPixelsPerValue"):e.get("width"),e.get("height")==="auto"?e.get("composite")&&r.data(this,"_jqs_vcanvas")||(f=n.createElement("span"),f.innerHTML="a",h.html(f),c=r(f).innerHeight()||r(f).height(),r(f).remove(),f=null):c=e.get("height"),e.get("disableInteraction")?u=!1:(u=r.data(this,"_jqs_mhandler"),u?e.get("composite")||u.reset():(u=new ot(this,e),r.data(this,"_jqs_mhandler",u))),e.get("composite")&&!r.data(this,"_jqs_vcanvas")){r.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),r.data(this,"_jqs_errnotify",!0));return}l=new r.fn.sparkline[e.get("type")](this,s,e,a,c);l.render();u&&u.registerSparkline(l)},r(this).html()&&!e.get("disableHiddenCheck")&&r(this).is(":hidden")||!r(this).parents("body").length){if(!e.get("composite")&&r.data(this,"_jqs_pending"))for(o=f.length;o;o--)f[o-1][0]==this&&f.splice(o-1,1);f.push([this,s]);r.data(this,"_jqs_pending",!0)}else s.call(this)})};r.fn.sparkline.defaults=tt();r.sparkline_display_visible=function(){for(var t,i=[],n=0,u=f.length;n<u;n++)t=f[n][0],r(t).is(":visible")&&!r(t).parents().is(":hidden")?(f[n][1].call(t),r.data(f[n][0],"_jqs_pending",!1),i.push(n)):!r(t).closest("html").length&&!r.data(t,"_jqs_pending")&&(r.data(f[n][0],"_jqs_pending",!1),i.push(n));for(n=i.length;n;n--)f.splice(i[n-1],1)};r.fn.sparkline.options=u({init:function(n,t){var e,i,u,f;this.userOptions=t=t||{};this.tag=n;this.tagValCache={};i=r.fn.sparkline.defaults;u=i.common;this.tagOptionsPrefix=t.enableTagOptions&&(t.tagOptionsPrefix||u.tagOptionsPrefix);f=this.getTagSetting("type");e=f===c?i[t.type||u.type]:i[f];this.mergedOptions=r.extend({},u,e,t)},getTagSetting:function(n){var u=this.tagOptionsPrefix,t,r,f,e;if(u===!1||u===i)return c;if(this.tagValCache.hasOwnProperty(n))t=this.tagValCache.key;else{if(t=this.tag.getAttribute(u+n),t===i||t===null)t=c;else if(t.substr(0,1)==="[")for(t=t.substr(1,t.length-2).split(","),r=t.length;r--;)t[r]=o(t[r].replace(/(^\s*)|(\s*$)/g,""));else if(t.substr(0,1)==="{")for(f=t.substr(1,t.length-2).split(","),t={},r=f.length;r--;)e=f[r].split(":",2),t[e[0].replace(/(^\s*)|(\s*$)/g,"")]=o(e[1].replace(/(^\s*)|(\s*$)/g,""));else t=o(t);this.tagValCache.key=t}return t},get:function(n,t){var r=this.getTagSetting(n),u;return r!==c?r:(u=this.mergedOptions[n])===i?t:u}});r.fn.sparkline._base=u({disabled:!1,init:function(n,t,u,f,e){this.el=n;this.$el=r(n);this.values=t;this.options=u;this.width=f;this.height=e;this.currentRegion=i},initTarget:function(){var n=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),n))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(){},setRegionHighlight:function(n,t,r){var f=this.currentRegion,e=!this.options.get("disableHighlight"),u;return t>this.canvasWidth||r>this.canvasHeight||t<0||r<0?null:(u=this.getRegion(n,t,r),f!==u?(f!==i&&e&&this.removeHighlight(),this.currentRegion=u,u!==i&&e&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==i?(this.removeHighlight(),this.currentRegion=i,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var t=this.options,y="",h=[],n,o,p,w,b,u,c,l,a,k,v,s,d,f;if(this.currentRegion===i)return"";if(n=this.getCurrentRegionFields(),v=t.get("tooltipFormatter"),v)return v(this,t,n);if(t.get("tooltipChartTitle")&&(y+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"<\/div>\n"),o=this.options.get("tooltipFormat"),!o)return"";if(r.isArray(o)||(o=[o]),r.isArray(n)||(n=[n]),c=this.options.get("tooltipFormatFieldlist"),l=this.options.get("tooltipFormatFieldlistKey"),c&&l){for(a=[],u=n.length;u--;)k=n[u][l],(f=r.inArray(k,c))!=-1&&(a[f]=n[u]);n=a}for(p=o.length,d=n.length,u=0;u<p;u++)for(s=o[u],typeof s=="string"&&(s=new e(s)),w=s.fclass||"jqsfield",f=0;f<d;f++)n[f].isNull&&t.get("tooltipSkipNull")||(r.extend(n[f],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),b=s.render(n[f],t.get("tooltipValueLookups"),t),h.push('<div class="'+w+'">'+b+"<\/div>"));return h.length?y+h.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(n,i){var e=i.get("highlightColor"),o=i.get("highlightLighten"),u,h,f,r;if(e)return e;if(o&&(u=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(n)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(n),u)){for(f=[],h=n.length===4?16:1,r=0;r<3;r++)f[r]=s(t.round(parseInt(u[r+1],16)*h*o),0,255);return"rgb("+f.join(",")+")"}return n}});a={changeHighlight:function(n){var i=this.currentRegion,f=this.target,u=this.regionShapes[i],t;u&&(t=this.renderRegion(i,n),r.isArray(t)||r.isArray(u)?(f.replaceWithShapes(u,t),this.regionShapes[i]=r.map(t,function(n){return n.id})):(f.replaceWithShape(u,t),this.regionShapes[i]=t.id))},render:function(){var e=this.values,o=this.target,u=this.regionShapes,n,f,t,i;if(this.cls._super.render.call(this)){for(t=e.length;t--;)if(n=this.renderRegion(t),n)if(r.isArray(n)){for(f=[],i=n.length;i--;)n[i].append(),f.push(n[i].id);u[t]=f}else n.append(),u[t]=n.id;else u[t]=null;o.render()}}};r.fn.sparkline.line=p=u(r.fn.sparkline._base,{type:"line",init:function(n,t,i,r,u){p._super.init.call(this,n,t,i,r,u);this.vertices=[];this.regionMap=[];this.xvalues=[];this.yvalues=[];this.yminmax=[];this.hightlightSpotId=null;this.lastShapeId=null;this.initTarget()},getRegion:function(n,t){for(var u=this.regionMap,r=u.length;r--;)if(u[r]!==null&&t>=u[r][0]&&t<=u[r][1])return u[r][2];return i},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.yvalues[n]===null,x:this.xvalues[n],y:this.yvalues[n],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:n}},renderHighlight:function(){var h=this.currentRegion,t=this.target,n=this.vertices[h],r=this.options,e=r.get("spotRadius"),o=r.get("highlightSpotColor"),s=r.get("highlightLineColor"),u,f;n&&(e&&o&&(u=t.drawCircle(n[0],n[1],e,i,o),this.highlightSpotId=u.id,t.insertAfterShape(this.lastShapeId,u)),s&&(f=t.drawLine(n[0],this.canvasTop,n[0],this.canvasTop+this.canvasHeight,s),this.highlightLineId=f.id,t.insertAfterShape(this.lastShapeId,f)))},removeHighlight:function(){var n=this.target;this.highlightSpotId&&(n.removeShapeId(this.highlightSpotId),this.highlightSpotId=null);this.highlightLineId&&(n.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){for(var i=this.values,c=i.length,r=this.xvalues,e=this.yvalues,u=this.yminmax,f,s,h,o,n=0;n<c;n++)f=i[n],s=typeof i[n]=="string",h=typeof i[n]=="object"&&i[n]instanceof Array,o=s&&i[n].split(":"),s&&o.length===2?(r.push(Number(o[0])),e.push(Number(o[1])),u.push(Number(o[1]))):h?(r.push(f[0]),e.push(f[1]),u.push(f[1])):(r.push(n),i[n]===null||i[n]==="null"?e.push(null):(e.push(Number(f)),u.push(Number(f))));this.options.get("xvalues")&&(r=this.options.get("xvalues"));this.maxy=this.maxyorg=t.max.apply(t,u);this.miny=this.minyorg=t.min.apply(t,u);this.maxx=t.max.apply(t,r);this.minx=t.min.apply(t,r);this.xvalues=r;this.yvalues=e;this.yminmax=u},processRangeOptions:function(){var n=this.options,t=n.get("normalRangeMin"),r=n.get("normalRangeMax");t!==i&&(t<this.miny&&(this.miny=t),r>this.maxy&&(this.maxy=r));n.get("chartRangeMin")!==i&&(n.get("chartRangeClip")||n.get("chartRangeMin")<this.miny)&&(this.miny=n.get("chartRangeMin"));n.get("chartRangeMax")!==i&&(n.get("chartRangeClip")||n.get("chartRangeMax")>this.maxy)&&(this.maxy=n.get("chartRangeMax"));n.get("chartRangeMinX")!==i&&(n.get("chartRangeClipX")||n.get("chartRangeMinX")<this.minx)&&(this.minx=n.get("chartRangeMinX"));n.get("chartRangeMaxX")!==i&&(n.get("chartRangeClipX")||n.get("chartRangeMaxX")>this.maxx)&&(this.maxx=n.get("chartRangeMaxX"))},drawNormalRange:function(n,r,u,f,e){var s=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),h=r+t.round(u-u*((o-this.miny)/e)),c=t.round(u*(o-s)/e);this.target.drawRect(n,h,f,c,i,this.options.get("normalRangeColor")).append()},render:function(){var n=this.options,v=this.target,c=this.canvasWidth,o=this.canvasHeight,at=this.vertices,f=n.get("spotRadius"),pt=this.regionMap,b,y,k,l,a,ht,e,ut,g,d,vt,tt,yt,ct,ft,et,ot,st,nt,it,rt,lt,w,s,u;if(p._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),w=this.xvalues,s=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(l=a=0,b=this.maxx-this.minx==0?1:this.maxx-this.minx,y=this.maxy-this.miny==0?1:this.maxy-this.miny,k=this.yvalues.length-1,f&&(c<f*4||o<f*4)&&(f=0),f&&(rt=n.get("highlightSpotColor")&&!n.get("disableInteraction"),(rt||n.get("minSpotColor")||n.get("spotColor")&&s[k]===this.miny)&&(o-=t.ceil(f)),(rt||n.get("maxSpotColor")||n.get("spotColor")&&s[k]===this.maxy)&&(o-=t.ceil(f),l+=t.ceil(f)),(rt||(n.get("minSpotColor")||n.get("maxSpotColor"))&&(s[0]===this.miny||s[0]===this.maxy))&&(a+=t.ceil(f),c-=t.ceil(f)),(rt||n.get("spotColor")||n.get("minSpotColor")||n.get("maxSpotColor")&&(s[k]===this.miny||s[k]===this.maxy))&&(c-=t.ceil(f))),o--,n.get("normalRangeMin")!==i&&!n.get("drawNormalOnTop")&&this.drawNormalRange(a,l,o,c,y),e=[],ut=[e],ct=ft=null,et=s.length,u=0;u<et;u++)g=w[u],vt=w[u+1],d=s[u],tt=a+t.round((g-this.minx)*(c/b)),yt=u<et-1?a+t.round((vt-this.minx)*(c/b)):c,ft=tt+(yt-tt)/2,pt[u]=[ct||0,ft,u],ct=ft,d===null?u&&(s[u-1]!==null&&(e=[],ut.push(e)),at.push(null)):(d<this.miny&&(d=this.miny),d>this.maxy&&(d=this.maxy),e.length||e.push([tt,l+o]),ht=[tt,l+t.round(o-o*((d-this.miny)/y))],e.push(ht),at.push(ht));for(ot=[],st=[],nt=ut.length,u=0;u<nt;u++)e=ut[u],e.length&&(n.get("fillColor")&&(e.push([e[e.length-1][0],l+o]),st.push(e.slice(0)),e.pop()),e.length>2&&(e[0]=[e[0][0],e[1][1]]),ot.push(e));for(nt=st.length,u=0;u<nt;u++)v.drawShape(st[u],n.get("fillColor"),n.get("fillColor")).append();for(n.get("normalRangeMin")!==i&&n.get("drawNormalOnTop")&&this.drawNormalRange(a,l,o,c,y),nt=ot.length,u=0;u<nt;u++)v.drawShape(ot[u],n.get("lineColor"),i,n.get("lineWidth")).append();if(f&&n.get("valueSpots"))for(it=n.get("valueSpots"),it.get===i&&(it=new h(it)),u=0;u<et;u++)lt=it.get(s[u]),lt&&v.drawCircle(a+t.round((w[u]-this.minx)*(c/b)),l+t.round(o-o*((s[u]-this.miny)/y)),f,i,lt).append();f&&n.get("spotColor")&&s[k]!==null&&v.drawCircle(a+t.round((w[w.length-1]-this.minx)*(c/b)),l+t.round(o-o*((s[k]-this.miny)/y)),f,i,n.get("spotColor")).append();this.maxy!==this.minyorg&&(f&&n.get("minSpotColor")&&(g=w[r.inArray(this.minyorg,s)],v.drawCircle(a+t.round((g-this.minx)*(c/b)),l+t.round(o-o*((this.minyorg-this.miny)/y)),f,i,n.get("minSpotColor")).append()),f&&n.get("maxSpotColor")&&(g=w[r.inArray(this.maxyorg,s)],v.drawCircle(a+t.round((g-this.minx)*(c/b)),l+t.round(o-o*((this.maxyorg-this.miny)/y)),f,i,n.get("maxSpotColor")).append()));this.lastShapeId=v.getLastShapeId();this.canvasTop=l;v.render()}}});r.fn.sparkline.bar=ht=u(r.fn.sparkline._base,a,{type:"bar",init:function(n,u,f,e,c){var ct=parseInt(f.get("barWidth"),10),lt=parseInt(f.get("barSpacing"),10),dt=f.get("chartRangeMin"),gt=f.get("chartRangeMax"),at=f.get("chartRangeClip"),nt=Infinity,d=-Infinity,vt,yt,pt,tt,b,a,rt,wt,ut,ft,y,p,bt,kt,w,et,g,ni,ti,l,k,ii,ot,st;for(ht._super.init.call(this,n,u,f,e,c),a=0,rt=u.length;a<rt;a++)l=u[a],vt=typeof l=="string"&&l.indexOf(":")>-1,(vt||r.isArray(l))&&(w=!0,vt&&(l=u[a]=v(l.split(":"))),l=it(l,null),yt=t.min.apply(t,l),pt=t.max.apply(t,l),yt<nt&&(nt=yt),pt>d&&(d=pt));for(this.stacked=w,this.regionShapes={},this.barWidth=ct,this.barSpacing=lt,this.totalBarWidth=ct+lt,this.width=e=u.length*ct+(u.length-1)*lt,this.initTarget(),at&&(bt=dt===i?-Infinity:dt,kt=gt===i?Infinity:gt),b=[],tt=w?[]:b,ot=[],st=[],a=0,rt=u.length;a<rt;a++)if(w)for(et=u[a],u[a]=ti=[],ot[a]=0,tt[a]=st[a]=0,g=0,ni=et.length;g<ni;g++)l=ti[g]=at?s(et[g],bt,kt):et[g],l!==null&&(l>0&&(ot[a]+=l),nt<0&&d>0?l<0?st[a]+=t.abs(l):tt[a]+=l:tt[a]+=t.abs(l-(l<0?d:nt)),b.push(l));else l=at?s(u[a],bt,kt):u[a],l=u[a]=o(l),l!==null&&b.push(l);this.max=p=t.max.apply(t,b);this.min=y=t.min.apply(t,b);this.stackMax=d=w?t.max.apply(t,ot):p;this.stackMin=nt=w?t.min.apply(t,b):y;f.get("chartRangeMin")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMin")<y)&&(y=f.get("chartRangeMin"));f.get("chartRangeMax")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMax")>p)&&(p=f.get("chartRangeMax"));this.zeroAxis=ut=f.get("zeroAxis",!0);ft=y<=0&&p>=0&&ut?0:ut==0?y:y>0?y:p;this.xaxisOffset=ft;wt=w?t.max.apply(t,tt)+t.max.apply(t,st):p-y;this.canvasHeightEf=ut&&y<0?this.canvasHeight-2:this.canvasHeight-1;y<ft?(ii=w&&p>=0?d:p,k=(ii-ft)/wt*this.canvasHeight,k!==t.ceil(k)&&(this.canvasHeightEf-=2,k=t.ceil(k))):k=this.canvasHeight;this.yoffset=k;r.isArray(f.get("colorMap"))?(this.colorMapByIndex=f.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=f.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new h(this.colorMapByValue)));this.range=wt},getRegion:function(n,r){var u=t.floor(r/this.totalBarWidth);return u<0||u>=this.values.length?i:u},getCurrentRegionFields:function(){for(var i=this.currentRegion,r=ft(this.values[i]),u=[],n,t=r.length;t--;)n=r[t],u.push({isNull:n===null,value:n,color:this.calcColor(t,n,i),offset:i});return u},calcColor:function(n,t,u){var o=this.colorMapByIndex,s=this.colorMapByValue,e=this.options,f,h;return f=this.stacked?e.get("stackedBarColor"):t<0?e.get("negBarColor"):e.get("barColor"),t===0&&e.get("zeroColor")!==i&&(f=e.get("zeroColor")),s&&(h=s.get(t))?f=h:o&&o.length>u&&(f=o[u]),r.isArray(f)?f[n%f.length]:f},renderRegion:function(n,u){var f=this.values[n],h=this.options,c=this.xaxisOffset,p=[],b=this.range,rt=this.stacked,k=this.target,d=n*this.totalBarWidth,ut=this.canvasHeightEf,o=this.yoffset,l,a,e,g,w,v,nt,s,tt,it;if(f=r.isArray(f)?f:[f],nt=f.length,s=f[0],g=y(null,f),it=y(c,f,!0),g)return h.get("nullColor")?(e=u?h.get("nullColor"):this.calcHighlightColor(h.get("nullColor"),h),l=o>0?o-1:o,k.drawRect(d,l,this.barWidth-1,0,e,e)):i;for(w=o,v=0;v<nt;v++){if(s=f[v],rt&&s===c){if(!it||tt)continue;tt=!0}a=b>0?t.floor(ut*(t.abs(s-c)/b))+1:1;s<c||s===c&&o===0?(l=w,w+=a):(l=o-a,o-=a);e=this.calcColor(v,s,n);u&&(e=this.calcHighlightColor(e,h));p.push(k.drawRect(d,l,this.barWidth-1,a-1,e,e))}return p.length===1?p[0]:p}});r.fn.sparkline.tristate=ct=u(r.fn.sparkline._base,a,{type:"tristate",init:function(n,t,u,f,e){var o=parseInt(u.get("barWidth"),10),s=parseInt(u.get("barSpacing"),10);ct._super.init.call(this,n,t,u,f,e);this.regionShapes={};this.barWidth=o;this.barSpacing=s;this.totalBarWidth=o+s;this.values=r.map(t,Number);this.width=f=t.length*o+(t.length-1)*s;r.isArray(u.get("colorMap"))?(this.colorMapByIndex=u.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=u.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new h(this.colorMapByValue)));this.initTarget()},getRegion:function(n,i){return t.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],color:this.calcColor(this.values[n],n),offset:n}},calcColor:function(n,t){var u=this.values,i=this.options,r=this.colorMapByIndex,f=this.colorMapByValue,e,o;return e=f&&(o=f.get(n))?o:r&&r.length>t?r[t]:u[t]<0?i.get("negBarColor"):u[t]>0?i.get("posBarColor"):i.get("zeroBarColor"),e},renderRegion:function(n,i){var o=this.values,l=this.options,s=this.target,h,f,u,c,e,r;if(h=s.pixelHeight,u=t.round(h/2),c=n*this.totalBarWidth,o[n]<0?(e=u,f=u-1):o[n]>0?(e=0,f=u-1):(e=u-1,f=2),r=this.calcColor(o[n],n),r!==null)return i&&(r=this.calcHighlightColor(r,l)),s.drawRect(c,e,this.barWidth-1,f-1,r,r)}});r.fn.sparkline.discrete=lt=u(r.fn.sparkline._base,a,{type:"discrete",init:function(n,u,f,e,o){lt._super.init.call(this,n,u,f,e,o);this.regionShapes={};this.values=u=r.map(u,Number);this.min=t.min.apply(t,u);this.max=t.max.apply(t,u);this.range=this.max-this.min;this.width=e=f.get("width")==="auto"?u.length*2:this.width;this.interval=t.floor(e/u.length);this.itemWidth=e/u.length;f.get("chartRangeMin")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMin")<this.min)&&(this.min=f.get("chartRangeMin"));f.get("chartRangeMax")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMax")>this.max)&&(this.max=f.get("chartRangeMax"));this.initTarget();this.target&&(this.lineHeight=f.get("lineHeight")==="auto"?t.round(this.canvasHeight*.3):f.get("lineHeight"))},getRegion:function(n,i){return t.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],offset:n}},renderRegion:function(n,i){var a=this.values,r=this.options,h=this.min,v=this.max,y=this.range,p=this.interval,w=this.target,b=this.canvasHeight,c=this.lineHeight,l=b-c,f,e,u,o;return e=s(a[n],h,v),o=n*p,f=t.round(l-l*((e-h)/y)),u=r.get("thresholdColor")&&e<r.get("thresholdValue")?r.get("thresholdColor"):r.get("lineColor"),i&&(u=this.calcHighlightColor(u,r)),w.drawLine(o,f,o,f+c,u)}});r.fn.sparkline.bullet=w=u(r.fn.sparkline._base,{type:"bullet",init:function(n,r,u,f,e){var s,h,o;w._super.init.call(this,n,r,u,f,e);this.values=r=v(r);o=r.slice();o[0]=o[0]===null?o[2]:o[0];o[1]=r[1]===null?o[2]:o[1];s=t.min.apply(t,r);h=t.max.apply(t,r);s=u.get("base")===i?s<0?s:0:u.get("base");this.min=s;this.max=h;this.range=h-s;this.shapes={};this.valueShapes={};this.regiondata={};this.width=f=u.get("width")==="auto"?"4.0em":f;this.target=this.$el.simpledraw(f,e,u.get("composite"));r.length||(this.disabled=!0);this.initTarget()},getRegion:function(n,t,r){var u=this.target.getShapeAt(n,t,r);return u!==i&&this.shapes[u]!==i?this.shapes[u]:i},getCurrentRegionFields:function(){var n=this.currentRegion;return{fieldkey:n.substr(0,1),value:this.values[n.substr(1)],region:n}},changeHighlight:function(n){var i=this.currentRegion,r=this.valueShapes[i],t;delete this.shapes[r];switch(i.substr(0,1)){case"r":t=this.renderRange(i.substr(1),n);break;case"p":t=this.renderPerformance(n);break;case"t":t=this.renderTarget(n)}this.valueShapes[i]=t.id;this.shapes[t.id]=i;this.target.replaceWithShape(r,t)},renderRange:function(n,i){var u=this.values[n],f=t.round(this.canvasWidth*((u-this.min)/this.range)),r=this.options.get("rangeColors")[n-2];return i&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,f-1,this.canvasHeight-1,r,r)},renderPerformance:function(n){var r=this.values[1],u=t.round(this.canvasWidth*((r-this.min)/this.range)),i=this.options.get("performanceColor");return n&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,t.round(this.canvasHeight*.3),u-1,t.round(this.canvasHeight*.4)-1,i,i)},renderTarget:function(n){var u=this.values[0],f=t.round(this.canvasWidth*((u-this.min)/this.range)-this.options.get("targetWidth")/2),r=t.round(this.canvasHeight*.1),e=this.canvasHeight-r*2,i=this.options.get("targetColor");return n&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(f,r,this.options.get("targetWidth")-1,e-1,i,i)},render:function(){var i=this.values.length,r=this.target,t,n;if(w._super.render.call(this)){for(t=2;t<i;t++)n=this.renderRange(t).append(),this.shapes[n.id]="r"+t,this.valueShapes["r"+t]=n.id;this.values[1]!==null&&(n=this.renderPerformance().append(),this.shapes[n.id]="p1",this.valueShapes.p1=n.id);this.values[0]!==null&&(n=this.renderTarget().append(),this.shapes[n.id]="t0",this.valueShapes.t0=n.id);r.render()}}});r.fn.sparkline.pie=b=u(r.fn.sparkline._base,{type:"pie",init:function(n,i,u,f,e){var s=0,o;if(b._super.init.call(this,n,i,u,f,e),this.shapes={},this.valueShapes={},this.values=i=r.map(i,Number),u.get("width")==="auto"&&(this.width=this.height),i.length>0)for(o=i.length;o--;)s+=i[o];this.total=s;this.initTarget();this.radius=t.floor(t.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(n,t,r){var u=this.target.getShapeAt(n,t,r);return u!==i&&this.shapes[u]!==i?this.shapes[u]:i},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],percent:this.values[n]/this.total*100,color:this.options.get("sliceColors")[n%this.options.get("sliceColors").length],offset:n}},changeHighlight:function(n){var t=this.currentRegion,i=this.renderSlice(t,n),r=this.valueShapes[t];delete this.shapes[r];this.target.replaceWithShape(r,i);this.valueShapes[t]=i.id;this.shapes[i.id]=t},renderSlice:function(n,r){for(var p=this.target,f=this.options,h=this.radius,w=f.get("borderWidth"),c=f.get("offset"),b=2*t.PI,l=this.values,a=this.total,e=c?2*t.PI*(c/360):0,v,o,s,y=l.length,u=0;u<y;u++){if(v=e,o=e,a>0&&(o=e+b*(l[u]/a)),n===u)return s=f.get("sliceColors")[u%f.get("sliceColors").length],r&&(s=this.calcHighlightColor(s,f)),p.drawPieSlice(h,h,h-w,v,o,i,s);e=o}},render:function(){var e=this.target,o=this.values,s=this.options,r=this.radius,u=s.get("borderWidth"),f,n;if(b._super.render.call(this)){for(u&&e.drawCircle(r,r,t.floor(r-u/2),s.get("borderColor"),i,u).append(),n=o.length;n--;)o[n]&&(f=this.renderSlice(n).append(),this.valueShapes[n]=f.id,this.shapes[f.id]=n);e.render()}}});r.fn.sparkline.box=k=u(r.fn.sparkline._base,{type:"box",init:function(n,t,i,u,f){k._super.init.call(this,n,t,i,u,f);this.values=r.map(t,Number);this.width=i.get("width")==="auto"?"4.0em":u;this.initTarget();this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var n=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&n.push({field:"lo",value:this.loutlier}),this.routlier!==i&&n.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&n.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&n.push({field:"rw",value:this.rwhisker}),n},render:function(){var s=this.target,r=this.values,g=r.length,n=this.options,nt=this.canvasWidth,u=this.canvasHeight,e=n.get("chartRangeMin")===i?t.min.apply(t,r):n.get("chartRangeMin"),it=n.get("chartRangeMax")===i?t.max.apply(t,r):n.get("chartRangeMax"),o=0,h,w,tt,a,p,v,c,b,y,d,f;if(k._super.render.call(this)){if(n.get("raw"))n.get("showOutliers")&&r.length>5?(w=r[0],h=r[1],a=r[2],p=r[3],v=r[4],c=r[5],b=r[6]):(h=r[0],a=r[1],p=r[2],v=r[3],c=r[4]);else if(r.sort(function(n,t){return n-t}),a=l(r,1),p=l(r,2),v=l(r,3),tt=v-a,n.get("showOutliers")){for(h=c=i,y=0;y<g;y++)h===i&&r[y]>a-tt*n.get("outlierIQR")&&(h=r[y]),r[y]<v+tt*n.get("outlierIQR")&&(c=r[y]);w=r[0];b=r[g-1]}else h=r[0],c=r[g-1];this.quartiles=[a,p,v];this.lwhisker=h;this.rwhisker=c;this.loutlier=w;this.routlier=b;f=nt/(it-e+1);n.get("showOutliers")&&(o=t.ceil(n.get("spotRadius")),nt-=2*t.ceil(n.get("spotRadius")),f=nt/(it-e+1),w<h&&s.drawCircle((w-e)*f+o,u/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append(),b>c&&s.drawCircle((b-e)*f+o,u/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append());s.drawRect(t.round((a-e)*f+o),t.round(u*.1),t.round((v-a)*f),t.round(u*.8),n.get("boxLineColor"),n.get("boxFillColor")).append();s.drawLine(t.round((h-e)*f+o),t.round(u/2),t.round((a-e)*f+o),t.round(u/2),n.get("lineColor")).append();s.drawLine(t.round((h-e)*f+o),t.round(u/4),t.round((h-e)*f+o),t.round(u-u/4),n.get("whiskerColor")).append();s.drawLine(t.round((c-e)*f+o),t.round(u/2),t.round((v-e)*f+o),t.round(u/2),n.get("lineColor")).append();s.drawLine(t.round((c-e)*f+o),t.round(u/4),t.round((c-e)*f+o),t.round(u-u/4),n.get("whiskerColor")).append();s.drawLine(t.round((p-e)*f+o),t.round(u*.1),t.round((p-e)*f+o),t.round(u*.9),n.get("medianColor")).append();n.get("target")&&(d=t.ceil(n.get("spotRadius")),s.drawLine(t.round((n.get("target")-e)*f+o),t.round(u/2-d),t.round((n.get("target")-e)*f+o),t.round(u/2+d),n.get("targetColor")).append(),s.drawLine(t.round((n.get("target")-e)*f+o-d),t.round(u/2),t.round((n.get("target")-e)*f+o+d),t.round(u/2),n.get("targetColor")).append());s.render()}}});yt=u({init:function(n,t,i,r){this.target=n;this.id=t;this.type=i;this.args=r},append:function(){return this.target.appendShape(this),this}});d=u({_pxregex:/(\d+)(px)?\s*$/i,init:function(n,t,i){n&&(this.width=n,this.height=t,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),r.data(i,"_jqs_vcanvas",this))},drawLine:function(n,t,i,r,u,f){return this.drawShape([[n,t],[i,r]],u,f)},drawShape:function(n,t,i,r){return this._genShape("Shape",[n,t,i,r])},drawCircle:function(n,t,i,r,u,f){return this._genShape("Circle",[n,t,i,r,u,f])},drawPieSlice:function(n,t,i,r,u,f,e){return this._genShape("PieSlice",[n,t,i,r,u,f,e])},drawRect:function(n,t,i,r,u,f){return this._genShape("Rect",[n,t,i,r,u,f])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(n,t){r(t).html(n)},_calculatePixelDims:function(n,t,i){var u;u=this._pxregex.exec(t);this.pixelHeight=u?u[1]:r(i).height();u=this._pxregex.exec(n);this.pixelWidth=u?u[1]:r(i).width()},_genShape:function(n,t){var i=wt++;return t.unshift(i),new yt(this,i,n,t)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}});g=u(d,{init:function(t,u,f,e){g._super.init.call(this,t,u,f);this.canvas=n.createElement("canvas");f[0]&&(f=f[0]);r.data(f,"_jqs_vcanvas",this);r(this.canvas).css({display:"inline-block",width:t,height:u,verticalAlign:"top"});this._insert(this.canvas,f);this._calculatePixelDims(t,u,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;this.interact=e;this.shapes={};this.shapeseq=[];this.currentTargetShapeId=i;r(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(n,t,r){var u=this.canvas.getContext("2d");return n!==i&&(u.strokeStyle=n),u.lineWidth=r===i?1:r,t!==i&&(u.fillStyle=t),u},reset:function(){var n=this._getContext();n.clearRect(0,0,this.pixelWidth,this.pixelHeight);this.shapes={};this.shapeseq=[];this.currentTargetShapeId=i},_drawShape:function(n,t,r,u,f){var e=this._getContext(r,u,f),o,s;for(e.beginPath(),e.moveTo(t[0][0]+.5,t[0][1]+.5),o=1,s=t.length;o<s;o++)e.lineTo(t[o][0]+.5,t[o][1]+.5);r!==i&&e.stroke();u!==i&&e.fill();this.targetX!==i&&this.targetY!==i&&e.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n)},_drawCircle:function(n,r,u,f,e,o,s){var h=this._getContext(e,o,s);h.beginPath();h.arc(r,u,f,0,2*t.PI,!1);this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n);e!==i&&h.stroke();o!==i&&h.fill()},_drawPieSlice:function(n,t,r,u,f,e,o,s){var h=this._getContext(o,s);h.beginPath();h.moveTo(t,r);h.arc(t,r,u,f,e,!1);h.lineTo(t,r);h.closePath();o!==i&&h.stroke();s&&h.fill();this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n)},_drawRect:function(n,t,i,r,u,f,e){return this._drawShape(n,[[t,i],[t+r,i],[t+r,i+u],[t,i+u],[t,i]],f,e)},appendShape:function(n){return this.shapes[n.id]=n,this.shapeseq.push(n.id),this.lastShapeId=n.id,n.id},replaceWithShape:function(n,t){var r=this.shapeseq,i;for(this.shapes[t.id]=t,i=r.length;i--;)r[i]==n&&(r[i]=t.id);delete this.shapes[n]},replaceWithShapes:function(n,t){for(var r=this.shapeseq,f={},u,e,i=n.length;i--;)f[n[i]]=!0;for(i=r.length;i--;)u=r[i],f[u]&&(r.splice(i,1),delete this.shapes[u],e=i);for(i=t.length;i--;)r.splice(e,0,t[i].id),this.shapes[t[i].id]=t[i]},insertAfterShape:function(n,t){for(var r=this.shapeseq,i=r.length;i--;)if(r[i]===n){r.splice(i+1,0,t.id);this.shapes[t.id]=t;return}},removeShapeId:function(n){for(var i=this.shapeseq,t=i.length;t--;)if(i[t]===n){i.splice(t,1);break}delete this.shapes[n]},getShapeAt:function(n,t,i){return this.targetX=t,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var i=this.shapeseq,u=this.shapes,f=i.length,e=this._getContext(),r,t,n;for(e.clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;n<f;n++)r=i[n],t=u[r],this["_draw"+t.type].apply(this,t.args);this.interact||(this.shapes={},this.shapeseq=[])}});nt=u(d,{init:function(t,i,u){var f;nt._super.init.call(this,t,i,u);u[0]&&(u=u[0]);r.data(u,"_jqs_vcanvas",this);this.canvas=n.createElement("span");r(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:i,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,u);this._calculatePixelDims(t,i,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;f='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"><\/v:group>';this.canvas.insertAdjacentHTML("beforeEnd",f);this.group=r(this.canvas).children()[0];this.rendered=!1;this.prerender=""},_drawShape:function(n,t,r,u,f){for(var e=[],s,h,c,l,a,o=0,v=t.length;o<v;o++)e[o]=""+t[o][0]+","+t[o][1];return s=e.splice(0,1),f=f===i?1:f,h=r===i?' stroked="false" ':' strokeWeight="'+f+'px" strokeColor="'+r+'" ',c=u===i?' filled="false"':' fillColor="'+u+'" filled="true" ',l=e[0]===e[e.length-1]?"x ":"",a='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+n+'" '+h+c+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+s+" l "+e.join(", ")+" "+l+'e"> <\/v:shape>',a},_drawCircle:function(n,t,r,u,f,e,o){var s,h,c;return t-=u,r-=u,s=f===i?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+f+'" ',h=e===i?' filled="false"':' fillColor="'+e+'" filled="true" ',c='<v:oval  id="jqsshape'+n+'" '+s+h+' style="position:absolute;top:'+r+"px; left:"+t+"px; width:"+u*2+"px; height:"+u*2+'px"><\/v:oval>',c},_drawPieSlice:function(n,r,u,f,e,o,s,h){var y,c,l,a,v,p,w,b;if(e===o)return"";if(o-e==2*t.PI&&(e=0,o=2*t.PI),c=r+t.round(t.cos(e)*f),l=u+t.round(t.sin(e)*f),a=r+t.round(t.cos(o)*f),v=u+t.round(t.sin(o)*f),c===a&&l===v){if(o-e<t.PI)return"";c=a=r+f;l=v=u}return c===a&&l===v&&o-e<t.PI?"":(y=[r-f,u-f,r+f,u+f,c,l,a,v],p=s===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+s+'" ',w=h===i?' filled="false"':' fillColor="'+h+'" filled="true" ',b='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+n+'" '+p+w+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+r+","+u+" wa "+y.join(", ")+' x e"> <\/v:shape>',b)},_drawRect:function(n,t,i,r,u,f,e){return this._drawShape(n,[[t,i],[t,i+u],[t+r,i+u],[t+r,i],[t,i]],f,e)},reset:function(){this.group.innerHTML=""},appendShape:function(n){var t=this["_draw"+n.type].apply(this,n.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=n.id,n.id},replaceWithShape:function(n,t){var i=r("#jqsshape"+n),u=this["_draw"+t.type].apply(this,t.args);i[0].outerHTML=u},replaceWithShapes:function(n,t){for(var f=r("#jqsshape"+n[0]),u="",e=t.length,i=0;i<e;i++)u+=this["_draw"+t[i].type].apply(this,t[i].args);for(f[0].outerHTML=u,i=1;i<n.length;i++)r("#jqsshape"+n[i]).remove()},insertAfterShape:function(n,t){var i=r("#jqsshape"+n),u=this["_draw"+t.type].apply(this,t.args);i[0].insertAdjacentHTML("afterEnd",u)},removeShapeId:function(n){var t=r("#jqsshape"+n);this.group.removeChild(t[0])},getShapeAt:function(n){return n.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math),function(){function ro(n){for(var t=-1,r=n.length,i=[];++t<r;)i.push(n[t]);return i}function uo(n){return Array.prototype.slice.call(n)}function fo(){return this}function vi(n){return n!=null&&!isNaN(n)}function eo(n){return n.length}function oo(n){return n==null}function ru(n){return n.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function uu(){}function so(){function t(){for(var t=n,i=-1,u=t.length,r;++i<u;)(r=t[i])._on&&r.apply(this,arguments)}var n=[],i={};return t.on=function(r,u){var f,e;return(f=i[r])&&(f._on=!1,n=n.slice(0,e=n.indexOf(f)).concat(n.slice(e+1)),delete i[r]),u&&(u._on=!0,n.push(u),i[r]=u),t},t}function fu(n,t){return t-(n?1+Math.floor(Math.log(n+Math.pow(10,1+Math.floor(Math.log(n)/Math.LN10)-t))/Math.LN10):1)}function ho(n){return n+""}function eu(n){for(var t=n.lastIndexOf("."),r=t>=0?n.substring(t):(t=n.length,""),i=[];t>0;)i.push(n.substring(t-=3,t+3));return i.reverse().join(",")+r}function co(n,t){return{scale:Math.pow(10,(8-t)*3),symbol:n}}function lo(n){return function(t){return t<=0?0:t>=1?1:n(t)}}function ou(n){return function(t){return 1-n(1-t)}}function su(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function ao(n){return n}function yi(n){return function(t){return Math.pow(t,n)}}function vo(n){return 1-Math.cos(n*Math.PI/2)}function yo(n){return Math.pow(2,10*(n-1))}function po(n){return 1-Math.sqrt(1-n*n)}function wo(n,t){var i;return arguments.length<2&&(t=.45),arguments.length<1?(n=1,i=t/4):i=t/(2*Math.PI)*Math.asin(1/n),function(r){return 1+n*Math.pow(2,10*-r)*Math.sin((r-i)*2*Math.PI/t)}}function bo(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function ko(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function y(){d3.event.stopPropagation();d3.event.preventDefault()}function hu(n){return n=="transform"?d3.interpolateTransform:d3.interpolate}function go(n,t){return t=t-(n=+n)?1/(t-n):0,function(i){return(i-n)*t}}function ns(n,t){return t=t-(n=+n)?1/(t-n):0,function(i){return Math.max(0,Math.min(1,(i-n)*t))}}function c(n,t,i){return new p(n,t,i)}function p(n,t,i){this.r=n;this.g=t;this.b=i}function nt(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function pi(n,t,i){var r=0,u=0,f=0,o,e,s;if(o=/([a-z]+)\((.*)\)/i.exec(n),o){e=o[2].split(",");switch(o[1]){case"hsl":return i(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return t(wi(e[0]),wi(e[1]),wi(e[2]))}}return(s=ut[n])?t(s.r,s.g,s.b):(n!=null&&n.charAt(0)==="#"&&(n.length===4?(r=n.charAt(1),r+=r,u=n.charAt(2),u+=u,f=n.charAt(3),f+=f):n.length===7&&(r=n.substring(1,3),u=n.substring(3,5),f=n.substring(5,7)),r=parseInt(r,16),u=parseInt(u,16),f=parseInt(f,16)),t(r,u,f))}function cu(n,t,i){var f=Math.min(n/=255,t/=255,i/=255),r=Math.max(n,t,i),u=r-f,e,o,s=(r+f)/2;return u?(o=s<.5?u/(r+f):u/(2-r-f),e=n==r?(t-i)/u+(t<i?6:0):t==r?(i-n)/u+2:(n-t)/u+4,e*=60):o=e=0,tt(e,o,s)}function wi(n){var t=parseFloat(n);return n.charAt(n.length-1)==="%"?Math.round(t*2.55):t}function tt(n,t,i){return new w(n,t,i)}function w(n,t,i){this.h=n;this.s=t;this.l=i}function kt(n,t,i){function e(n){return n>360?n-=360:n<0&&(n+=360),n<60?r+(u-r)*n/60:n<180?u:n<240?r+(u-r)*(240-n)/60:r}function f(n){return Math.round(e(n)*255)}var r,u;return n%=360,n<0&&(n+=360),t=t<0?0:t>1?1:t,i=i<0?0:i>1?1:i,u=i<=.5?i*(1+t):i+t-i*t,r=2*i-u,c(f(n+120),f(n),f(n-120))}function o(t){return ii(t,n),t}function lu(n){return function(){return lt(n,this)}}function au(n){return function(){return vr(n,this)}}function vu(n,t){function f(){if(t=this.classList)return t.add(n);var t=this.className,u=t.baseVal!=null,i=u?t.baseVal:t;r.lastIndex=0;r.test(i)||(i=ru(i+" "+n),u?t.baseVal=i:this.className=i)}function e(){if(t=this.classList)return t.remove(n);var t=this.className,u=t.baseVal!=null,i=u?t.baseVal:t;i=ru(i.replace(r," "));u?t.baseVal=i:this.className=i}function o(){(t.apply(this,arguments)?f:e).call(this)}var r=new RegExp("(^|\\s+)"+d3.requote(n)+"(\\s+|$)","g"),u,i;return arguments.length<2?(u=this.node(),i=u.classList)?i.contains(n):(i=u.className,r.lastIndex=0,r.test(i.baseVal!=null?i.baseVal:i)):this.each(typeof t=="function"?o:t?f:e)}function bi(n){return{__data__:n}}function ts(n){return arguments.length||(n=d3.ascending),function(t,i){return n(t&&t.__data__,i&&i.__data__)}}function is(n){return ii(n,k),n}function ki(n,t,i){ii(n,r);var u={},f=d3.dispatch("start","end"),e=tc;return n.id=t,n.time=i,n.tween=function(t,i){return arguments.length<2?u[t]:(i==null?delete u[t]:u[t]=i,n)},n.ease=function(t){return arguments.length?(e=typeof t=="function"?t:d3.ease.apply(d3,arguments),n):e},n.each=function(t,i){return arguments.length<2?us.call(n,t):(f.on(t,i),n)},d3.timer(function(r){return n.each(function(o,s,h){function p(n){if(l.active>t)return a();l.active=t;for(var r in u)(r=u[r].call(c,o,s))&&v.push(r);return f.start.call(c,o,s),w(n)||d3.timer(w,0,i),1}function w(n){if(l.active!==t)return a();for(var i=(n-y)/b,u=e(i),r=v.length;r>0;)v[--r].call(c,u);if(i>=1)return a(),et=t,f.end.call(c,o,s),et=0,1}function a(){return--l.count||delete c.__transition__,1}var v=[],c=this,y=n[h][s].delay,b=n[h][s].duration,l=c.__transition__||(c.__transition__={active:0,count:0});++l.count;y<=r?p(r):d3.timer(p,y,i)}),1},0,i),n}function rs(n,t,i){return i!=""&&at}function yu(n,t){function r(n,r,u){var f=t.call(this,n,r);return f==null?u!=""&&at:u!=f&&i(u,f)}function u(n,r,u){return u!=t&&i(u,t)}var i=hu(n);return typeof t=="function"?r:t==null?rs:(t+="",u)}function us(n){for(var i,t=0,u=this.length;t<u;t++)for(var f=this[t],r=0,e=f.length;r<e;r++)i=f[r],i&&n.call(i=i.node,i.__data__,r,t);return this}function di(){for(var i,r=Date.now(),n=a,t;n;)i=r-n.then,i>=n.delay&&(n.flush=n.callback(i)),n=n.next;t=pu()-r;t>24?(isFinite(t)&&(clearTimeout(ui),ui=setTimeout(di,t)),ri=0):(ri=1,yr(di))}function pu(){for(var t=null,n=a,i=Infinity;n;)n.flush?n=t?t.next=n.next:a=n.next:(i=Math.min(i,n.then+n.delay),n=(t=n).next);return i}function wu(n){var t=[n.a,n.b],r=[n.c,n.d],f=ku(t),u=bu(t,r),i=ku(fs(r,t,-u));this.translate=[n.e,n.f];this.rotate=Math.atan2(n.b,n.a)*wr;this.scale=[f,i||0];this.skew=i?u/i*wr:0}function bu(n,t){return n[0]*t[0]+n[1]*t[1]}function ku(n){var t=Math.sqrt(bu(n,n));return n[0]/=t,n[1]/=t,t}function fs(n,t,i){return n[0]+=i*t[0],n[1]+=i*t[1],n}function b(n){var t=n[0],i=n[n.length-1];return t<i?[t,i]:[i,t]}function gi(n,t){var f=0,e=n.length-1,r=n[f],u=n[e],i;return u<r&&(i=f,f=e,e=i,i=r,r=u,u=i),(i=u-r)&&(t=t(i),n[f]=t.floor(r),n[e]=t.ceil(u)),n}function es(){return Math}function du(n,t,i,r){function f(){var f=n.length==2?os:ss,s=r?ns:go;return e=f(n,t,s,i),o=f(t,n,s,d3.interpolate),u}function u(n){return e(n)}var e,o;return u.invert=function(n){return o(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),f()):n},u.range=function(n){return arguments.length?(t=n,f()):t},u.rangeRound=function(n){return u.range(n).interpolate(d3.interpolateRound)},u.clamp=function(n){return arguments.length?(r=n,f()):r},u.interpolate=function(n){return arguments.length?(i=n,f()):i},u.ticks=function(t){return rf(n,t)},u.tickFormat=function(t){return uf(n,t)},u.nice=function(){return gi(n,nf),f()},u.copy=function(){return du(n,t,i,r)},f()}function gu(n,t){return n.range=d3.rebind(n,t.range),n.rangeRound=d3.rebind(n,t.rangeRound),n.interpolate=d3.rebind(n,t.interpolate),n.clamp=d3.rebind(n,t.clamp),n}function nf(n){return n=Math.pow(10,Math.round(Math.log(n)/Math.LN10)-1),{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}}function tf(n,t){var r=b(n),f=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(f/t)/Math.LN10)),u=t/f*i;return u<=.15?i*=10:u<=.35?i*=5:u<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+i*.5,r[2]=i,r}function rf(n,t){return d3.range.apply(d3,tf(n,t))}function uf(n,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log(tf(n,t)[2])/Math.LN10+.01))+"f")}function os(n,t,i,r){var u=i(n[0],n[1]),f=r(t[0],t[1]);return function(n){return f(u(n))}}function ss(n,t,i,r){for(var f=[],e=[],u=0,o=n.length;++u<o;)f.push(i(n[u-1],n[u])),e.push(r(t[u-1],t[u]));return function(t){var i=d3.bisect(n,t,1,n.length-1)-1;return e[i](f[i](t))}}function ff(n,t){function i(i){return n(t(i))}var r=t.pow;return i.invert=function(t){return r(n.invert(t))},i.domain=function(u){return arguments.length?(t=u[0]<0?dt:nr,r=t.pow,n.domain(u.map(t)),i):n.domain().map(r)},i.nice=function(){return n.domain(gi(n.domain(),es)),i},i.ticks=function(){var o=b(n.domain()),u=[],f;if(o.every(isFinite)){var i=Math.floor(o[0]),e=Math.ceil(o[1]),s=Math.round(r(o[0])),h=Math.round(r(o[1]));if(t===dt)for(u.push(r(i));i++<e;)for(f=9;f>0;f--)u.push(r(i)*f);else{for(;i<e;i++)for(f=1;f<10;f++)u.push(r(i)*f);u.push(r(i))}for(i=0;u[i]<s;i++);for(e=u.length;u[e-1]>h;e--);u=u.slice(i,e)}return u},i.tickFormat=function(n,u){if(arguments.length<2&&(u=ae),arguments.length<1)return u;var e=n/i.ticks().length,o=t===dt?(f=-1e-15,Math.floor):(f=1e-15,Math.ceil),f;return function(n){return n/r(o(t(n)+f))<e?u(n):""}},i.copy=function(){return ff(n.copy(),t)},gu(i,n)}function nr(n){return Math.log(n)/Math.LN10}function dt(n){return-Math.log(-n)/Math.LN10}function ef(n,t){function i(t){return n(r(t))}var r=gt(t),u=gt(1/t);return i.invert=function(t){return u(n.invert(t))},i.domain=function(t){return arguments.length?(n.domain(t.map(r)),i):n.domain().map(u)},i.ticks=function(n){return rf(i.domain(),n)},i.tickFormat=function(n){return uf(i.domain(),n)},i.nice=function(){return i.domain(gi(i.domain(),nf))},i.exponent=function(n){if(!arguments.length)return t;var f=i.domain();return r=gt(t=n),u=gt(1/t),i.domain(f)},i.copy=function(){return ef(n.copy(),t)},gu(i,n)}function gt(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function of(n,t){function i(t){return r[((u[t]||(u[t]=n.push(t)))-1)%r.length]}function e(t,i){return d3.range(n.length).map(function(n){return t+i*n})}var u,r,f;return i.domain=function(r){if(!arguments.length)return n;n=[];u={};for(var e=-1,o=r.length,f;++e<o;)u[f=r[e]]||(u[f]=n.push(f));return i[t.t](t.x,t.p)},i.range=function(n){return arguments.length?(r=n,f=0,t={t:"range",x:n},i):r},i.rangePoints=function(u,o){arguments.length<2&&(o=0);var s=u[0],h=u[1],c=(h-s)/(n.length-1+o);return r=e(n.length<2?(s+h)/2:s+c*o/2,c),f=0,t={t:"rangePoints",x:u,p:o},i},i.rangeBands=function(u,o){arguments.length<2&&(o=0);var h=u[0],c=u[1],s=(c-h)/(n.length+o);return r=e(h+s*o,s),f=s*(1-o),t={t:"rangeBands",x:u,p:o},i},i.rangeRoundBands=function(u,o){arguments.length<2&&(o=0);var s=u[0],c=u[1],h=Math.floor((c-s)/(n.length+o));return r=e(s+Math.round((c-s-(n.length-o)*h)/2),h),f=Math.round(h*(1-o)),t={t:"rangeRoundBands",x:u,p:o},i},i.rangeBand=function(){return f},i.copy=function(){return of(n,t)},i.domain(n)}function sf(n,t){function u(){var u=0,e=n.length,f=t.length;for(r=[];++u<f;)r[u-1]=d3.quantile(n,u/f);return i}function i(n){return isNaN(n=+n)?NaN:t[d3.bisect(r,n)]}var r;return i.domain=function(t){return arguments.length?(n=t.filter(function(n){return!isNaN(n)}).sort(d3.ascending),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.quantiles=function(){return r},i.copy=function(){return sf(n,t)},u()}function hf(n,t,i){function r(t){return i[Math.max(0,Math.min(e,Math.floor(f*(t-n))))]}function u(){return f=i.length/(t-n),e=i.length-1,r}var f,e;return r.domain=function(i){return arguments.length?(n=+i[0],t=+i[i.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(i=n,u()):i},r.copy=function(){return hf(n,t,i)},u()}function hs(n){return n.innerRadius}function cs(n){return n.outerRadius}function cf(n){return n.startAngle}function lf(n){return n.endAngle}function af(n){function t(t){return t.length<1?null:"M"+e(n(tr(this,t,i,r)),f)}var i=ir,r=vf,u="linear",e=br[u],f=.7;return t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(r=n,t):r},t.interpolate=function(n){return arguments.length?(e=br[u=n],t):u},t.tension=function(n){return arguments.length?(f=n,t):f},t}function tr(n,t,i,r){var f=[],u=-1,e=t.length,o=typeof i=="function",s=typeof r=="function",h;if(o&&s)while(++u<e)f.push([i.call(n,h=t[u],u),r.call(n,h,u)]);else if(o)while(++u<e)f.push([i.call(n,t[u],u),r]);else if(s)while(++u<e)f.push([i,r.call(n,t[u],u)]);else while(++u<e)f.push([i,r]);return f}function ir(n){return n[0]}function vf(n){return n[1]}function l(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("L",(t=n[i])[0],",",t[1]);return r.join("")}function rr(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("V",(t=n[i])[1],"H",t[0]);return r.join("")}function ur(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("H",(t=n[i])[0],"V",t[1]);return r.join("")}function ls(n,t){return n.length<4?l(n):n[1]+ni(n.slice(1,n.length-1),fr(n,t))}function as(n,t){return n.length<3?l(n):n[0]+ni((n.push(n[0]),n),fr([n[n.length-2]].concat(n,[n[1]]),t))}function vs(n,t){return n.length<3?l(n):n[0]+ni(n,fr(n,t))}function ni(n,t){var o,h;if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return l(n);var c=n.length!=t.length,f="",s=n[0],i=n[1],e=t[0],r=e,u=1;if(c&&(f+="Q"+(i[0]-e[0]*2/3)+","+(i[1]-e[1]*2/3)+","+i[0]+","+i[1],s=n[1],u=2),t.length>1)for(r=t[1],i=n[u],u++,f+="C"+(s[0]+e[0])+","+(s[1]+e[1])+","+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1],o=2;o<t.length;o++,u++)i=n[u],r=t[o],f+="S"+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1];return c&&(h=n[u],f+="Q"+(i[0]+r[0]*2/3)+","+(i[1]+r[1]*2/3)+","+h[0]+","+h[1]),f}function fr(n,t){for(var u=[],f=(1-t)/2,r,e=n[0],i=n[1],o=1,s=n.length;++o<s;)r=e,e=i,i=n[o],u.push([f*(i[0]-r[0]),f*(i[1]-r[1])]);return u}function yf(n){if(n.length<3)return l(n);var u=1,s=n.length,t=n[0],f=t[0],e=t[1],i=[f,f,f,(t=n[1])[0]],r=[e,e,e,t[1]],o=[f,",",e];for(ht(o,i,r);++u<s;)t=n[u],i.shift(),i.push(t[0]),r.shift(),r.push(t[1]),ht(o,i,r);for(u=-1;++u<2;)i.shift(),i.push(t[0]),r.shift(),r.push(t[1]),ht(o,i,r);return o.join("")}function ys(n){if(n.length<4)return l(n);for(var e=[],i=-1,o=n.length,t,r=[0],u=[0];++i<3;)t=n[i],r.push(t[0]),u.push(t[1]);for(e.push(f(ot,r)+","+f(ot,u)),--i;++i<o;)t=n[i],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),ht(e,r,u);return e.join("")}function ps(n){for(var e,i=-1,o=n.length,s=o+4,t,r=[],u=[];++i<4;)t=n[i%o],r.push(t[0]),u.push(t[1]);for(e=[f(ot,r),",",f(ot,u)],--i;++i<s;)t=n[i%o],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),ht(e,r,u);return e.join("")}function ws(n,t){for(var r=n.length-1,e=n[0][0],o=n[0][1],s=n[r][0]-e,h=n[r][1]-o,u=-1,i,f;++u<=r;)i=n[u],f=u/r,i[0]=t*i[0]+(1-t)*(e+f*s),i[1]=t*i[1]+(1-t)*(o+f*h);return yf(n)}function f(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function ht(n,t,i){n.push("C",f(ye,t),",",f(ye,i),",",f(pe,t),",",f(pe,i),",",f(ot,t),",",f(ot,i))}function er(n,t){return(t[1]-n[1])/(t[0]-n[0])}function bs(n){for(var t=0,e=n.length-1,i=[],f=n[0],r=n[1],u=i[0]=er(f,r);++t<e;)i[t]=u+(u=er(f=r,r=n[t+1]));return i[t]=u,i}function ks(n){for(var s=[],u,f,e,i,r=bs(n),t=-1,o=n.length-1;++t<o;)u=er(n[t],n[t+1]),Math.abs(u)<1e-6?r[t]=r[t+1]=0:(f=r[t]/u,e=r[t+1]/u,i=f*f+e*e,i>9&&(i=u*3/Math.sqrt(i),r[t]=i*f,r[t+1]=i*e));for(t=-1;++t<=o;)i=(n[Math.min(o,t+1)][0]-n[Math.max(0,t-1)][0])/(6*(1+r[t]*r[t])),s.push([i||0,r[t]*i||0]);return s}function ds(n){return n.length<3?l(n):n[0]+ni(n,ks(n))}function pf(n){for(var t,u=-1,f=n.length,i,r;++u<f;)t=n[u],i=t[0],r=t[1]+v,t[0]=i*Math.cos(r),t[1]=i*Math.sin(r);return n}function wf(n){function t(t){if(t.length<1)return null;var s=tr(this,t,u,f),c=tr(this,t,u===i?gs(s):i,f===r?nh(s):r);return"M"+e(n(c),o)+"L"+h(n(s.reverse()),o)+"Z"}var u=ir,i=ir,f=0,r=vf,s,e,h,o=.7;return t.x=function(n){return arguments.length?(u=i=n,t):i},t.x0=function(n){return arguments.length?(u=n,t):u},t.x1=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(f=r=n,t):r},t.y0=function(n){return arguments.length?(f=n,t):f},t.y1=function(n){return arguments.length?(r=n,t):r},t.interpolate=function(n){return arguments.length?(e=br[s=n],h=e.reverse||e,t):s},t.tension=function(n){return arguments.length?(o=n,t):o},t.interpolate("linear")}function gs(n){return function(t,i){return n[i][0]}}function nh(n){return function(t,i){return n[i][1]}}function bf(n){return n.source}function kf(n){return n.target}function th(n){return n.radius}function df(n){return[n.x,n.y]}function ih(n){return function(){var t=n.apply(this,arguments),i=t[0],r=t[1]+v;return[i*Math.cos(r),i*Math.sin(r)]}}function gf(n,t){var i=(n.ownerSVGElement||n).createSVGPoint(),r,u;return fi<0&&(window.scrollX||window.scrollY)&&(r=d3.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),u=r[0][0].getScreenCTM(),fi=!u.f&&!u.e,r.remove()),fi?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}function rh(){return 64}function uh(){return"circle"}function ne(n,t){n.attr("transform",function(n){return"translate("+t(n)+",0)"})}function te(n,t){n.attr("transform",function(n){return"translate(0,"+t(n)+")"})}function fh(n,t,i){if(u=[],i&&t.length>1){for(var o=b(n.domain()),u,f=-1,h=t.length,s=(t[1]-t[0])/++i,r,e;++f<h;)for(r=i;--r>0;)(e=+t[f]-r*s)>=o[0]&&u.push(e);for(--f,r=0;++r<i&&(e=+t[f]+r*s)<o[1];)u.push(e)}return u}function ie(n,t){n.select(".extent").attr("x",t[0][0]);n.selectAll(".n,.s,.w,.nw,.sw").attr("x",t[0][0]-2);n.selectAll(".e,.ne,.se").attr("x",t[1][0]-3);n.selectAll(".extent,.n,.s").attr("width",t[1][0]-t[0][0])}function re(n,t){n.select(".extent").attr("y",t[0][1]);n.selectAll(".n,.e,.w,.nw,.ne").attr("y",t[0][1]-3);n.selectAll(".s,.se,.sw").attr("y",t[1][1]-4);n.selectAll(".extent,.e,.w").attr("height",t[1][1]-t[0][1])}function eh(){d3.event.keyCode==32&&d&&!s&&(e=null,i[0]-=t[1][0],i[1]-=t[1][1],s=2,y())}function oh(){d3.event.keyCode==32&&s==2&&(i[0]+=t[1][0],i[1]+=t[1][1],s=0,y())}function or(){if(i){var n=d3.svg.mouse(d),r=d3.select(d);s||(d3.event.altKey?(e||(e=[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]),i[0]=t[+(n[0]<e[0])][0],i[1]=t[+(n[1]<e[1])][1]):e=null);oi&&(ue(n,oi,0),ie(r,t));si&&(ue(n,si,1),re(r,t));yt("brush")}}function ue(n,r,u){var h=b(r.range()),f=i[u],l=t[1][u]-t[0][u],o,c;s&&(h[0]-=f,h[1]-=l+f);o=Math.max(h[0],Math.min(h[1],n[u]));s?c=(o+=f)+l:(e&&(f=Math.max(h[0],Math.min(h[1],2*e[u]-o))),f<o?(c=o,o=f):c=f);t[0][u]=o;t[1][u]=c}function sh(){i&&(or(),d3.select(d).selectAll(".resize").style("pointer-events",dr.empty()?"none":"all"),yt("brushend"),dr=yt=d=oi=si=t=s=st=e=i=null,y())}function sr(n){var u=d3.event,t=g.parentNode,i=0,r=0;t&&(t=fe(t),i=t[0]-ci[0],r=t[1]-ci[1],ci=t,gr|=i|r);try{d3.event={dx:i,dy:r};be[n].apply(g,ke)}finally{d3.event=u}u.preventDefault()}function fe(n){var t=d3.event.changedTouches;return t?d3.svg.touches(n,t)[0]:d3.svg.mouse(n)}function ee(){if(g){var n=g.parentNode;if(!n)return hr();sr("drag");y()}}function hr(){g&&(sr("dragend"),g=null,gr&&hi===d3.event.target&&(nu=!0,y()))}function hh(){nu&&hi===d3.event.target&&(y(),nu=!1,hi=null)}function ti(n){return[n[0]-u[0],n[1]-u[1],u[2]]}function ch(){pt||(pt=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var n=d3.event,t;try{pt.scrollTop=1e3;pt.dispatchEvent(n);t=1e3-pt.scrollTop}catch(i){t=n.wheelDelta||-n.detail*5}return t*.005}function oe(){for(var n=d3.svg.touches(h),t=-1,r=n.length,i;++t<r;)bt[(i=n[t]).identifier]=ti(i);return n}function lh(){var n=d3.svg.touches(h),i;switch(n.length){case 1:i=n[0];it(u[2],i,bt[i.identifier]);break;case 2:var r=n[0],f=n[1],o=[(r[0]+f[0])/2,(r[1]+f[1])/2],t=bt[r.identifier],e=bt[f.identifier],s=[(t[0]+e[0])/2,(t[1]+e[1])/2,t[2]];it(Math.log(d3.event.scale)/Math.LN2+t[2],o,s)}}function se(){li=null;wt&&(tu=!0,it(u[2],d3.svg.mouse(h),wt))}function ah(){wt&&(tu&&ai===d3.event.target&&(iu=!0),se(),wt=null)}function vh(){iu&&ai===d3.event.target&&(d3.event.stopPropagation(),d3.event.preventDefault(),iu=!1,ai=null)}function it(n,t,i){function f(n,t,i){n.domain(n.range().map(function(u){return n.invert((u-i)*l/r+t)}))}n=cr(n,2);var l=Math.pow(2,u[2]),r=Math.pow(2,n),e=Math.pow(2,(u[2]=n)-i[2]),a=u[0],v=u[1],o=u[0]=cr(t[0]-i[0]*e,0,r),s=u[1]=cr(t[1]-i[1]*e,1,r),c=d3.event;d3.event={scale:r,translate:[o,s],transform:function(n,t){n&&f(n,a,o);t&&f(t,v,s)}};try{no.apply(h,to)}finally{d3.event=c}c.preventDefault()}function cr(n,t,i){var f=ge[t],r=f[0],u=f[1];return arguments.length===3?Math.max(u*(u===Infinity?-Infinity:1/i-1),Math.min(r===-Infinity?Infinity:r,n/i))*i:Math.max(r,Math.min(u,n))}var lr,he,rt,ii,ce,ct,ut,ar,lt,vr,n,le,ft,k,a,ri,ui,yr,pr,wr,ae,v,ve,fi,ei,vt,kr,dr,yt,d,oi,si,t,s,st,e,i,we,be,hi,g,ke,ci,gr,nu;Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(hc){lr=CSSStyleDeclaration.prototype;he=lr.setProperty;lr.setProperty=function(n,t,i){he.call(this,n,t+"",i)}}d3={version:"2.5.0"};rt=uo;try{rt(document.documentElement.childNodes)[0].nodeType}catch(cc){rt=ro}ii=[].__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var i in t)n[i]=t[i]};d3.functor=function(n){return typeof n=="function"?n:function(){return n}};d3.rebind=function(n,t){return function(){var i=t.apply(n,arguments);return arguments.length?n:i}};d3.ascending=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN};d3.descending=function(n,t){return t<n?-1:t>n?1:t>=n?0:NaN};d3.mean=function(n,t){var e=n.length,u,i=0,r=-1,f=0;if(arguments.length===1)while(++r<e)vi(u=n[r])&&(i+=(u-i)/++f);else while(++r<e)vi(u=t.call(n,n[r],r))&&(i+=(u-i)/++f);return f?i:undefined};d3.median=function(n,t){return arguments.length>1&&(n=n.map(t)),n=n.filter(vi),n.length?d3.quantile(n.sort(d3.ascending),.5):undefined};d3.min=function(n,t){var r=-1,f=n.length,i,u;if(arguments.length===1){while(++r<f&&((i=n[r])==null||i!=i))i=undefined;while(++r<f)(u=n[r])!=null&&i>u&&(i=u)}else{while(++r<f&&((i=t.call(n,n[r],r))==null||i!=i))i=undefined;while(++r<f)(u=t.call(n,n[r],r))!=null&&i>u&&(i=u)}return i};d3.max=function(n,t){var r=-1,f=n.length,i,u;if(arguments.length===1){while(++r<f&&((i=n[r])==null||i!=i))i=undefined;while(++r<f)(u=n[r])!=null&&u>i&&(i=u)}else{while(++r<f&&((i=t.call(n,n[r],r))==null||i!=i))i=undefined;while(++r<f)(u=t.call(n,n[r],r))!=null&&u>i&&(i=u)}return i};d3.extent=function(n,t){var r=-1,e=n.length,i,u,f;if(arguments.length===1){while(++r<e&&((i=f=n[r])==null||i!=i))i=f=undefined;while(++r<e)(u=n[r])!=null&&(i>u&&(i=u),f<u&&(f=u))}else{while(++r<e&&((i=f=t.call(n,n[r],r))==null||i!=i))i=undefined;while(++r<e)(u=t.call(n,n[r],r))!=null&&(i>u&&(i=u),f<u&&(f=u))}return[i,f]};d3.random={normal:function(n,t){return arguments.length<2&&(t=1),arguments.length<1&&(n=0),function(){var r,u,i;do r=Math.random()*2-1,u=Math.random()*2-1,i=r*r+u*u;while(!i||i>1);return n+t*r*Math.sqrt(-2*Math.log(i)/i)}}};d3.sum=function(n,t){var u=0,f=n.length,r,i=-1;if(arguments.length===1)while(++i<f)isNaN(r=+n[i])||(u+=r);else while(++i<f)isNaN(r=+t.call(n,n[i],i))||(u+=r);return u};d3.quantile=function(n,t){var u=(n.length-1)*t+1,i=Math.floor(u),r=n[i-1],f=u-i;return f?r+f*(n[i]-r):r};d3.zip=function(){var n,i,f;if(!(i=arguments.length))return[];for(var t=-1,r=d3.min(arguments,eo),u=new Array(r);++t<r;)for(n=-1,f=u[t]=new Array(i);++n<i;)f[n]=arguments[n][t];return u};d3.bisectLeft=function(n,t,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=n.length);i<r;){var u=i+r>>1;n[u]<t?i=u+1:r=u}return i};d3.bisect=d3.bisectRight=function(n,t,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=n.length);i<r;){var u=i+r>>1;t<n[u]?r=u:i=u+1}return i};d3.first=function(n,t){var r=0,f=n.length,i=n[0],u;for(arguments.length===1&&(t=d3.ascending);++r<f;)t.call(n,i,u=n[r])>0&&(i=u);return i};d3.last=function(n,t){var r=0,f=n.length,i=n[0],u;for(arguments.length===1&&(t=d3.ascending);++r<f;)t.call(n,i,u=n[r])<=0&&(i=u);return i};d3.nest=function(){function i(f,e){if(e>=t.length)return u?u.call(n,f):r?f.sort(r):f;for(var c=-1,l=f.length,a=t[e++],s,h,o={};++c<l;)(s=a(h=f[c]))in o?o[s].push(h):o[s]=[h];for(s in o)o[s]=i(o[s],e);return o}function f(n,i){if(i>=t.length)return n;var r=[],u=e[i++];for(var o in n)r.push({key:o,values:f(n[o],i)});return u&&r.sort(function(n,t){return u(n.key,t.key)}),r}var n={},t=[],e=[],r,u;return n.map=function(n){return i(n,0)},n.entries=function(n){return f(i(n,0),0)},n.key=function(i){return t.push(i),n},n.sortKeys=function(i){return e[t.length-1]=i,n},n.sortValues=function(t){return r=t,n},n.rollup=function(t){return u=t,n},n};d3.keys=function(n){var t=[];for(var i in n)t.push(i);return t};d3.values=function(n){var t=[];for(var i in n)t.push(n[i]);return t};d3.entries=function(n){var t=[];for(var i in n)t.push({key:i,value:n[i]});return t};d3.permute=function(n,t){for(var r=[],i=-1,u=t.length;++i<u;)r[i]=n[t[i]];return r};d3.merge=function(n){return Array.prototype.concat.apply([],n)};d3.split=function(n,t){var u=[],i=[],f,r=-1,e=n.length;for(arguments.length<2&&(t=oo);++r<e;)t.call(i,f=n[r],r)?i=[]:(i.length||u.push(i),i.push(f));return u};d3.range=function(n,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=n,n=0)),(t-n)/i==Infinity)throw new Error("infinite range");var u=[],f=-1,r;if(i<0)while((r=n+i*++f)>t)u.push(r);else while((r=n+i*++f)<t)u.push(r);return u};d3.requote=function(n){return n.replace(ce,"\\$&")};ce=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(n,t){return t?Math.round(n*Math.pow(10,t))*Math.pow(10,-t):Math.round(n)};d3.xhr=function(n,t,i){var r=new XMLHttpRequest;arguments.length<3?i=t:t&&r.overrideMimeType&&r.overrideMimeType(t);r.open("GET",n,!0);r.onreadystatechange=function(){r.readyState===4&&i(r.status<300?r:null)};r.send(null)};d3.text=function(n,t,i){function r(n){i(n&&n.responseText)}arguments.length<3&&(i=t,t=null);d3.xhr(n,t,r)};d3.json=function(n,t){d3.text(n,"application/json",function(n){t(n?JSON.parse(n):null)})};d3.html=function(n,t){d3.text(n,"text/html",function(n){if(n!=null){var i=document.createRange();i.selectNode(document.body);n=i.createContextualFragment(n)}t(n)})};d3.xml=function(n,t,i){function r(n){i(n&&n.responseXML)}arguments.length<3&&(i=t,t=null);d3.xhr(n,t,r)};d3.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qualify:function(n){var t=n.indexOf(":");return t<0?n:{space:d3.ns.prefix[n.substring(0,t)],local:n.substring(t+1)}}};d3.dispatch=function(){for(var n=new uu,t=-1,i=arguments.length;++t<i;)n[arguments[t]]=so();return n};uu.prototype.on=function(n,t){var i=n.indexOf("."),r="";i>0&&(r=n.substring(i+1),n=n.substring(0,i));this[n].on(r,t)};d3.format=function(n){var i=yh.exec(n),s=i[1]||" ",l=i[3]||"",h=i[5],u=+i[6],e=i[7],r=i[8],t=i[9],f=1,o="",c=!1;r&&(r=+r.substring(1));h&&(s="0",e&&(u-=Math.floor((u-1)/4)));switch(t){case"n":e=!0;t="g";break;case"%":f=100;o="%";t="f";break;case"p":f=100;o="%";t="r";break;case"d":c=!0;r=0;break;case"s":f=-1;t="r"}return t=="r"&&!r&&(t="g"),t=ph[t]||ho,function(n){var a,v,i;return c&&n%1?"":(a=n<0&&(n=-n)?"â":l,f<0?(v=d3.formatPrefix(n,r),n*=v.scale,o=v.symbol):n*=f,n=t(n,r),h?(i=n.length+a.length,i<u&&(n=new Array(u-i+1).join(s)+n),e&&(n=eu(n)),n=a+n):(e&&(n=eu(n)),n=a+n,i=n.length,i<u&&(n=new Array(u-i+1).join(s)+n)),n+o)}};var yh=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,ph={g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return d3.round(n,t=fu(n,t)).toFixed(Math.max(0,Math.min(20,t)))}},wh=["y","z","a","f","p","n","Î¼","m","","k","M","G","T","P","E","Z","Y"].map(co);d3.formatPrefix=function(n,t){var i=0;return n&&(n<0&&(n*=-1),t&&(n=d3.round(n,fu(n,t))),i=1+Math.floor(1e-12+Math.log(n)/Math.LN10),i=Math.max(-24,Math.min(24,Math.floor((i<=0?i+1:i-1)/3)*3))),wh[8+i/3]};var bh=yi(2),kh=yi(3),dh={linear:function(){return ao},poly:yi,quad:function(){return bh},cubic:function(){return kh},sin:function(){return vo},exp:function(){return yo},circle:function(){return po},elastic:wo,back:bo,bounce:function(){return ko}},gh={"in":function(n){return n},out:ou,"in-out":su,"out-in":function(n){return su(ou(n))}};d3.ease=function(n){var t=n.indexOf("-"),i=t>=0?n.substring(0,t):n,r=t>=0?n.substring(t+1):"in";return lo(gh[r](dh[i].apply(null,Array.prototype.slice.call(arguments,1))))};d3.event=null;d3.interpolate=function(n,t){for(var i=d3.interpolators.length,r;--i>=0&&!(r=d3.interpolators[i](n,t)););return r};d3.interpolateNumber=function(n,t){return t-=n,function(i){return n+t*i}};d3.interpolateRound=function(n,t){return t-=n,function(i){return Math.round(n+t*i)}};d3.interpolateString=function(n,t){var s,u,f,h=0,c=0,r=[],e=[],o,i;for(ct.lastIndex=0,u=0;s=ct.exec(t);++u)s.index&&r.push(t.substring(h,c=s.index)),e.push({i:r.length,x:s[0]}),r.push(null),h=ct.lastIndex;for(h<t.length&&r.push(t.substring(h)),u=0,o=e.length;(s=ct.exec(n))&&u<o;++u)if(i=e[u],i.x==s[0]){if(i.i)if(r[i.i+1]==null)for(r[i.i-1]+=i.x,r.splice(i.i,1),f=u+1;f<o;++f)e[f].i--;else for(r[i.i-1]+=i.x+r[i.i+1],r.splice(i.i,2),f=u+1;f<o;++f)e[f].i-=2;else if(r[i.i+1]==null)r[i.i]=i.x;else for(r[i.i]=i.x+r[i.i+1],r.splice(i.i+1,1),f=u+1;f<o;++f)e[f].i--;e.splice(u,1);o--;u--}else i.x=d3.interpolateNumber(parseFloat(s[0]),parseFloat(i.x));while(u<o)i=e.pop(),r[i.i+1]==null?r[i.i]=i.x:(r[i.i]=i.x+r[i.i+1],r.splice(i.i+1,1)),o--;return r.length===1?r[0]==null?e[0].x:function(){return t}:function(n){for(u=0;u<o;++u)r[(i=e[u]).i]=i.x(n);return r.join("")}};d3.interpolateTransform=function(n,t){return d3.interpolateString(d3.transform(n)+"",d3.transform(t)+"")};d3.interpolateRgb=function(n,t){n=d3.rgb(n);t=d3.rgb(t);var i=n.r,r=n.g,u=n.b,f=t.r-i,e=t.g-r,o=t.b-u;return function(n){return"#"+nt(Math.round(i+f*n))+nt(Math.round(r+e*n))+nt(Math.round(u+o*n))}};d3.interpolateHsl=function(n,t){n=d3.hsl(n);t=d3.hsl(t);var i=n.h,r=n.s,u=n.l,f=t.h-i,e=t.s-r,o=t.l-u;return function(n){return kt(i+f*n,r+e*n,u+o*n).toString()}};d3.interpolateArray=function(n,t){for(var u=[],r=[],e=n.length,o=t.length,f=Math.min(n.length,t.length),i=0;i<f;++i)u.push(d3.interpolate(n[i],t[i]));for(;i<e;++i)r[i]=n[i];for(;i<o;++i)r[i]=t[i];return function(n){for(i=0;i<f;++i)r[i]=u[i](n);return r}};d3.interpolateObject=function(n,t){var u={},r={};for(var i in n)i in t?u[i]=hu(i)(n[i],t[i]):r[i]=n[i];for(i in t)i in n||(r[i]=t[i]);return function(n){for(i in u)r[i]=u[i](n);return r}};ct=/[-+]?(?:\d*\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(n,t){return t instanceof Array&&d3.interpolateArray(n,t)},function(n,t){return typeof t=="string"&&d3.interpolateString(n+"",t)},function(n,t){return(typeof t=="string"?t in ut||/^(#|rgb\(|hsl\()/.test(t):t instanceof p||t instanceof w)&&d3.interpolateRgb(n+"",t)},function(n,t){return typeof t=="number"&&d3.interpolateNumber(+n,t)}];d3.rgb=function(n,t,i){return arguments.length===1?n instanceof p?c(n.r,n.g,n.b):pi(""+n,c,kt):c(~~n,~~t,~~i)};p.prototype.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var i=this.r,r=this.g,u=this.b,t=30;return!i&&!r&&!u?c(t,t,t):(i&&i<t&&(i=t),r&&r<t&&(r=t),u&&u<t&&(u=t),c(Math.min(255,Math.floor(i/n)),Math.min(255,Math.floor(r/n)),Math.min(255,Math.floor(u/n))))};p.prototype.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),c(Math.floor(n*this.r),Math.floor(n*this.g),Math.floor(n*this.b))};p.prototype.hsl=function(){return cu(this.r,this.g,this.b)};p.prototype.toString=function(){return"#"+nt(this.r)+nt(this.g)+nt(this.b)};ut={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(ar in ut)ut[ar]=pi(ut[ar],c,kt);d3.hsl=function(n,t,i){return arguments.length===1?n instanceof w?tt(n.h,n.s,n.l):pi(""+n,cu,tt):tt(+n,+t,+i)};w.prototype.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),tt(this.h,this.s,this.l/n)};w.prototype.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),tt(this.h,this.s,n*this.l)};w.prototype.rgb=function(){return kt(this.h,this.s,this.l)};w.prototype.toString=function(){return this.rgb().toString()};lt=function(n,t){return t.querySelector(n)};vr=function(n,t){return t.querySelectorAll(n)};typeof Sizzle=="function"&&(lt=function(n,t){return Sizzle(n,t)[0]},vr=function(n,t){return Sizzle.uniqueSort(Sizzle(n,t))});n=[];d3.selection=function(){return ft};d3.selection.prototype=n;n.select=function(n){var s=[],i,u,f,t,e,h,r,c;for(typeof n!="function"&&(n=lu(n)),e=-1,h=this.length;++e<h;)for(s.push(i=[]),i.parentNode=(f=this[e]).parentNode,r=-1,c=f.length;++r<c;)(t=f[r])?(i.push(u=n.call(t,t.__data__,r)),u&&"__data__"in t&&(u.__data__=t.__data__)):i.push(null);return o(s)};n.selectAll=function(n){var u=[],f,t,i,e;for(typeof n!="function"&&(n=au(n)),i=-1,e=this.length;++i<e;)for(var s=this[i],r=-1,h=s.length;++r<h;)(t=s[r])&&(u.push(f=rt(n.call(t,t.__data__,r))),f.parentNode=t);return o(u)};n.attr=function(n,t){function r(){this.removeAttribute(n)}function u(){this.removeAttributeNS(n.space,n.local)}function f(){this.setAttribute(n,t)}function e(){this.setAttributeNS(n.space,n.local,t)}function o(){var i=t.apply(this,arguments);i==null?this.removeAttribute(n):this.setAttribute(n,i)}function s(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,i)}if(n=d3.ns.qualify(n),arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each(t==null?n.local?u:r:typeof t=="function"?n.local?s:o:n.local?e:f)};n.classed=function(n,t){var r=n.split(le),u=r.length,i=-1;if(arguments.length>1){while(++i<u)vu.call(this,r[i],t);return this}while(++i<u)if(!vu.call(this,r[i]))return!1;return!0};le=/\s+/g;n.style=function(n,t,i){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,i)}function f(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,i)}return arguments.length<3&&(i=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(n):this.each(t==null?r:typeof t=="function"?f:u)};n.property=function(n,t){function i(){delete this[n]}function r(){this[n]=t}function u(){var i=t.apply(this,arguments);i==null?delete this[n]:this[n]=i}return arguments.length<2?this.node()[n]:this.each(t==null?i:typeof t=="function"?u:r)};n.text=function(n){return arguments.length<1?this.node().textContent:this.each(typeof n=="function"?function(){this.textContent=n.apply(this,arguments)}:function(){this.textContent=n})};n.html=function(n){return arguments.length<1?this.node().innerHTML:this.each(typeof n=="function"?function(){this.innerHTML=n.apply(this,arguments)}:function(){this.innerHTML=n})};n.append=function(n){function t(){return this.appendChild(document.createElement(n))}function i(){return this.appendChild(document.createElementNS(n.space,n.local))}return n=d3.ns.qualify(n),this.select(n.local?i:t)};n.insert=function(n,t){function i(){return this.insertBefore(document.createElement(n),lt(t,this))}function r(){return this.insertBefore(document.createElementNS(n.space,n.local),lt(t,this))}return n=d3.ns.qualify(n),this.select(n.local?r:i)};n.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})};n.data=function(n,t){function f(n,i){var r,y=n.length,p=i.length,b=Math.min(y,p),k=Math.max(y,p),o=[],c=[],f=[],u,l;if(t){var v={},w=[],a,d=i.length;for(r=-1;++r<y;)a=t.call(u=n[r],u.__data__,r),a in v?f[d++]=u:v[a]=u,w.push(a);for(r=-1;++r<p;)u=v[a=t.call(i,l=i[r],r)],u?(u.__data__=l,o[r]=u,c[r]=f[r]=null):(c[r]=bi(l),o[r]=f[r]=null),delete v[a];for(r=-1;++r<y;)w[r]in v&&(f[r]=n[r])}else{for(r=-1;++r<b;)u=n[r],l=i[r],u?(u.__data__=l,o[r]=u,c[r]=f[r]=null):(c[r]=bi(l),o[r]=f[r]=null);for(;r<p;++r)c[r]=bi(i[r]),o[r]=f[r]=null;for(;r<k;++r)f[r]=n[r],c[r]=o[r]=null}c.update=o;c.parentNode=o.parentNode=f.parentNode=n.parentNode;e.push(c);s.push(o);h.push(f)}var e=[],s=[],h=[],i=-1,c=this.length,r,u;if(typeof n=="function")while(++i<c)f(r=this[i],n.call(r,r.parentNode.__data__,i));else while(++i<c)f(r=this[i],n);return u=o(s),u.enter=function(){return is(e)},u.exit=function(){return o(h)},u};n.filter=function(n){for(var t,s,e=[],r,u,i,f=0,h=this.length;f<h;f++)for(e.push(r=[]),r.parentNode=(u=this[f]).parentNode,t=0,s=u.length;t<s;t++)(i=u[t])&&n.call(i,i.__data__,t)&&r.push(i);return o(e)};n.map=function(n){return this.each(function(){this.__data__=n.apply(this,arguments)})};n.sort=function(n){var t,e,r;for(n=ts.apply(this,arguments),t=0,e=this.length;t<e;t++)for(var u=this[t].sort(n),f=1,o=u.length,i=u[0];f<o;f++)r=u[f],r&&(i&&i.parentNode.insertBefore(r,i.nextSibling),i=r);return this};n.on=function(n,t,i){arguments.length<3&&(i=!1);var r="__on"+n,u=n.indexOf(".");return u>0&&(n=n.substring(0,u)),arguments.length<2?(u=this.node()[r])&&u._:this.each(function(u,f){function o(n){var i=d3.event;d3.event=n;try{t.call(e,e.__data__,f)}finally{d3.event=i}}var e=this;e[r]&&e.removeEventListener(n,e[r],i);t&&e.addEventListener(n,e[r]=o,i);o._=t})};n.each=function(n){for(var i,t=-1,u=this.length;++t<u;)for(var f=this[t],r=-1,e=f.length;++r<e;)i=f[r],i&&n.call(i,i.__data__,r,t);return this};n.call=function(n){return n.apply(this,(arguments[0]=this,arguments)),this};n.empty=function(){return!this.node()};n.node=function(){for(var i,n=0,r=this.length;n<r;n++)for(var u=this[n],t=0,f=u.length;t<f;t++)if(i=u[t],i)return i;return null};n.transition=function(){for(var n=[],t,i,r=-1,e=this.length;++r<e;){n.push(t=[]);for(var u=this[r],f=-1,o=u.length;++f<o;)t.push((i=u[f])?{node:i,delay:0,duration:250}:null)}return ki(n,et||++nc,Date.now())};ft=o([[document]]);ft[0].parentNode=document.documentElement;d3.select=function(n){return typeof n=="string"?ft.select(n):o([[n]])};d3.selectAll=function(n){return typeof n=="string"?ft.selectAll(n):o([rt(n)])};k=[];k.append=n.append;k.insert=n.insert;k.empty=n.empty;k.node=n.node;k.select=function(n){for(var i,c,f=[],r,e,s,t,u,h=-1,l=this.length;++h<l;)for(s=(t=this[h]).update,f.push(r=[]),r.parentNode=t.parentNode,i=-1,c=t.length;++i<c;)(u=t[i])?(r.push(s[i]=e=n.call(t.parentNode,u.__data__,i)),e.__data__=u.__data__):r.push(null);return o(f)};var at={},r=[],nc=0,et=0,tc=d3.ease("cubic-in-out");r.call=n.call;d3.transition=function(){return ft.transition()};d3.transition.prototype=r;r.select=function(n){var e=[],i,r,t,u,o;for(typeof n!="function"&&(n=lu(n)),u=-1,o=this.length;++u<o;){e.push(i=[]);for(var s=this[u],f=-1,h=s.length;++f<h;)(t=s[f])&&(r=n.call(t.node,t.node.__data__,f))?("__data__"in t.node&&(r.__data__=t.node.__data__),i.push({node:r,delay:t.delay,duration:t.duration})):i.push(null)}return ki(e,this.id,this.time).ease(this.ease())};r.selectAll=function(n){var e=[],o,i,t,r,s,f,c;for(typeof n!="function"&&(n=au(n)),r=-1,s=this.length;++r<s;)for(var h=this[r],u=-1,l=h.length;++u<l;)if(t=h[u])for(i=n.call(t.node,t.node.__data__,u),e.push(o=[]),f=-1,c=i.length;++f<c;)o.push({node:i[f],delay:t.delay,duration:t.duration});return ki(e,this.id,this.time).ease(this.ease())};r.attr=function(n,t){return this.attrTween(n,yu(n,t))};r.attrTween=function(n,t){function r(n,r){var u=t.call(this,n,r,this.getAttribute(i));return u===at?(this.removeAttribute(i),null):u&&function(n){this.setAttribute(i,u(n))}}function u(n,r){var u=t.call(this,n,r,this.getAttributeNS(i.space,i.local));return u===at?(this.removeAttributeNS(i.space,i.local),null):u&&function(n){this.setAttributeNS(i.space,i.local,u(n))}}var i=d3.ns.qualify(n);return this.tween("attr."+n,i.local?u:r)};r.style=function(n,t,i){return arguments.length<3&&(i=""),this.styleTween(n,yu(n,t),i)};r.styleTween=function(n,t,i){return arguments.length<3&&(i=""),this.tween("style."+n,function(r,u){var f=t.call(this,r,u,window.getComputedStyle(this,null).getPropertyValue(n));return f===at?(this.style.removeProperty(n),null):f&&function(t){this.style.setProperty(n,f(t),i)}})};r.text=function(n){return this.tween("text",function(t,i){this.textContent=typeof n=="function"?n.call(this,t,i):n})};r.remove=function(){return this.each("end",function(){var n;!this.__transition__&&(n=this.parentNode)&&n.removeChild(this)})};r.delay=function(n){var t=this;return t.each(typeof n=="function"?function(i,r,u){t[u][r].delay=+n.apply(this,arguments)}:(n=+n,function(i,r,u){t[u][r].delay=n}))};r.duration=function(n){var t=this;return t.each(typeof n=="function"?function(i,r,u){t[u][r].duration=+n.apply(this,arguments)}:(n=+n,function(i,r,u){t[u][r].duration=n}))};r.transition=function(){return this.select(fo)};a=null;d3.timer=function(n,t,i){var u=!1,f,r=a;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;i=Date.now()}while(r){if(r.callback===n){r.then=i;r.delay=t;u=!0;break}f=r;r=r.next}u||(a={callback:n,then:i,delay:t,next:a});ri||(ui=clearTimeout(ui),ri=1,yr(di))};d3.timer.flush=function(){for(var t,i=Date.now(),n=a;n;)t=i-n.then,n.delay||(n.flush=n.callback(t)),n=n.next;pu()};yr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){setTimeout(n,17)};d3.transform=function(n){return pr.setAttribute("transform",n),new wu(pr.transform.baseVal.consolidate().matrix)};wu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};pr=document.createElementNS(d3.ns.prefix.svg,"g");wr=180/Math.PI;d3.scale={};d3.scale.linear=function(){return du([0,1],[0,1],d3.interpolate,!1)};d3.scale.log=function(){return ff(d3.scale.linear(),nr)};ae=d3.format("e");nr.pow=function(n){return Math.pow(10,n)};dt.pow=function(n){return-Math.pow(10,-n)};d3.scale.pow=function(){return ef(d3.scale.linear(),1)};d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)};d3.scale.ordinal=function(){return of([],{t:"range",x:[]})};d3.scale.category10=function(){return d3.scale.ordinal().range(ic)};d3.scale.category20=function(){return d3.scale.ordinal().range(rc)};d3.scale.category20b=function(){return d3.scale.ordinal().range(uc)};d3.scale.category20c=function(){return d3.scale.ordinal().range(fc)};var ic=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],rc=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],uc=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],fc=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return sf([],[])};d3.scale.quantize=function(){return hf(0,1,[0,1])};d3.svg={};d3.svg.arc=function(){function n(){var f=t.apply(this,arguments),n=i.apply(this,arguments),e=r.apply(this,arguments)+v,o=u.apply(this,arguments)+v,s=(o<e&&(s=e,e=o,o=s),o-e),h=s<Math.PI?"0":"1",c=Math.cos(e),l=Math.sin(e),a=Math.cos(o),y=Math.sin(o);return s>=ve?f?"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z":f?"M"+n*c+","+n*l+"A"+n+","+n+" 0 "+h+",1 "+n*a+","+n*y+"L"+f*a+","+f*y+"A"+f+","+f+" 0 "+h+",0 "+f*c+","+f*l+"Z":"M"+n*c+","+n*l+"A"+n+","+n+" 0 "+h+",1 "+n*a+","+n*y+"L0,0Z"}var t=hs,i=cs,r=cf,u=lf;return n.innerRadius=function(i){return arguments.length?(t=d3.functor(i),n):t},n.outerRadius=function(t){return arguments.length?(i=d3.functor(t),n):i},n.startAngle=function(t){return arguments.length?(r=d3.functor(t),n):r},n.endAngle=function(t){return arguments.length?(u=d3.functor(t),n):u},n.centroid=function(){var n=(t.apply(this,arguments)+i.apply(this,arguments))/2,f=(r.apply(this,arguments)+u.apply(this,arguments))/2+v;return[Math.cos(f)*n,Math.sin(f)*n]},n};v=-Math.PI/2;ve=2*Math.PI-1e-6;d3.svg.line=function(){return af(Object)};var br={linear:l,"step-before":rr,"step-after":ur,basis:yf,"basis-open":ys,"basis-closed":ps,bundle:ws,cardinal:vs,"cardinal-open":ls,"cardinal-closed":as,monotone:ds},ye=[0,2/3,1/3,0],pe=[0,1/3,2/3,0],ot=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var n=af(pf);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n};rr.reverse=ur;ur.reverse=rr;d3.svg.area=function(){return wf(Object)};d3.svg.area.radial=function(){var n=wf(pf);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n};d3.svg.chord=function(){function n(n,u){var f=o(this,i,n,u),e=o(this,r,n,u);return"M"+f.p0+s(f.r,f.p1)+(h(f,e)?t(f.r,f.p1,f.r,f.p0):t(f.r,f.p1,e.r,e.p0)+s(e.r,e.p1)+t(e.r,e.p1,f.r,f.p0))+"Z"}function o(n,t,i,r){var s=t.call(n,i,r),o=u.call(n,s,r),h=f.call(n,s,r)+v,c=e.call(n,s,r)+v;return{r:o,a0:h,a1:c,p0:[o*Math.cos(h),o*Math.sin(h)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function h(n,t){return n.a0==t.a0&&n.a1==t.a1}function s(n,t){return"A"+n+","+n+" 0 0,1 "+t}function t(n,t,i,r){return"Q 0,0 "+r}var i=bf,r=kf,u=th,f=cf,e=lf;return n.radius=function(t){return arguments.length?(u=d3.functor(t),n):u},n.source=function(t){return arguments.length?(i=d3.functor(t),n):i},n.target=function(t){return arguments.length?(r=d3.functor(t),n):r},n.startAngle=function(t){return arguments.length?(f=d3.functor(t),n):f},n.endAngle=function(t){return arguments.length?(e=d3.functor(t),n):e},n};d3.svg.diagonal=function(){function n(n,u){var e=t.call(this,n,u),o=i.call(this,n,u),s=(e.y+o.y)/2,f=[e,{x:e.x,y:s},{x:o.x,y:s},o];return f=f.map(r),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var t=bf,i=kf,r=df;return n.source=function(i){return arguments.length?(t=d3.functor(i),n):t},n.target=function(t){return arguments.length?(i=d3.functor(t),n):i},n.projection=function(t){return arguments.length?(r=t,n):r},n};d3.svg.diagonal.radial=function(){var n=d3.svg.diagonal(),t=df,i=n.projection;return n.projection=function(n){return arguments.length?i(ih(t=n)):t},n};d3.svg.mouse=function(n){return gf(n,d3.event)};fi=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(n,t){return arguments.length<2&&(t=d3.event.touches),t?rt(t).map(function(t){var i=gf(n,t);return i.identifier=t.identifier,i}):[]};d3.svg.symbol=function(){function n(n,r){return(ei[t.call(this,n,r)]||ei.circle)(i.call(this,n,r))}var t=uh,i=rh;return n.type=function(i){return arguments.length?(t=d3.functor(i),n):t},n.size=function(t){return arguments.length?(i=d3.functor(t),n):i},n};ei={circle:function(n){var t=Math.sqrt(n/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*kr)),i=t*kr;return"M0,"+-t+"L"+i+",0 0,"+t+" "+-i+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/vt),i=t*vt/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/vt),i=t*vt/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}};d3.svg.symbolTypes=d3.keys(ei);vt=Math.sqrt(3);kr=Math.tan(Math.PI/6);d3.svg.axis=function(){function n(n){n.each(function(c,l,a){var g=d3.select(this),w=n.delay?function(t){var i=et;try{return et=n.id,t.transition().delay(n[a][l].delay).duration(n[a][l].duration).ease(n.ease())}finally{et=i}}:Object,rt=t.ticks.apply(t,e),ot=o==null?t.tickFormat.apply(t,e):o,st=fh(t,rt,h),nt=g.selectAll(".minor").data(st,String),ht=nt.enter().insert("svg:line","g").attr("class","tick minor").style("opacity",1e-6),ct=w(nt.exit()).style("opacity",1e-6).remove(),k=w(nt).style("opacity",1),tt=g.selectAll("g").data(rt,String),it=tt.enter().insert("svg:g","path").style("opacity",1e-6),lt=w(tt.exit()).style("opacity",1e-6).remove(),v=w(tt).style("opacity",1),y,p=b(t.range()),ut=g.selectAll(".domain").data([0]),at=ut.enter().append("svg:path").attr("class","domain"),d=w(ut),ft=this.__chart__||t;this.__chart__=t.copy();it.append("svg:line").attr("class","tick");it.append("svg:text");v.select("text").text(ot);switch(s){case"bottom":y=ne;k.attr("x2",0).attr("y2",f);v.select("line").attr("x2",0).attr("y2",i);v.select("text").attr("x",0).attr("y",Math.max(i,0)+u).attr("dy",".71em").attr("text-anchor","middle");d.attr("d","M"+p[0]+","+r+"V0H"+p[1]+"V"+r);break;case"top":y=ne;k.attr("x2",0).attr("y2",-f);v.select("line").attr("x2",0).attr("y2",-i);v.select("text").attr("x",0).attr("y",-(Math.max(i,0)+u)).attr("dy","0em").attr("text-anchor","middle");d.attr("d","M"+p[0]+","+-r+"V0H"+p[1]+"V"+-r);break;case"left":y=te;k.attr("x2",-f).attr("y2",0);v.select("line").attr("x2",-i).attr("y2",0);v.select("text").attr("x",-(Math.max(i,0)+u)).attr("y",0).attr("dy",".32em").attr("text-anchor","end");d.attr("d","M"+-r+","+p[0]+"H0V"+p[1]+"H"+-r);break;case"right":y=te;k.attr("x2",f).attr("y2",0);v.select("line").attr("x2",i).attr("y2",0);v.select("text").attr("x",Math.max(i,0)+u).attr("y",0).attr("dy",".32em").attr("text-anchor","start");d.attr("d","M"+r+","+p[0]+"H0V"+p[1]+"H"+r)}it.call(y,ft);v.call(y,t);lt.call(y,t);ht.call(y,ft);k.call(y,t);ct.call(y,t)})}var t=d3.scale.linear(),s="bottom",i=6,f=6,r=6,u=3,e=[10],o,h=0;return n.scale=function(i){return arguments.length?(t=i,n):t},n.orient=function(t){return arguments.length?(s=t,n):s},n.ticks=function(){return arguments.length?(e=arguments,n):e},n.tickFormat=function(t){return arguments.length?(o=t,n):o},n.tickSize=function(t,u){if(!arguments.length)return i;var e=arguments.length-1;return i=+t,f=e>1?+u:i,r=e>0?+arguments[e]:i,n},n.tickPadding=function(t){return arguments.length?(u=+t,n):u},n.tickSubdivide=function(t){return arguments.length?(h=+t,n):h},n};d3.svg.brush=function(){function f(t){var i=r&&u?["n","e","s","w","nw","ne","se","sw"]:r?["e","w"]:u?["n","s"]:[];t.each(function(){var e=d3.select(this).on("mousedown.brush",h),o=e.selectAll(".background").data([,]),c=e.selectAll(".extent").data([,]),s=e.selectAll(".resize").data(i,String),t;o.enter().append("svg:rect").attr("class","background").style("visibility","hidden").style("pointer-events","all").style("cursor","crosshair");c.enter().append("svg:rect").attr("class","extent").style("cursor","move");s.enter().append("svg:rect").attr("class",function(n){return"resize "+n}).attr("width",6).attr("height",6).style("visibility","hidden").style("pointer-events",f.empty()?"none":"all").style("cursor",function(n){return we[n]});s.exit().remove();r&&(t=b(r.range()),o.attr("x",t[0]).attr("width",t[1]-t[0]),ie(e,n));u&&(t=b(u.range()),o.attr("y",t[0]).attr("height",t[1]-t[0]),re(e,n))})}function h(){var o=d3.select(d3.event.target);dr=f;d=this;t=n;i=d3.svg.mouse(d);(s=o.classed("extent"))?(i[0]=n[0][0]-i[0],i[1]=n[0][1]-i[1]):o.classed("resize")?(st=d3.event.target.__data__,i[0]=n[+/w$/.test(st)][0],i[1]=n[+/^n/.test(st)][1]):d3.event.altKey&&(e=i.slice());oi=!/^(n|s)$/.test(st)&&r;si=!/^(e|w)$/.test(st)&&u;yt=c(this,arguments);yt("brushstart");or();y()}function c(n,t){return function(i){var r=d3.event;try{d3.event={type:i,target:f};o[i].apply(n,t)}finally{d3.event=r}}}var o=d3.dispatch("brushstart","brush","brushend"),r,u,n=[[0,0],[0,0]];return f.x=function(n){return arguments.length?(r=n,f):r},f.y=function(n){return arguments.length?(u=n,f):u},f.extent=function(t){var i,e,o,s,h;return arguments.length?(r&&(i=t[0],e=t[1],u&&(i=i[0],e=e[0]),i=r(i),e=r(e),e<i&&(h=i,i=e,e=h),n[0][0]=i,n[1][0]=e),u&&(o=t[0],s=t[1],r&&(o=o[1],s=s[1]),o=u(o),s=u(s),s<o&&(h=o,o=s,s=h),n[0][1]=o,n[1][1]=s),f):(r&&(i=r.invert(n[0][0]),e=r.invert(n[1][0]),e<i&&(h=i,i=e,e=h)),u&&(o=u.invert(n[0][1]),s=u.invert(n[1][1]),s<o&&(h=o,o=s,s=h)),r&&u?[[i,o],[e,s]]:r?[i,e]:u&&[o,s])},f.clear=function(){return n[0][0]=n[0][1]=n[1][0]=n[1][1]=0,f},f.empty=function(){return r&&n[0][0]===n[1][0]||u&&n[0][1]===n[1][1]},f.on=function(n,t){return o.on(n,t),f},d3.select(window).on("mousemove.brush",or).on("mouseup.brush",sh).on("keydown.brush",eh).on("keyup.brush",oh),f};we={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};d3.behavior={};d3.behavior.drag=function(){function n(){this.on("mousedown.drag",t).on("touchstart.drag",t);d3.select(window).on("mousemove.drag",ee).on("touchmove.drag",ee).on("mouseup.drag",hr,!0).on("touchend.drag",hr,!0).on("click.drag",hh,!0)}function r(){be=i;hi=d3.event.target;ci=fe((g=this).parentNode);gr=0;ke=arguments}function t(){r.apply(this,arguments);sr("dragstart")}var i=d3.dispatch("drag","dragstart","dragend");return n.on=function(t,r){return i.on(t,r),n},n};d3.behavior.zoom=function(){function n(){this.on("mousedown.zoom",o).on("mousewheel.zoom",f).on("DOMMouseScroll.zoom",f).on("dblclick.zoom",s).on("touchstart.zoom",c);d3.select(window).on("mousemove.zoom",se).on("mouseup.zoom",ah).on("touchmove.zoom",lh).on("touchend.zoom",oe).on("click.zoom",vh,!0)}function i(){u=t;ge=r;no=e.zoom;ai=d3.event.target;h=this;to=arguments}function o(){i.apply(this,arguments);wt=ti(d3.svg.mouse(h));tu=!1;d3.event.preventDefault();window.focus()}function f(){i.apply(this,arguments);li||(li=ti(d3.svg.mouse(h)));it(ch()+t[2],d3.svg.mouse(h),li)}function s(){i.apply(this,arguments);var n=d3.svg.mouse(h);it(d3.event.shiftKey?Math.ceil(t[2]-1):Math.floor(t[2]+1),n,ti(n))}function c(){i.apply(this,arguments);var n=oe(),r,u=Date.now();n.length===1&&u-de<300&&it(1+Math.floor(t[2]),r=n[0],bt[r.identifier]);de=u}var t=[0,0,0],e=d3.dispatch("zoom"),r=io;return n.extent=function(t){return arguments.length?(r=t==null?io:t,n):r},n.on=function(t,i){return e.on(t,i),n},n};var pt,wt,li,bt={},de=0,u,ge,no,ai,h,to,tu,iu,io=[[-Infinity,Infinity],[-Infinity,Infinity],[-Infinity,Infinity]]}();d3=function(){function ae(n){return null!=n&&!isNaN(n)}function nb(n){return n.length}function tb(n){for(var t=1;n*t%1;)t*=10;return t}function yc(n,t){try{for(var i in t)Object.defineProperty(n.prototype,i,{value:t[i],enumerable:!1})}catch(r){n.prototype=t}}function rt(){}function ve(){}function ib(n,t,i){return function(){var r=i.apply(t,arguments);return r===t?n:r}}function ye(n,t){var i,u,r;if(t in n)return t;for(t=t.charAt(0).toUpperCase()+t.substring(1),i=0,u=fh.length;u>i;++i)if(r=fh[i]+t,r in n)return r}function h(){}function pe(){}function pc(n){function r(){for(var i,r=t,u=-1,f=r.length;++u<f;)(i=r[u].on)&&i.apply(this,arguments);return n}var t=[],i=new rt;return r.on=function(r,u){var e,f=i.get(r);return arguments.length<2?f&&f.on:(f&&(f.on=null,t=t.slice(0,e=t.indexOf(f)).concat(t.slice(e+1)),i.remove(r)),u&&t.push(i.set(r,{on:u})),n)},r}function bt(){n.event.preventDefault()}function wc(){for(var i,t=n.event;i=t.sourceEvent;)t=i;return t}function we(t){for(var i=new pe,r=0,u=arguments.length;++r<u;)i[arguments[r]]=pc(i);return i.of=function(r,u){return function(f){try{var e=f.sourceEvent=n.event;f.target=t;n.event=f;i[f.type].apply(r,u)}finally{n.event=e}}},i}function kt(n){return ff(n,f),n}function be(n){return"function"==typeof n?n:function(){return eh(n,this)}}function bc(n){return"function"==typeof n?n:function(){return oh(n,this)}}function kc(t,i){function r(){this.removeAttribute(t)}function u(){this.removeAttributeNS(t.space,t.local)}function f(){this.setAttribute(t,i)}function e(){this.setAttributeNS(t.space,t.local,i)}function o(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=n.ns.qualify(t),null==i?t.local?u:r:"function"==typeof i?t.local?s:o:t.local?e:f}function dc(n){return n.trim().replace(/\s+/g," ")}function gc(t){return new RegExp("(?:^|\\s+)"+n.requote(t)+"(?:\\s+|$)","g")}function nl(n,t){function r(){for(var r=-1;++r<i;)n[r](this,t)}function u(){for(var r=-1,u=t.apply(this,arguments);++r<i;)n[r](this,u)}n=n.trim().split(/\s+/).map(rb);var i=n.length;return"function"==typeof t?u:r}function rb(n){var t=gc(n);return function(i,r){if(u=i.classList)return r?u.add(n):u.remove(n);var u=i.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||i.setAttribute("class",dc(u+" "+n))):i.setAttribute("class",dc(u.replace(t," ")))}}function tl(n,t,i){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,i)}function f(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,i)}return null==t?r:"function"==typeof t?f:u}function il(n,t){function i(){delete this[n]}function r(){this[n]=t}function u(){var i=t.apply(this,arguments);null==i?delete this[n]:this[n]=i}return null==t?i:"function"==typeof t?u:r}function rl(t){return"function"==typeof t?t:(t=n.ns.qualify(t)).local?function(){return g.createElementNS(t.space,t.local)}:function(){return g.createElementNS(this.namespaceURI,t)}}function ke(n){return{__data__:n}}function ul(n){return function(){return cp(this,n)}}function ub(t){return arguments.length||(t=n.ascending),function(n,i){return n&&i?t(n.__data__,i.__data__):!n-!i}}function dt(n,t){for(var i=0,u=n.length;u>i;i++)for(var f,e=n[i],r=0,o=e.length;o>r;r++)(f=e[r])&&t(f,r,i);return n}function fl(n){return ff(n,et),n}function fb(n){var t,i;return function(r,u,f){var e,o=n[f].update,s=o.length;for(f!=i&&(i=f,t=0),u>=t&&(t=u+1);!(e=o[t])&&++t<s;);return e}}function nu(){var n=this.__transition__;n&&++n.active}function el(t,i,r){function o(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function c(){var n=s(i,ni(arguments));o.call(this);this.addEventListener(t,this[u]=n,n.$=r);n._=i}function l(){var u,f=new RegExp("^__on([^.]+)"+n.requote(t)+"$"),i,r;for(i in this)(u=i.match(f))&&(r=this[i],this.removeEventListener(u[1],r,r.$),delete this[i])}var u="__on"+t,f=t.indexOf("."),s=ol,e;return f>0&&(t=t.substring(0,f)),e=of.get(t),e&&(t=e,s=eb),f?i?c:o:i?h:l}function ol(t,i){return function(r){var u=n.event;n.event=r;i[0]=this.__data__;try{t.apply(this,i)}finally{n.event=u}}}function eb(n,t){var i=ol(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||i.call(t,n)}}function tu(){var t=".dragsuppress-"+ ++lp,f="touchmove"+t,e="selectstart"+t,o="dragstart"+t,u="click"+t,i=n.select(a).on(f,bt).on(e,bt).on(o,bt),r=ti.style,s=r[sf];return r[sf]="none",function(n){function f(){i.on(u,null)}i.on(t,null);r[sf]=s;n&&(i.on(u,function(){bt();f()},!0),setTimeout(f,0))}}function sl(t,i){var u,r,f,e;return(i.changedTouches&&(i=i.changedTouches[0]),u=t.ownerSVGElement||t,u.createSVGPoint)?(r=u.createSVGPoint(),0>hf&&(a.scrollX||a.scrollY)&&(u=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),f=u[0][0].getScreenCTM(),hf=!(f.f||f.e),u.remove()),hf?(r.x=i.pageX,r.y=i.pageY):(r.x=i.clientX,r.y=i.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]):(e=t.getBoundingClientRect(),[i.clientX-e.left-t.clientLeft,i.clientY-e.top-t.clientTop])}function hl(n){return n>0?1:0>n?-1:0}function cl(n){return n>1?0:-1>n?u:Math.acos(n)}function hi(n){return n>1?w:-1>n?-w:Math.asin(n)}function ll(n){return((n=Math.exp(n))-1/n)/2}function de(n){return((n=Math.exp(n))+1/n)/2}function ob(n){return((n=Math.exp(2*n))-1)/(n+1)}function al(n){return(n=Math.sin(n/2))*n}function di(){}function gi(n,t,i){return new ge(n,t,i)}function ge(n,t,i){this.h=n;this.s=t;this.l=i}function no(n,t,i){function e(n){return n>360?n-=360:0>n&&(n+=360),60>n?r+(u-r)*n/60:180>n?u:240>n?r+(u-r)*(240-n)/60:r}function f(n){return Math.round(255*e(n))}var r,u;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,i=0>i?0:i>1?1:i,u=.5>=i?i*(1+t):i+t-i*t,r=2*i-u,ht(f(n+120),f(n),f(n-120))}function nr(n,t,i){return new iu(n,t,i)}function iu(n,t,i){this.h=n;this.c=t;this.l=i}function to(n,t,i){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),tr(i,Math.cos(n*=r)*t,Math.sin(n)*t)}function tr(n,t,i){return new ru(n,t,i)}function ru(n,t,i){this.l=n;this.a=t;this.b=i}function vl(n,t,i){var r=(n+16)/116,u=r+t/500,f=r-i/200;return u=io(u)*pp,r=io(r)*wp,f=io(f)*bp,ht(uo(3.2404542*u-1.5371385*r-.4985314*f),uo(-.969266*u+1.8760108*r+.041556*f),uo(.0556434*u-.2040259*r+1.0572252*f))}function yl(n,t,i){return n>0?nr(Math.atan2(i,t)*o,Math.sqrt(t*t+i*i),n):nr(NaN,NaN,n)}function io(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function ro(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function uo(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function pl(n){return ht(n>>16,255&n>>8,255&n)}function uu(n){return pl(n)+""}function ht(n,t,i){return new fo(n,t,i)}function fo(n,t,i){this.r=n;this.g=t;this.b=i}function ir(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function wl(n,t,i){var s,r,o,u=0,f=0,e=0;if(s=/([a-z]+)\((.*)\)/i.exec(n))switch(r=s[2].split(","),s[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(oo(r[0]),oo(r[1]),oo(r[2]))}return(o=wr.get(n))?t(o.r,o.g,o.b):(null!=n&&"#"===n.charAt(0)&&(4===n.length?(u=n.charAt(1),u+=u,f=n.charAt(2),f+=f,e=n.charAt(3),e+=e):7===n.length&&(u=n.substring(1,3),f=n.substring(3,5),e=n.substring(5,7)),u=parseInt(u,16),f=parseInt(f,16),e=parseInt(e,16)),t(u,f,e))}function bl(n,t,i){var f,s,e=Math.min(n/=255,t/=255,i/=255),r=Math.max(n,t,i),u=r-e,o=(r+e)/2;return u?(s=.5>o?u/(r+e):u/(2-r-e),f=n==r?(t-i)/u+(i>t?6:0):t==r?(i-n)/u+2:(n-t)/u+4,f*=60):(f=NaN,s=o>0&&1>o?0:f),gi(f,s,o)}function kl(n,t,i){n=eo(n);t=eo(t);i=eo(i);var u=ro((.4124564*n+.3575761*t+.1804375*i)/pp),r=ro((.2126729*n+.7151522*t+.072175*i)/wp),f=ro((.0193339*n+.119192*t+.9503041*i)/bp);return tr(116*r-16,500*(u-r),200*(r-f))}function eo(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function oo(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function e(n){return"function"==typeof n?n:function(){return n}}function l(n){return n}function so(n){return function(t,i,r){return 2===arguments.length&&"function"==typeof i&&(r=i,i=null),ho(t,i,n,r)}}function ho(t,i,r,u){function c(){var t,n=e.status;if(!n&&e.responseText||n>=200&&300>n||304===n){try{t=r.call(f,e)}catch(i){return s.error.call(f,i),void 0}s.load.call(f,t)}else s.error.call(f,e)}var f={},s=n.dispatch("beforesend","progress","load","error"),o={},e=new XMLHttpRequest,h=null;return!a.XDomainRequest||"withCredentials"in e||!/^(http(s)?:)?\/\//.test(t)||(e=new XDomainRequest),"onload"in e?e.onload=e.onerror=c:e.onreadystatechange=function(){e.readyState>3&&c()},e.onprogress=function(t){var i=n.event;n.event=t;try{s.progress.call(f,e)}finally{n.event=i}},f.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:o[n]=t+"",f)},f.mimeType=function(n){return arguments.length?(i=null==n?null:n+"",f):i},f.responseType=function(n){return arguments.length?(h=n,f):h},f.response=function(n){return r=n,f},["get","post"].forEach(function(n){f[n]=function(){return f.send.apply(f,[n].concat(ni(arguments)))}}),f.send=function(n,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),e.open(n,t,!0),null==i||"accept"in o||(o.accept=i+",*/*"),e.setRequestHeader)for(var c in o)e.setRequestHeader(c,o[c]);return null!=i&&e.overrideMimeType&&e.overrideMimeType(i),null!=h&&(e.responseType=h),null!=u&&f.on("error",u).on("load",function(n){u(null,n)}),s.beforesend.call(f,e),e.send(null==r?null:r),f},f.abort=function(){return e.abort(),f},n.rebind(f,s,"on"),null==u?f:f.get(sb(u))}function sb(n){return 1===n.length?function(t,i){n(null==t?i:null)}:n}function co(){var t=gl(),n=na()-t;n>24?(isFinite(n)&&(clearTimeout(kf),kf=setTimeout(co,n)),bf=0):(bf=1,ah(co))}function dl(n,t,i){var r=arguments.length;2>r&&(t=0);3>r&&(i=Date.now());ot.callback=n;ot.time=i+t}function gl(){var n=Date.now();for(ot=pf;ot;)n>=ot.time&&(ot.flush=ot.callback(n-ot.time)),ot=ot.next;return n}function na(){for(var t,n=pf,i=1/0;n;)n.flush?n=t?t.next=n.next:pf=n.next:(n.time<i&&(i=n.time),n=(t=n).next);return wf=t,i}function hb(n,t){var i=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(n){return n/i}:function(n){return n*i},symbol:n}}function lo(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function cb(n){return n+""}function ao(){}function ta(n,t,i){var r=i.s=n+t,u=r-n,f=r-u;i.t=n-f+(t-u)}function fu(n,t){n&&ph.hasOwnProperty(n.type)&&ph[n.type](n,t)}function vo(n,t,i){var r,u=-1,f=n.length-i;for(t.lineStart();++u<f;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function ia(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)vo(n[i],t,1);t.polygonEnd()}function lb(){function f(f,e){f*=r;e=e*r/2+u/4;var o=f-n,s=Math.cos(e),h=Math.sin(e),c=i*h,l=t*s+c*Math.cos(o),a=c*Math.sin(o);ii.add(Math.atan2(a,l));n=f;t=s;i=h}var e,o,n,t,i;b.point=function(s,h){b.point=f;n=(e=s)*r;t=Math.cos(h=(o=h)*r/2+u/4);i=Math.sin(h)};b.lineEnd=function(){f(e,o)}}function ci(n){var t=n[0],i=n[1],r=Math.cos(i);return[r*Math.cos(t),r*Math.sin(t),Math.sin(i)]}function eu(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function rr(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function yo(n,t){n[0]+=t[0];n[1]+=t[1];n[2]+=t[2]}function ou(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function su(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t;n[1]/=t;n[2]/=t}function hu(n){return[Math.atan2(n[1],n[0]),hi(n[2])]}function cu(n,t){return Math.abs(n[0]-t[0])<i&&Math.abs(n[1]-t[1])<i}function po(n,t){n*=r;var i=Math.cos(t*=r);or(i*Math.cos(n),i*Math.sin(n),Math.sin(t))}function or(n,t,i){++kr;pi+=(n-pi)/kr;wi+=(t-wi)/kr;pt+=(i-pt)/kr}function ra(){function u(u,f){u*=r;var c=Math.cos(f*=r),o=c*Math.cos(u),s=c*Math.sin(u),h=Math.sin(f),e=Math.atan2(Math.sqrt((e=t*h-i*s)*e+(e=i*o-n*h)*e+(e=n*s-t*o)*e),n*o+t*s+i*h);ne+=e;ri+=e*(n+(n=o));ui+=e*(t+(t=s));st+=e*(i+(i=h));or(n,t,i)}var n,t,i;tt.point=function(f,e){f*=r;var o=Math.cos(e*=r);n=o*Math.cos(f);t=o*Math.sin(f);i=Math.sin(e);tt.point=u;or(n,t,i)}}function ua(){tt.point=po}function ab(){function u(u,f){u*=r;var p=Math.cos(f*=r),e=p*Math.cos(u),o=p*Math.sin(u),s=Math.sin(f),c=t*s-i*o,l=i*e-n*s,a=n*o-t*e,v=Math.sqrt(c*c+l*l+a*a),w=n*e+t*o+i*s,y=v&&-cl(w)/v,h=Math.atan2(v,w);fr+=y*c;er+=y*l;fi+=y*a;ne+=h;ri+=h*(n+(n=e));ui+=h*(t+(t=o));st+=h*(i+(i=s));or(n,t,i)}var f,e,n,t,i;tt.point=function(o,s){f=o;e=s;tt.point=u;o*=r;var h=Math.cos(s*=r);n=h*Math.cos(o);t=h*Math.sin(o);i=Math.sin(s);or(n,t,i)};tt.lineEnd=function(){u(f,e);tt.lineEnd=ua;tt.point=po}}function sr(){return!0}function fa(n,t,i,r,u){var h=[],s=[],f,o,c,l,e;if(n.forEach(function(n){var o,i,r,e,t,f;if(!((o=n.length-1)<=0)){if(i=n[0],r=n[o],cu(i,r)){for(u.lineStart(),e=0;o>e;++e)u.point((i=n[e])[0],i[1]);return u.lineEnd(),void 0}t={point:i,points:n,other:null,visited:!1,entry:!0,subject:!0};f={point:i,points:[i],other:t,visited:!1,entry:!1,subject:!1};t.other=f;h.push(t);s.push(f);t={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0};f={point:r,points:[r],other:t,visited:!1,entry:!0,subject:!1};t.other=f;h.push(t);s.push(f)}}),s.sort(t),ea(h),ea(s),h.length){for(var e=0,a=i,v=s.length;v>e;++e)s[e].entry=a=!a;for(l=h[0];;){for(f=l;f.visited;)if((f=f.next)===l)return;o=f.points;u.lineStart();do{if(f.visited=f.other.visited=!0,f.entry){if(f.subject)for(e=0;e<o.length;e++)u.point((c=o[e])[0],c[1]);else r(f.point,f.next.point,1,u);f=f.next}else{if(f.subject)for(o=f.prev.points,e=o.length;--e>=0;)u.point((c=o[e])[0],c[1]);else r(f.point,f.prev.point,-1,u);f=f.prev}f=f.other;o=f.points}while(!f.visited);u.lineEnd()}}}function ea(n){if(r=n.length){for(var r,t,u=0,i=n[0];++u<r;)i.next=t=n[u],t.prev=i,i=t;i.next=t=n[0];t.prev=i}}function oa(t,i,r,u){return function(f,e){function a(n,i){var r=f(n,i);t(n=r[0],i=r[1])&&e.point(n,i)}function k(n,t){var i=f(n,t);v.point(i[0],i[1])}function y(){o.point=k;v.lineStart()}function p(){o.point=a;v.lineEnd()}function w(n,t){h.push([n,t]);var i=f(n,t);l.point(i[0],i[1])}function d(){l.lineStart();h=[]}function g(){var f,t,r;w(h[0][0],h[0][1]);l.lineEnd();var i,u=l.clean(),n=b.buffer(),t=n.length;if(h.pop(),c.push(h),h=null,t){if(1&u){for(i=n[0],t=i.length-1,r=-1,e.lineStart();++r<t;)e.point((f=i[r])[0],f[1]);return e.lineEnd(),void 0}t>1&&2&u&&n.push(n.pop().concat(n.shift()));s.push(n.filter(vb))}}var s,c,h,v=i(e),nt=f.invert(u[0],u[1]),o={point:a,lineStart:y,lineEnd:p,polygonStart:function(){o.point=w;o.lineStart=d;o.lineEnd=g;s=[];c=[];e.polygonStart()},polygonEnd:function(){o.point=a;o.lineStart=y;o.lineEnd=p;s=n.merge(s);var t=pb(nt,c);s.length?fa(s,yb,t,r,e):t&&(e.lineStart(),r(null,null,1,e),e.lineEnd());e.polygonEnd();s=c=null},sphere:function(){e.polygonStart();e.lineStart();r(null,null,1,e);e.lineEnd();e.polygonEnd()}},b=sa(),l=i(b);return o}}function vb(n){return n.length>1}function sa(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,i){t.push([n,i])},lineEnd:h,buffer:function(){var i=n;return n=[],t=null,i},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function yb(n,t){return((n=n.point)[0]<0?n[1]-w-i:w-n[1])-((t=t.point)[0]<0?t[1]-w-i:w-t[1])}function pb(n,t){var e=n[0],k=n[1],ot=[Math.sin(e),-Math.cos(e),0],a=0,d=0,o,g,s,v,f,w,b;for(ii.reset(),o=0,g=t.length;g>o;++o)if(s=t[o],v=s.length,v)for(var h=s[0],y=h[0],nt=h[1]/2+u/4,tt=Math.sin(nt),it=Math.cos(nt),c=1;;){c===v&&(c=0);n=s[c];var p=n[0],rt=n[1]/2+u/4,ut=Math.sin(rt),ft=Math.cos(rt),r=p-y,l=Math.abs(r)>u,et=tt*ut;if((ii.add(Math.atan2(et*Math.sin(r),it*ft+et*Math.cos(r))),a+=l?r+(r>=0?2:-2)*u:r,l^y>=e^p>=e)&&(f=rr(ci(h),ci(n)),su(f),w=rr(ot,f),su(w),b=(l^r>=0?-1:1)*hi(w[2]),(k>b||k===b&&(f[0]||f[1]))&&(d+=l^r>=0?1:-1)),!c++)break;y=p;tt=ut;it=ft;h=n}return(-i>a||i>a&&0>ii)^1&d}function wb(n){var e,r=NaN,t=NaN,f=NaN;return{lineStart:function(){n.lineStart();e=1},point:function(o,s){var h=o>0?u:-u,c=Math.abs(o-r);Math.abs(c-u)<i?(n.point(r,t=(t+s)/2>0?w:-w),n.point(f,t),n.lineEnd(),n.lineStart(),n.point(h,t),n.point(o,t),e=0):f!==h&&c>=u&&(Math.abs(r-f)<i&&(r-=f*i),Math.abs(o-h)<i&&(o-=h*i),t=bb(r,t,o,s),n.point(f,t),n.lineEnd(),n.lineStart(),n.point(h,t),e=0);n.point(r=o,t=s);f=h},lineEnd:function(){n.lineEnd();r=t=NaN},clean:function(){return 2-e}}}function bb(n,t,r,u){var f,e,o=Math.sin(n-r);return Math.abs(o)>i?Math.atan((Math.sin(t)*(e=Math.cos(u))*Math.sin(r)-Math.sin(u)*(f=Math.cos(t))*Math.sin(n))/(f*e*o)):(t+u)/2}function kb(n,t,r,f){var e,o;null==n?(e=r*w,f.point(-u,e),f.point(0,e),f.point(u,e),f.point(u,0),f.point(u,-e),f.point(0,-e),f.point(-u,-e),f.point(-u,0),f.point(-u,e)):Math.abs(n[0]-t[0])>i?(o=(n[0]<t[0]?1:-1)*u,e=r*o/2,f.point(-o,e),f.point(0,e),f.point(o,e)):f.point(t[0],t[1])}function db(n){function o(n,i){return Math.cos(n)*Math.cos(i)>t}function h(n){var t,a,r,l,h;return{lineStart:function(){l=r=!1;h=1},point:function(v,y){var w,p=[v,y],b=o(v,y),d=f?b?0:s(v,y):b?s(v+(0>v?u:-u),y):0,k;(!t&&(l=r=b)&&n.lineStart(),b!==r&&(w=e(t,p),(cu(t,w)||cu(p,w))&&(p[0]+=i,p[1]+=i,b=o(p[0],p[1]))),b!==r)?(h=0,b?(n.lineStart(),w=e(p,t),n.point(w[0],w[1])):(w=e(t,p),n.point(w[0],w[1]),n.lineEnd()),t=w):c&&t&&f^b&&(d&a||!(k=e(p,t,!0))||(h=0,f?(n.lineStart(),n.point(k[0][0],k[0][1]),n.point(k[1][0],k[1][1]),n.lineEnd()):(n.point(k[1][0],k[1][1]),n.lineEnd(),n.lineStart(),n.point(k[0][0],k[0][1]))));!b||t&&cu(t,p)||n.point(p[0],p[1]);t=p;r=b;a=d},lineEnd:function(){r&&n.lineEnd();t=null},clean:function(){return h|(l&&r)<<1}}}function e(n,r,f){var ft=ci(n),et=ci(r),it=[1,0,0],l=rr(ft,et),rt=eu(l,l),w=l[0],b=rt-w*w,d,e,tt;if(!b)return!f&&n;var ot=t*rt/b,st=-t*w/b,ht=rr(it,l),o=ou(it,ot),ct=ou(l,st);yo(o,ct);var a=ht,y=eu(o,a),k=eu(a,a),ut=y*y-k*(eu(o,o)-1);if(!(0>ut)){if(d=Math.sqrt(ut),e=ou(a,(-y-d)/k),yo(e,o),e=hu(e),!f)return e;var p,s=n[0],v=r[0],h=n[1],c=r[1];s>v&&(p=s,s=v,v=p);var g=v-s,nt=Math.abs(g-u)<i,lt=nt||i>g;if(!nt&&h>c&&(p=h,h=c,c=p),lt?nt?h+c>0^e[1]<(Math.abs(e[0]-s)<i?h:c):h<=e[1]&&e[1]<=c:g>u^(s<=e[0]&&e[0]<=v))return tt=ou(a,(-y+d)/k),yo(tt,o),[e,hu(tt)]}}function s(t,i){var e=f?n:u-n,r=0;return-e>t?r|=1:t>e&&(r|=2),-e>i?r|=4:i>e&&(r|=8),r}var t=Math.cos(n),f=t>0,c=Math.abs(t)>i,l=go(n,6*r);return oa(o,h,l,f?[0,-n]:[-u,n-u])}function ha(t,r,u,f){function e(n,f){return Math.abs(n[0]-t)<i?f>0?0:3:Math.abs(n[0]-u)<i?f>0?2:1:Math.abs(n[1]-r)<i?f>0?1:0:f>0?3:2}function s(n,t){return o(n.point,t.point)}function o(n,t){var i=e(n,1),r=e(t,1);return i!==r?i-r:0===i?t[1]-n[1]:1===i?n[0]-t[0]:2===i?n[1]-t[1]:t[0]-n[0]}function h(n,e){var s=e[0]-n[0],h=e[1]-n[1],o=[0,1];return Math.abs(s)<i&&Math.abs(h)<i?t<=n[0]&&n[0]<=u&&r<=n[1]&&n[1]<=f:lu(t-n[0],s,o)&&lu(n[0]-u,-s,o)&&lu(r-n[1],h,o)&&lu(n[1]-f,-h,o)?(o[1]<1&&(e[0]=n[0]+o[1]*s,e[1]=n[1]+o[1]*h),o[0]>0&&(n[0]+=o[0]*s,n[1]+=o[0]*h),!0):!1}return function(i){function ot(n){for(var r=0,s=l.length,u=n[1],f=0;s>f;++f)for(var t,e=1,o=l[f],h=o.length,i=o[0];h>e;++e)t=o[e],i[1]<=u?t[1]>u&&g(i,t,n)>0&&++r:t[1]<=u&&g(i,t,n)<0&&--r,i=t;return 0!==r}function g(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(t[1]-n[1])}function nt(n,i,s,h){var c=0,l=0;if(null==n||(c=e(n,s))!==(l=e(i,s))||o(n,i)<0^s>0){do h.point(0===c||3===c?t:u,c>1?f:r);while((c=(c+s+4)%4)!==l)}else h.point(i[0],i[1])}function tt(n,i){return n>=t&&u>=n&&i>=r&&f>=i}function it(n,t){tt(n,t)&&i.point(n,t)}function st(){d.point=rt;l&&l.push(y=[]);b=!0;a=!1;p=w=NaN}function ht(){c&&(rt(ut,ft),et&&a&&k.rejoin(),c.push(k.buffer()));d.point=it;a&&i.lineEnd()}function rt(n,t){var r,u,f;n=Math.max(-te,Math.min(te,n));t=Math.max(-te,Math.min(te,t));r=tt(n,t);(l&&y.push([n,t]),b)?(ut=n,ft=t,et=r,b=!1,r&&(i.lineStart(),i.point(n,t))):r&&a?i.point(n,t):(u=[p,w],f=[n,t],h(u,f)?(a||(i.lineStart(),i.point(u[0],u[1])),i.point(f[0],f[1]),r||i.lineEnd(),v=!1):r&&(i.lineStart(),i.point(n,t),v=!1));p=n;w=t;a=r}var c,l,y,ut,ft,et,p,w,a,b,v,ct=i,k=sa(),d={point:it,lineStart:st,lineEnd:ht,polygonStart:function(){i=k;c=[];l=[];v=!0},polygonEnd:function(){i=ct;c=n.merge(c);var r=ot([t,f]),u=v&&r,e=c.length;(u||e)&&(i.polygonStart(),u&&(i.lineStart(),nt(null,null,1,i),i.lineEnd()),e&&fa(c,s,r,nt,i),i.polygonEnd());c=l=y=null}};return d}}function lu(n,t,r){if(Math.abs(t)<i)return 0>=n;var u=n/t;if(t>0){if(u>r[1])return!1;u>r[0]&&(r[0]=u)}else{if(u<r[0])return!1;u<r[1]&&(r[1]=u)}return!0}function ca(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),i}function wo(n){var t=0,i=u/3,r=bo(n),f=r(t,i);return f.parallels=function(n){return arguments.length?r(t=n[0]*u/180,i=n[1]*u/180):[180*(t/u),180*(i/u)]},f}function la(n,t){function f(n,t){var r=Math.sqrt(u-2*i*Math.sin(t))/i;return[r*Math.sin(n*=i),e-r*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),e=Math.sqrt(u)/i;return f.invert=function(n,t){var r=e-t;return[Math.atan2(n,r)/i,hi((u-(n*n+r*r)*i*i)/(2*i))]},f}function gb(){function i(i,r){bh+=t*i-n*r;n=i;t=r}var r,u,n,t;ei.point=function(f,e){ei.point=i;r=n=f;u=t=e};ei.lineEnd=function(){i(r,u)}}function nk(n,t){ie>n&&(ie=n);n>ue&&(ue=n);re>t&&(re=t);t>fe&&(fe=t)}function tk(){function i(n,i){t.push("M",n,",",i,u)}function f(i,r){t.push("M",i,",",r);n.point=e}function e(n,i){t.push("L",n,",",i)}function r(){n.point=i}function o(){t.push("Z")}var u=aa(4.5),t=[],n={point:i,lineStart:function(){n.point=f},lineEnd:r,polygonStart:function(){n.lineEnd=o},polygonEnd:function(){n.lineEnd=r;n.point=i},pointRadius:function(t){return u=aa(t),n},result:function(){if(t.length){var n=t.join("");return t=[],n}}};return n}function aa(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function li(n,t){pi+=n;wi+=t;++pt}function va(){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ri+=u*(n+i)/2;ui+=u*(t+r)/2;st+=u;li(n=i,t=r)}var n,t;it.point=function(r,u){it.point=i;li(n=r,t=u)}}function ya(){it.point=li}function ik(){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ri+=u*(n+i)/2;ui+=u*(t+r)/2;st+=u;u=t*i-n*r;fr+=u*(n+i);er+=u*(t+r);fi+=3*u;li(n=i,t=r)}var r,u,n,t;it.point=function(f,e){it.point=i;li(r=n=f,u=t=e)};it.lineEnd=function(){i(r,u)}}function rk(n){function i(t,i){n.moveTo(t,i);n.arc(t,i,u,0,nt)}function f(i,r){n.moveTo(i,r);t.point=e}function e(t,i){n.lineTo(t,i)}function r(){t.point=i}function o(){n.closePath()}var u=4.5,t={point:i,lineStart:function(){t.point=f},lineEnd:r,polygonStart:function(){t.lineEnd=o},polygonEnd:function(){t.lineEnd=r;t.point=i},pointRadius:function(n){return u=n,t},result:h};return t}function pa(n){function f(i){function y(t,r){t=n(t,r);i.point(t[0],t[1])}function c(){u=NaN;r.point=l;i.lineStart()}function l(r,c){var l=ci([r,c]),a=n(r,c);t(u,f,v,o,s,h,u=a[0],f=a[1],v=r,o=l[0],s=l[1],h=l[2],e,i);i.point(u,f)}function a(){r.point=y;i.lineEnd()}function nt(){c();r.point=tt;r.lineEnd=it}function tt(n,t){l(p=n,rt=t);w=u;b=f;k=o;d=s;g=h;r.point=l}function it(){t(u,f,v,o,s,h,w,b,p,k,d,g,e,i);r.lineEnd=a;a()}var p,rt,w,b,k,d,g,v,u,f,o,s,h,r={point:y,lineStart:c,lineEnd:a,polygonStart:function(){i.polygonStart();r.lineStart=nt},polygonEnd:function(){i.polygonEnd();r.lineStart=c}};return r}function t(r,f,e,s,h,c,l,a,v,y,p,w,b,k){var tt=l-r,it=a-f,ft=tt*tt+it*it;if(ft>4*u&&b--){var g=s+y,nt=h+p,d=c+w,et=Math.sqrt(g*g+nt*nt+d*d),at=Math.asin(d/=et),ot=Math.abs(Math.abs(d)-1)<i?(e+v)/2:Math.atan2(nt,g),st=n(ot,at),rt=st[0],ut=st[1],ht=rt-r,ct=ut-f,lt=it*ht-tt*ct;(lt*lt/ft>u||Math.abs((tt*ht+it*ct)/ft-.5)>.3||o>s*y+h*p+c*w)&&(t(r,f,e,s,h,c,rt,ut,ot,g/=et,nt/=et,d,b,k),k.point(rt,ut),t(rt,ut,ot,g,nt,d,l,a,v,y,p,w,b,k))}}var u=.5,o=Math.cos(30*r),e=16;return f.precision=function(n){return arguments.length?(e=(u=n*n)>0&&16,f):Math.sqrt(u)},f}function au(n){this.stream=n}function uk(n){var t=pa(function(t,i){return n([t*o,i*o])});return function(n){var i=new au(n=t(n));return i.point=function(t,i){n.point(t*r,i*r)},i}}function gt(n){return bo(function(){return n})()}function bo(t){function i(n){return n=v(n[0]*r,n[1]*r),[n[0]*u+h,c-n[1]*u]}function et(n){return n=v.invert((n[0]-h)/u,(c-n[1])/u),n&&[n[0]*o,n[1]*o]}function e(){v=ca(tt=ko(k,d,g),s);var n=s(w,b);return h=y-n[0]*u,c=p+n[1]*u,a()}function a(){return f&&(f.valid=!1,f=null),i}var s,tt,v,h,c,f,it=pa(function(n,t){return n=s(n,t),[n[0]*u+h,c-n[1]*u]}),u=150,y=480,p=250,w=0,b=0,k=0,d=0,g=0,rt=gp,ut=l,nt=null,ft=null;return i.stream=function(n){return f&&(f.valid=!1),f=fk(rt(tt,it(ut(n)))),f.valid=!0,f},i.clipAngle=function(n){return arguments.length?(rt=null==n?(nt=n,gp):db((nt=+n)*r),a()):nt},i.clipExtent=function(n){return arguments.length?(ft=n,ut=n?ha(n[0][0],n[0][1],n[1][0],n[1][1]):l,a()):ft},i.scale=function(n){return arguments.length?(u=+n,e()):u},i.translate=function(n){return arguments.length?(y=+n[0],p=+n[1],e()):[y,p]},i.center=function(n){return arguments.length?(w=n[0]%360*r,b=n[1]%360*r,e()):[w*o,b*o]},i.rotate=function(n){return arguments.length?(k=n[0]%360*r,d=n[1]%360*r,g=n.length>2?n[2]%360*r:0,e()):[k*o,d*o,g*o]},n.rebind(i,it,"precision"),function(){return s=t.apply(this,arguments),i.invert=s.invert&&et,e()}}function fk(n){var t=new au(n);return t.point=function(t,i){n.point(t*r,i*r)},t}function hr(n,t){return[n,t]}function wa(n,t){return[n>u?n-nt:-u>n?n+nt:n,t]}function ko(n,t,i){return n?t||i?ca(ka(n),da(t,i)):ka(n):t||i?da(t,i):wa}function ba(n){return function(t,i){return t+=n,[t>u?t-nt:-u>t?t+nt:t,i]}}function ka(n){var t=ba(n);return t.invert=ba(-n),t}function da(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*i+o*r;return[Math.atan2(s*u-c*f,o*i-h*r),hi(c*u+s*f)]}var i=Math.cos(n),r=Math.sin(n),u=Math.cos(t),f=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*u-s*f;return[Math.atan2(s*u+h*f,o*i+c*r),hi(c*i-o*r)]},e}function go(n,t){var i=Math.cos(n),r=Math.sin(n);return function(u,f,e,o){var h=e*t,c,s;for(null!=u?(u=ga(i,u),f=ga(i,f),(e>0?f>u:u>f)&&(u+=e*nt)):(u=n+e*nt,f=n-.5*h),s=u;e>0?s>f:f>s;s-=h)o.point((c=hu([i,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function ga(n,t){var r=ci(t),u;return r[0]-=n,su(r),u=cl(-r[1]),((-r[2]<0?-u:u)+2*Math.PI-i)%(2*Math.PI)}function nv(t,r,u){var f=n.range(t,r-i,u).concat(r);return function(n){return f.map(function(t){return[n,t]})}}function tv(t,r,u){var f=n.range(t,r-i,u).concat(r);return function(n){return f.map(function(t){return[t,n]})}}function ns(n){return n.source}function ts(n){return n.target}function ek(n,t,i,r){var f=Math.cos(t),c=Math.sin(t),e=Math.cos(r),l=Math.sin(r),a=f*Math.cos(n),v=f*Math.sin(n),y=e*Math.cos(i),p=e*Math.sin(i),u=2*Math.asin(Math.sqrt(al(r-t)+f*e*al(i-n))),s=1/Math.sin(u),h=u?function(n){var t=Math.sin(n*=u)*s,i=Math.sin(u-n)*s,r=i*a+t*y,f=i*v+t*p,e=i*c+t*l;return[Math.atan2(f,r)*o,Math.atan2(e,Math.sqrt(r*r+f*f))*o]}:function(){return[n*o,t*o]};return h.distance=u,h}function ok(){function u(u,f){var s=Math.sin(f*=r),o=Math.cos(f),e=Math.abs((u*=r)-i),h=Math.cos(e);kh+=Math.atan2(Math.sqrt((e=o*Math.sin(e))*e+(e=t*s-n*o*h)*e),n*s+t*o*h);i=u;n=s;t=o}var i,n,t;bi.point=function(f,e){i=f*r;n=Math.sin(e*=r);t=Math.cos(e);bi.point=u};bi.lineEnd=function(){bi.point=bi.lineEnd=h}}function cr(n,t){function i(t,i){var f=Math.cos(t),r=Math.cos(i),u=n(f*r);return[u*r*Math.sin(t),u*Math.sin(i)]}return i.invert=function(n,i){var r=Math.sqrt(n*n+i*i),u=t(r),f=Math.sin(u),e=Math.cos(u);return[Math.atan2(n*f,r*e),Math.asin(r&&i*f/r)]},i}function iv(n,t){function o(n,t){var u=Math.abs(Math.abs(t)-w)<i?0:e/Math.pow(f(t),r);return[u*Math.sin(r*n),e-u*Math.cos(r*n)]}var s=Math.cos(n),f=function(n){return Math.tan(u/4+n/2)},r=n===t?Math.sin(n):Math.log(s/Math.cos(t))/Math.log(f(t)/f(n)),e=s*Math.pow(f(n),r)/r;return r?(o.invert=function(n,t){var i=e-t,u=hl(r)*Math.sqrt(n*n+i*i);return[Math.atan2(n,i)/r,2*Math.atan(Math.pow(e/u,1/r))-w]},o):vu}function rv(n,t){function f(n,t){var i=u-t;return[i*Math.sin(r*n),u-i*Math.cos(r*n)]}var e=Math.cos(n),r=n===t?Math.sin(n):(e-Math.cos(t))/(t-n),u=e/r+n;return Math.abs(r)<i?hr:(f.invert=function(n,t){var i=u-t;return[Math.atan2(n,i)/r,u-hl(r)*Math.sqrt(n*n+i*i)]},f)}function vu(n,t){return[n,Math.log(Math.tan(u/4+t/2))]}function uv(n){var i,t=gt(n),r=t.scale,f=t.translate,e=t.clipExtent;return t.scale=function(){var n=r.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.translate=function(){var n=f.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.clipExtent=function(n){var h=e.apply(t,arguments),o,s;return h===t?(i=null==n)&&(o=u*r(),s=f(),e([[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]])):i&&(h=null),h},t.clipExtent(null)}function is(n,t){var i=Math.cos(t)*Math.sin(n);return[Math.log((1+i)/(1-i))/2,Math.atan2(Math.tan(t),Math.cos(n))]}function fv(n){function t(t){function a(){l.push("M",i(n(s),o))}for(var c,l=[],s=[],h=-1,v=t.length,y=e(r),p=e(u);++h<v;)f.call(this,c=t[h],h)?s.push([+y.call(this,c,h),+p.call(this,c,h)]):s.length&&(a(),s=[]);return s.length&&a(),l.length?l.join(""):null}var r=ut,u=ct,f=sr,i=k,s=i.key,o=.7;return t.x=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(f=n,t):f},t.interpolate=function(n){return arguments.length?(s="function"==typeof n?i=n:(i=ee.get(n)||k).key,t):s},t.tension=function(n){return arguments.length?(o=n,t):o},t}function ut(n){return n[0]}function ct(n){return n[1]}function k(n){return n.join("L")}function sk(n){return k(n)+"Z"}function hk(n){for(var r=0,u=n.length,t=n[0],i=[t[0],",",t[1]];++r<u;)i.push("H",(t[0]+(t=n[r])[0])/2,"V",t[1]);return u>1&&i.push("H",t[0]),i.join("")}function rs(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("V",(t=n[i])[1],"H",t[0]);return r.join("")}function us(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("H",(t=n[i])[0],"V",t[1]);return r.join("")}function ck(n,t){return n.length<4?k(n):n[1]+yu(n.slice(1,n.length-1),fs(n,t))}function lk(n,t){return n.length<3?k(n):n[0]+yu((n.push(n[0]),n),fs([n[n.length-2]].concat(n,[n[1]]),t))}function ak(n,t){return n.length<3?k(n):n[0]+yu(n,fs(n,t))}function yu(n,t){var o,h;if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return k(n);var c=n.length!=t.length,f="",s=n[0],i=n[1],e=t[0],r=e,u=1;if(c&&(f+="Q"+(i[0]-2*e[0]/3)+","+(i[1]-2*e[1]/3)+","+i[0]+","+i[1],s=n[1],u=2),t.length>1)for(r=t[1],i=n[u],u++,f+="C"+(s[0]+e[0])+","+(s[1]+e[1])+","+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1],o=2;o<t.length;o++,u++)i=n[u],r=t[o],f+="S"+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1];return c&&(h=n[u],f+="Q"+(i[0]+2*r[0]/3)+","+(i[1]+2*r[1]/3)+","+h[0]+","+h[1]),f}function fs(n,t){for(var r,u=[],f=(1-t)/2,e=n[0],i=n[1],o=1,s=n.length;++o<s;)r=e,e=i,i=n[o],u.push([f*(i[0]-r[0]),f*(i[1]-r[1])]);return u}function ev(n){if(n.length<3)return k(n);var o=1,s=n.length,t=n[0],i=t[0],r=t[1],u=[i,i,i,(t=n[1])[0]],f=[r,r,r,t[1]],e=[i,",",r,"L",d(oi,u),",",d(oi,f)];for(n.push(n[s-1]);++o<=s;)t=n[o],u.shift(),u.push(t[0]),f.shift(),f.push(t[1]),es(e,u,f);return n.pop(),e.push("L",t),e.join("")}function vk(n){if(n.length<4)return k(n);for(var t,f=[],i=-1,e=n.length,r=[0],u=[0];++i<3;)t=n[i],r.push(t[0]),u.push(t[1]);for(f.push(d(oi,r)+","+d(oi,u)),--i;++i<e;)t=n[i],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),es(f,r,u);return f.join("")}function yk(n){for(var f,t,i=-1,e=n.length,o=e+4,r=[],u=[];++i<4;)t=n[i%e],r.push(t[0]),u.push(t[1]);for(f=[d(oi,r),",",d(oi,u)],--i;++i<o;)t=n[i%e],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),es(f,r,u);return f.join("")}function pk(n,t){var i=n.length-1;if(i)for(var r,u,e=n[0][0],o=n[0][1],s=n[i][0]-e,h=n[i][1]-o,f=-1;++f<=i;)r=n[f],u=f/i,r[0]=t*r[0]+(1-t)*(e+u*s),r[1]=t*r[1]+(1-t)*(o+u*h);return ev(n)}function d(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function es(n,t,i){n.push("C",d(nw,t),",",d(nw,i),",",d(tw,t),",",d(tw,i),",",d(oi,t),",",d(oi,i))}function os(n,t){return(t[1]-n[1])/(t[0]-n[0])}function wk(n){for(var t=0,e=n.length-1,i=[],f=n[0],r=n[1],u=i[0]=os(f,r);++t<e;)i[t]=(u+(u=os(f=r,r=n[t+1])))/2;return i[t]=u,i}function bk(n){for(var f,e,o,r,h=[],u=wk(n),t=-1,s=n.length-1;++t<s;)f=os(n[t],n[t+1]),Math.abs(f)<i?u[t]=u[t+1]=0:(e=u[t]/f,o=u[t+1]/f,r=e*e+o*o,r>9&&(r=3*f/Math.sqrt(r),u[t]=r*e,u[t+1]=r*o));for(t=-1;++t<=s;)r=(n[Math.min(s,t+1)][0]-n[Math.max(0,t-1)][0])/(6*(1+u[t]*u[t])),h.push([r||0,u[t]*r||0]);return h}function kk(n){return n.length<3?k(n):n[0]+yu(n,bk(n))}function dk(n,t,i,r){var u,f,e,o,s,h,c;return u=r[n],f=u[0],e=u[1],u=r[t],o=u[0],s=u[1],u=r[i],h=u[0],c=u[1],(c-e)*(o-f)-(s-e)*(h-f)>0}function ss(n,t,i){return(i[0]-t[0])*(n[1]-t[1])<(i[1]-t[1])*(n[0]-t[0])}function ov(n,t,i,r){var u=n[0],e=i[0],o=t[0]-u,s=r[0]-e,f=n[1],h=i[1],c=t[1]-f,l=r[1]-h,a=(s*(f-h)-l*(u-e))/(l*o-s*c);return[u+a*o,f+a*c]}function sv(n){var t=n[0],i=n[n.length-1];return!(t[0]-i[0]||t[1]-i[1])}function hs(n,t){var l={list:n.map(function(n,t){return{index:t,x:n[0],y:n[1]}}).sort(function(n,t){return n.y<t.y?-1:n.y>t.y?1:n.x<t.x?-1:n.x>t.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l");i.rightEnd=i.createHalfEdge(null,"l");i.leftEnd.r=i.rightEnd;i.rightEnd.l=i.leftEnd;i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(n,t){return{edge:n,side:t,vertex:null,l:null,r:null}},insert:function(n,t){t.l=n;t.r=n.r;n.r.l=t;n.r=t},leftBound:function(n){var t=i.leftEnd;do t=t.r;while(t!=i.rightEnd&&e.rightOf(t,n));return t.l},del:function(n){n.l.r=n.r;n.r.l=n.l;n.edge=null},right:function(n){return n.r},left:function(n){return n.l},leftRegion:function(n){return null==n.edge?l.bottomSite:n.edge.region[n.side]},rightRegion:function(n){return null==n.edge?l.bottomSite:n.edge.region[oe[n.side]]}},e={bisect:function(n,t){var u={region:{l:n,r:t},ep:{l:null,r:null}},i=t.x-n.x,r=t.y-n.y,f=i>0?i:-i,e=r>0?r:-r;return u.c=n.x*i+n.y*r+.5*(i*i+r*r),f>e?(u.a=1,u.b=r/i,u.c/=i):(u.b=1,u.a=i/r,u.c/=r),u},intersect:function(n,t){var i=n.edge,r=t.edge,u,h;if(!i||!r||i.region.r==r.region.r||(u=i.a*r.b-i.b*r.a,Math.abs(u)<1e-10))return null;var f,e,c=(i.c*r.b-r.c*i.b)/u,l=(r.c*i.a-i.c*r.a)/u,o=i.region.r,s=r.region.r;return o.y<s.y||o.y==s.y&&o.x<s.x?(f=n,e=i):(f=t,e=r),h=c>=e.region.r.x,h&&"l"===f.side||!h&&"r"===f.side?null:{x:c,y:l}},rightOf:function(n,t){var i=n.edge,u=i.region.r,f=t.x>u.x,h;if(f&&"l"===n.side)return 1;if(!f&&"r"===n.side)return 0;if(1===i.a){var e=t.y-u.y,o=t.x-u.x,s=0,r=0;(!f&&i.b<0||f&&i.b>=0?r=s=e>=i.b*o:(r=t.x+t.y*i.b>i.c,i.b<0&&(r=!r),r||(s=1)),s)||(h=u.x-i.region.l.x,r=i.b*(o*o-e*e)<h*e*(1+2*o/h+i.b*i.b),i.b<0&&(r=!r))}else{var c=i.c-i.a*t.x,l=t.y-c,a=t.x-u.x,v=c-u.y;r=l*l>a*a+v*v}return"l"===n.side?r:!r},endPoint:function(n,i,r){n.ep[i]=r;n.ep[oe[i]]&&t(n)},distance:function(n,t){var i=n.x-t.x,r=n.y-t.y;return Math.sqrt(i*i+r*r)}},u={list:[],insert:function(n,t,i){var f;n.vertex=t;n.ystar=t.y+i;for(var r=0,e=u.list,o=e.length;o>r;r++)if(f=e[r],!(n.ystar>f.ystar||n.ystar==f.ystar&&t.x>f.vertex.x))break;e.splice(r,0,n)},del:function(n){for(var t=0,i=u.list,r=i.length;r>t&&i[t]!=n;++t);i.splice(t,1)},empty:function(){return 0===u.list.length},nextEvent:function(n){for(var t=0,i=u.list,r=i.length;r>t;++t)if(i[t]==n)return i[t+1];return null},min:function(){var n=u.list[0];return{x:n.vertex.x,y:n.ystar}},extractMin:function(){return u.list.shift()}},p,r,h,v,k,o,c,y,d,f,w,a,b,s;for(i.init(),l.bottomSite=l.list.shift(),s=l.list.shift();;)if(u.empty()||(p=u.min()),s&&(u.empty()||s.y<p.y||s.y==p.y&&s.x<p.x))r=i.leftBound(s),h=i.right(r),c=i.rightRegion(r),a=e.bisect(c,s),o=i.createHalfEdge(a,"l"),i.insert(r,o),f=e.intersect(r,o),f&&(u.del(r),u.insert(r,f,e.distance(f,s))),r=o,o=i.createHalfEdge(a,"r"),i.insert(r,o),f=e.intersect(o,h),f&&u.insert(o,f,e.distance(f,s)),s=l.list.shift();else{if(u.empty())break;r=u.extractMin();v=i.left(r);h=i.right(r);k=i.right(h);c=i.leftRegion(r);y=i.rightRegion(h);w=r.vertex;e.endPoint(r.edge,r.side,w);e.endPoint(h.edge,h.side,w);i.del(r);u.del(h);i.del(h);b="l";c.y>y.y&&(d=c,c=y,y=d,b="r");a=e.bisect(c,y);o=i.createHalfEdge(a,b);i.insert(v,o);e.endPoint(a,oe[b],w);f=e.intersect(v,o);f&&(u.del(v),u.insert(v,f,e.distance(f,c)));f=e.intersect(o,k);f&&u.insert(o,f,e.distance(f,c))}for(r=i.right(i.leftEnd);r!=i.rightEnd;r=i.right(r))t(r.edge)}function gk(n){return n.x}function nd(n){return n.y}function hv(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function lr(n,t,i,r,u,f){if(!n(t,i,r,u,f)){var o=.5*(i+u),s=.5*(r+f),e=t.nodes;e[0]&&lr(n,e[0],i,r,o,s);e[1]&&lr(n,e[1],o,r,u,s);e[2]&&lr(n,e[2],i,s,o,f);e[3]&&lr(n,e[3],o,s,u,f)}}function cs(t,i){t=n.rgb(t);i=n.rgb(i);var r=t.r,u=t.g,f=t.b,e=i.r-r,o=i.g-u,s=i.b-f;return function(n){return"#"+ir(Math.round(r+e*n))+ir(Math.round(u+o*n))+ir(Math.round(f+s*n))}}function cv(n,t){var i,u={},r={};for(i in n)i in t?u[i]=ai(n[i],t[i]):r[i]=n[i];for(i in t)i in n||(r[i]=t[i]);return function(n){for(i in u)r[i]=u[i](n);return r}}function lt(n,t){return t-=n=+n,function(i){return n+t*i}}function lv(n,t){var s,u,f,o,i,h=0,c=0,r=[],e=[];for(n+="",t+="",gr.lastIndex=0,u=0;s=gr.exec(t);++u)s.index&&r.push(t.substring(h,c=s.index)),e.push({i:r.length,x:s[0]}),r.push(null),h=gr.lastIndex;for(h<t.length&&r.push(t.substring(h)),u=0,o=e.length;(s=gr.exec(n))&&o>u;++u)if(i=e[u],i.x==s[0]){if(i.i)if(null==r[i.i+1])for(r[i.i-1]+=i.x,r.splice(i.i,1),f=u+1;o>f;++f)e[f].i--;else for(r[i.i-1]+=i.x+r[i.i+1],r.splice(i.i,2),f=u+1;o>f;++f)e[f].i-=2;else if(null==r[i.i+1])r[i.i]=i.x;else for(r[i.i]=i.x+r[i.i+1],r.splice(i.i+1,1),f=u+1;o>f;++f)e[f].i--;e.splice(u,1);o--;u--}else i.x=lt(parseFloat(s[0]),parseFloat(i.x));for(;o>u;)i=e.pop(),null==r[i.i+1]?r[i.i]=i.x:(r[i.i]=i.x+r[i.i+1],r.splice(i.i+1,1)),o--;return 1===r.length?null==r[0]?(i=e[0].x,function(n){return i(n)+""}):function(){return t}:function(n){for(u=0;o>u;++u)r[(i=e[u]).i]=i.x(n);return r.join("")}}function ai(t,i){for(var r,u=n.interpolators.length;--u>=0&&!(r=n.interpolators[u](t,i)););return r}function pu(n,t){for(var u=[],r=[],e=n.length,o=t.length,f=Math.min(n.length,t.length),i=0;f>i;++i)u.push(ai(n[i],t[i]));for(;e>i;++i)r[i]=n[i];for(;o>i;++i)r[i]=t[i];return function(n){for(i=0;f>i;++i)r[i]=u[i](n);return r}}function td(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function av(n){return function(t){return 1-n(1-t)}}function vv(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function id(n){return n*n}function rd(n){return n*n*n}function ud(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,i=t*n;return 4*(.5>n?i:3*(n-t)+i-.75)}function fd(n){return function(t){return Math.pow(t,n)}}function ed(n){return 1-Math.cos(n*w)}function od(n){return Math.pow(2,10*(n-1))}function sd(n){return 1-Math.sqrt(1-n*n)}function hd(n,t){var i;return arguments.length<2&&(t=.45),arguments.length?i=t/nt*Math.asin(1/n):(n=1,i=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-i)*nt/t)}}function cd(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function ld(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function ad(t,i){t=n.hcl(t);i=n.hcl(i);var u=t.h,f=t.c,o=t.l,r=i.h-u,e=i.c-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.c:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return to(u+r*n,f+e*n,o+s*n)+""}}function vd(t,i){t=n.hsl(t);i=n.hsl(i);var u=t.h,f=t.s,o=t.l,r=i.h-u,e=i.s-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.s:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return no(u+r*n,f+e*n,o+s*n)+""}}function yd(t,i){t=n.lab(t);i=n.lab(i);var r=t.l,u=t.a,f=t.b,e=i.l-r,o=i.a-u,s=i.b-f;return function(n){return vl(r+e*n,u+o*n,f+s*n)+""}}function yv(n,t){return t-=n,function(i){return Math.round(n+t*i)}}function pv(n){var t=[n.a,n.b],i=[n.c,n.d],r=bv(t),u=wv(t,i),f=bv(pd(i,t,-u))||0;t[0]*i[1]<i[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1);this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-i[0],i[1]))*o;this.translate=[n.e,n.f];this.scale=[r,f];this.skew=f?Math.atan2(u,f)*o:0}function wv(n,t){return n[0]*t[0]+n[1]*t[1]}function bv(n){var t=Math.sqrt(wv(n,n));return t&&(n[0]/=t,n[1]/=t),t}function pd(n,t,i){return n[0]+=i*t[0],n[1]+=i*t[1],n}function kv(t,i){var s,r=[],o=[],c=n.transform(t),l=n.transform(i),a=c.translate,u=l.translate,h=c.rotate,f=l.rotate,p=c.skew,v=l.skew,y=c.scale,e=l.scale;return a[0]!=u[0]||a[1]!=u[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:lt(a[0],u[0])},{i:3,x:lt(a[1],u[1])})):u[0]||u[1]?r.push("translate("+u+")"):r.push(""),h!=f?(h-f>180?f+=360:f-h>180&&(h+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:lt(h,f)})):f&&r.push(r.pop()+"rotate("+f+")"),p!=v?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:lt(p,v)}):v&&r.push(r.pop()+"skewX("+v+")"),y[0]!=e[0]||y[1]!=e[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:s-4,x:lt(y[0],e[0])},{i:s-2,x:lt(y[1],e[1])})):(1!=e[0]||1!=e[1])&&r.push(r.pop()+"scale("+e+")"),s=o.length,function(n){for(var t,i=-1;++i<s;)r[(t=o[i]).i]=t.x(n);return r.join("")}}function wd(n,t){return t=t-(n=+n)?1/(t-n):0,function(i){return(i-n)*t}}function bd(n,t){return t=t-(n=+n)?1/(t-n):0,function(i){return Math.max(0,Math.min(1,(i-n)*t))}}function kd(n){for(var f,t=n.source,i=n.target,u=dd(t,i),r=[t];t!==u;)t=t.parent,r.push(t);for(f=r.length;i!==u;)r.splice(f,0,i),i=i.parent;return r}function dv(n){for(var i=[],t=n.parent;null!=t;)i.push(n),n=t,t=t.parent;return i.push(n),i}function dd(n,t){if(n===t)return n;for(var r=dv(n),u=dv(t),i=r.pop(),f=u.pop(),e=null;i===f;)e=i,i=r.pop(),f=u.pop();return e}function gd(n){n.fixed|=2}function ng(n){n.fixed&=-7}function tg(n){n.fixed|=4;n.px=n.x;n.py=n.y}function ig(n){n.fixed&=-5}function gv(n,t,i){var f=0,e=0,u;if(n.charge=0,!n.leaf)for(var r,o=n.nodes,h=o.length,s=-1;++s<h;)r=o[s],null!=r&&(gv(r,t,i),n.charge+=r.charge,f+=r.charge*r.cx,e+=r.charge*r.cy);n.point&&(n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5),u=t*i[n.point.index],n.charge+=n.pointCharge=u,f+=u*n.point.x,e+=u*n.point.y);n.cx=f/n.charge;n.cy=e/n.charge}function ar(t,i){return n.rebind(t,i,"sort","children","value"),t.nodes=t,t.links=eg,t}function rg(n){return n.children}function ug(n){return n.value}function fg(n,t){return t.value-n.value}function eg(t){return n.merge(t.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function og(n){return n.x}function sg(n){return n.y}function hg(n,t,i){n.y0=t;n.y=i}function ls(t){return n.range(t.length)}function as(n){for(var t=-1,r=n[0].length,i=[];++t<r;)i[t]=0;return i}function cg(n){for(var i,t=1,r=0,u=n[0][1],f=n.length;f>t;++t)(i=n[t][1])>u&&(r=t,u=i);return r}function lg(n){return n.reduce(ag,0)}function ag(n,t){return n+t[1]}function vg(n,t){return ny(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ny(n,t){for(var i=-1,r=+n[0],f=(n[1]-r)/t,u=[];++i<=t;)u[i]=f*i+r;return u}function yg(t){return[n.min(t),n.max(t)]}function ty(n,t){return n.parent==t.parent?1:2}function vs(n){var t=n.children;return t&&t.length?t[0]:n._tree.thread}function ys(n){var i,t=n.children;return t&&(i=t.length)?t[i-1]:n._tree.thread}function wu(n,t){var i=n.children,u,f,r;if(i&&(f=i.length))for(r=-1;++r<f;)t(u=wu(i[r],t),n)>0&&(n=u);return n}function pg(n,t){return n.x-t.x}function wg(n,t){return t.x-n.x}function bg(n,t){return n.depth-t.depth}function at(n,t){function i(n,r){var u=n.children,f,s,e,o;if(u&&(s=u.length))for(e=null,o=-1;++o<s;)f=u[o],i(f,e),e=f;t(n,r)}i(n,null)}function kg(n){for(var t,i=0,f=0,r=n.children,u=r.length;--u>=0;)t=r[u]._tree,t.prelim+=i,t.mod+=i,i+=t.shift+(f+=t.change)}function dg(n,t,i){n=n._tree;t=t._tree;var r=i/(t.number-n.number);n.change+=r;t.change-=r;t.shift+=i;t.prelim+=i;t.mod+=i}function gg(n,t,i){return n._tree.ancestor.parent==t.parent?n._tree.ancestor:i}function nn(n,t){return n.value-t.value}function ps(n,t){var i=n._pack_next;n._pack_next=t;t._pack_prev=n;t._pack_next=i;i._pack_prev=t}function iy(n,t){n._pack_next=t;t._pack_prev=n}function ry(n,t){var i=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>i*i+r*r}function uy(n){function h(n){c=Math.min(n.x-n.r,c);l=Math.max(n.x+n.r,l);a=Math.min(n.y-n.r,a);v=Math.max(n.y+n.r,v)}if((u=n.children)&&(s=u.length)){var u,i,r,t,f,e,o,s,c=1/0,l=-1/0,a=1/0,v=-1/0;if(u.forEach(tn),i=u[0],i.x=-i.r,i.y=0,h(i),s>1&&(r=u[1],r.x=r.r,r.y=0,h(r),s>2))for(t=u[2],ey(i,r,t),h(t),ps(i,t),i._pack_prev=t,ps(t,r),r=i._pack_next,f=3;s>f;f++){ey(i,r,t=u[f]);var y=0,p=1,w=1;for(e=r._pack_next;e!==r;e=e._pack_next,p++)if(ry(e,t)){y=1;break}if(1==y)for(o=i._pack_prev;o!==e._pack_prev&&!ry(o,t);o=o._pack_prev,w++);y?(w>p||p==w&&r.r<i.r?iy(i,r=e):iy(i=o,r),f--):(ps(i,t),r=t,h(t))}var k=(c+l)/2,d=(a+v)/2,b=0;for(f=0;s>f;f++)t=u[f],t.x-=k,t.y-=d,b=Math.max(b,t.r+Math.sqrt(t.x*t.x+t.y*t.y));n.r=b;u.forEach(rn)}}function tn(n){n._pack_next=n._pack_prev=n}function rn(n){delete n._pack_next;delete n._pack_prev}function fy(n,t,i,r){var u=n.children,f,e;if(n.x=t+=r*n.x,n.y=i+=r*n.y,n.r*=r,u)for(f=-1,e=u.length;++f<e;)fy(u[f],t,i,r)}function ey(n,t,i){var r=n.r+i.r,f=t.x-n.x,e=t.y-n.y,u,o,s,h;r&&(f||e)?(u=t.r+i.r,o=f*f+e*e,u*=u,r*=r,s=.5+(r-u)/(2*o),h=Math.sqrt(Math.max(0,2*u*(r+o)-(r-=o)*r-u*u))/(2*o),i.x=n.x+s*f+h*e,i.y=n.y+s*e-h*f):(i.x=n.x+r,i.y=n.y)}function un(t){return 1+n.max(t,function(n){return n.y})}function fn(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function oy(n){var t=n.children;return t&&t.length?oy(t[0]):n}function sy(n){var i,t=n.children;return t&&(i=t.length)?sy(t[i-1]):n}function ws(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function hy(n,t){var u=n.x+t[3],f=n.y+t[0],i=n.dx-t[1]-t[3],r=n.dy-t[0]-t[2];return 0>i&&(u+=i/2,i=0),0>r&&(f+=r/2,r=0),{x:u,y:f,dx:i,dy:r}}function ur(n){var t=n[0],i=n[n.length-1];return i>t?[t,i]:[i,t]}function bu(n){return n.rangeExtent?n.rangeExtent():ur(n.range())}function en(n,t,i,r){var u=i(n[0],n[1]),f=r(t[0],t[1]);return function(n){return f(u(n))}}function bs(n,t){var i,r=0,u=n.length-1,f=n[r],e=n[u];return f>e&&(i=r,r=u,u=i,i=f,f=e,e=i),n[r]=t.floor(f),n[u]=t.ceil(e),n}function on(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:sw}function sn(t,i,r,u){var o=[],s=[],f=0,e=Math.min(t.length,i.length)-1;for(t[e]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++f<=e;)o.push(r(t[f-1],t[f])),s.push(u(i[f-1],i[f]));return function(i){var r=n.bisect(t,i,1,e)-1;return s[r](o[r](i))}}function cy(n,t,i,r){function f(){var f=Math.min(n.length,t.length)>2?sn:en,s=r?bd:wd;return e=f(n,t,s,i),o=f(t,n,s,ai),u}function u(n){return e(n)}var e,o;return u.invert=function(n){return o(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),f()):n},u.range=function(n){return arguments.length?(t=n,f()):t},u.rangeRound=function(n){return u.range(n).interpolate(yv)},u.clamp=function(n){return arguments.length?(r=n,f()):r},u.interpolate=function(n){return arguments.length?(i=n,f()):i},u.ticks=function(t){return ds(n,t)},u.tickFormat=function(t,i){return gs(n,t,i)},u.nice=function(t){return ly(n,t),f()},u.copy=function(){return cy(n,t,i,r)},f()}function ks(t,i){return n.rebind(t,i,"range","rangeRound","interpolate","clamp")}function ly(n,t){return bs(n,on(vr(n,t)[2]))}function vr(n,t){null==t&&(t=10);var r=ur(n),f=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(f/t)/Math.LN10)),u=t/f*i;return.15>=u?i*=10:.35>=u?i*=5:.75>=u&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function ds(t,i){return n.range.apply(n,vr(t,i))}function gs(t,i,r){var u=-Math.floor(Math.log(vr(t,i)[2])/Math.LN10+.01);return n.format(r?r.replace(kp,function(n,t,i,r,f,e,o,s,h,c){return[t,i,r,f,e,o,s,h||"."+(u-2*("%"===c)),c].join("")}):",."+u+"f")}function ay(t,i,r,u){function e(n){return(r?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(i)}function o(n){return r?Math.pow(i,n):-Math.pow(i,-n)}function f(n){return t(e(n))}return f.invert=function(n){return o(t.invert(n))},f.domain=function(n){return arguments.length?(r=n[0]>=0,t.domain((u=n.map(Number)).map(e)),f):u},f.base=function(n){return arguments.length?(i=+n,t.domain(u.map(e)),f):i},f.nice=function(){var n=bs(u.map(e),r?Math:hw);return t.domain(n),u=n.map(o),f},f.ticks=function(){var h=ur(u),t=[],c=h[0],l=h[1],n=Math.floor(e(c)),s=Math.ceil(e(l)),a=i%1?2:i,f;if(isFinite(s-n)){if(r){for(;s>n;n++)for(f=1;a>f;f++)t.push(o(n)*f);t.push(o(n))}else for(t.push(o(n));n++<s;)for(f=a-1;f>0;f--)t.push(o(n)*f);for(n=0;t[n]<c;n++);for(s=t.length;t[s-1]>l;s--);t=t.slice(n,s)}return t},f.tickFormat=function(t,i){if(!arguments.length)return uc;arguments.length<2?i=uc:"function"!=typeof i&&(i=n.format(i));var u,s=Math.max(.1,t/f.ticks().length),h=r?(u=1e-12,Math.ceil):(u=-1e-12,Math.floor);return function(n){return n/o(h(e(n)+u))<=s?i(n):""}},f.copy=function(){return ay(t.copy(),i,r,u)},ks(f,t)}function vy(n,t,i){function r(t){return n(u(t))}var u=ku(t),f=ku(1/t);return r.invert=function(t){return f(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((i=t.map(Number)).map(u)),r):i},r.ticks=function(n){return ds(i,n)},r.tickFormat=function(n,t){return gs(i,n,t)},r.nice=function(n){return r.domain(ly(i,n))},r.exponent=function(e){return arguments.length?(u=ku(t=e),f=ku(1/t),n.domain(i.map(u)),r):t},r.copy=function(){return vy(n.copy(),t,i)},ks(r,n)}function ku(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function yy(t,i){function r(n){return u[((f.get(n)||"range"===i.t&&f.set(n,t.push(n)))-1)%u.length]}function o(i,r){return n.range(t.length).map(function(n){return i+r*n})}var f,u,e;return r.domain=function(n){if(!arguments.length)return t;t=[];f=new rt;for(var u,e=-1,o=n.length;++e<o;)f.has(u=n[e])||f.set(u,t.push(u));return r[i.t].apply(r,i.a)},r.range=function(n){return arguments.length?(u=n,e=0,i={t:"range",a:arguments},r):u},r.rangePoints=function(n,f){arguments.length<2&&(f=0);var s=n[0],h=n[1],c=(h-s)/(Math.max(1,t.length-1)+f);return u=o(t.length<2?(s+h)/2:s+c*f/2,c),e=0,i={t:"rangePoints",a:arguments},r},r.rangeBands=function(n,f,s){arguments.length<2&&(f=0);arguments.length<3&&(s=f);var h=n[1]<n[0],l=n[+h],a=n[1-h],c=(a-l)/(t.length-f+2*s);return u=o(l+c*s,c),h&&u.reverse(),e=c*(1-f),i={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(n,f,s){arguments.length<2&&(f=0);arguments.length<3&&(s=f);var h=n[1]<n[0],c=n[+h],a=n[1-h],l=Math.floor((a-c)/(t.length-f+2*s)),v=a-c-(t.length-f)*l;return u=o(c+Math.round(v/2),l),h&&u.reverse(),e=Math.round(l*(1-f)),i={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return e},r.rangeExtent=function(){return ur(i.a[0])},r.copy=function(){return yy(t,i)},r.domain(t)}function py(t,i){function f(){var f=0,e=i.length;for(r=[];++f<e;)r[f-1]=n.quantile(t,f/e);return u}function u(t){if(!isNaN(t=+t))return i[n.bisect(r,t)]}var r;return u.domain=function(i){return arguments.length?(t=i.filter(function(n){return!isNaN(n)}).sort(n.ascending),f()):t},u.range=function(n){return arguments.length?(i=n,f()):i},u.quantiles=function(){return r},u.invertExtent=function(n){return n=i.indexOf(n),0>n?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},u.copy=function(){return py(t,i)},f()}function wy(n,t,i){function r(t){return i[Math.max(0,Math.min(e,Math.floor(u*(t-n))))]}function f(){return u=i.length/(t-n),e=i.length-1,r}var u,e;return r.domain=function(i){return arguments.length?(n=+i[0],t=+i[i.length-1],f()):[n,t]},r.range=function(n){return arguments.length?(i=n,f()):i},r.invertExtent=function(t){return t=i.indexOf(t),t=0>t?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return wy(n,t,i)},f()}function by(t,i){function r(r){if(r>=r)return i[n.bisect(t,r)]}return r.domain=function(n){return arguments.length?(t=n,r):t},r.range=function(n){return arguments.length?(i=n,r):i},r.invertExtent=function(n){return n=i.indexOf(n),[t[n-1],t[n]]},r.copy=function(){return by(t,i)},r}function ky(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=i.map(t),t):n},t.ticks=function(t){return ds(n,t)},t.tickFormat=function(t,i){return gs(n,t,i)},t.copy=function(){return ky(n)},t}function hn(n){return n.innerRadius}function cn(n){return n.outerRadius}function dy(n){return n.startAngle}function gy(n){return n.endAngle}function np(n){for(var t,i,r,u=-1,f=n.length;++u<f;)t=n[u],i=t[0],r=t[1]+si,t[0]=i*Math.cos(r),t[1]=i*Math.sin(r);return n}function tp(n){function t(t){function b(){p.push("M",i(n(w),s),a,l(n(y.reverse()),s),"Z")}for(var v,k,d,p=[],y=[],w=[],c=-1,g=t.length,nt=e(f),tt=e(o),it=f===r?function(){return k}:e(r),rt=o===u?function(){return d}:e(u);++c<g;)h.call(this,v=t[c],c)?(y.push([k=+nt.call(this,v,c),d=+tt.call(this,v,c)]),w.push([+it.call(this,v,c),+rt.call(this,v,c)])):y.length&&(b(),y=[],w=[]);return y.length&&b(),p.length?p.join(""):null}var f=ut,r=ut,o=0,u=ct,h=sr,i=k,c=i.key,l=i,a="L",s=.7;return t.x=function(n){return arguments.length?(f=r=n,t):r},t.x0=function(n){return arguments.length?(f=n,t):f},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(o=u=n,t):u},t.y0=function(n){return arguments.length?(o=n,t):o},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(h=n,t):h},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?i=n:(i=ee.get(n)||k).key,l=i.reverse||i,a=i.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function ln(n){return n.radius}function ip(n){return[n.x,n.y]}function an(n){return function(){var t=n.apply(this,arguments),i=t[0],r=t[1]+si;return[i*Math.cos(r),i*Math.sin(r)]}}function vn(){return 64}function yn(){return"circle"}function rp(n){var t=Math.sqrt(n/u);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function yr(n,t){return ff(n,c),n.id=t,n}function nh(n,t,i,r){var u=n.id;return dt(n,"function"==typeof i?function(n,f,e){n.__transition__[u].tween.set(t,r(i.call(n,n.__data__,f,e)))}:(i=r(i),function(n){n.__transition__[u].tween.set(t,i)}))}function pn(n){return null==n&&(n=""),function(){this.textContent=n}}function du(t,i,r,u){var e=t.__transition__||(t.__transition__={active:0,count:0}),f=e[r],o;f||(o=u.time,f=e[r]={tween:new rt,time:o,ease:u.ease,delay:u.delay,duration:u.duration},++e.count,n.timer(function(n){function l(n){return e.active>r?s():(e.active=r,f.event&&f.event.start.call(t,h,i),f.tween.forEach(function(n,r){(r=r.call(t,h,i))&&c.push(r)}),a(n||1)?1:(dl(a,u,o),void 0))}function a(n){if(e.active!==r)return s();for(var u=n/y,l=v(u),o=c.length;o>0;)c[--o].call(t,l);if(u>=1)return(f.event&&f.event.end.call(t,h,i),s())}function s(){return--e.count?delete e[r]:delete t.__transition__,1}var h=t.__data__,v=f.ease,u=f.delay,y=f.duration,c=[];return n>=u?l(n-u):(dl(l,u,o),void 0)},0,o))}function up(n,t){n.attr("transform",function(n){return"translate("+t(n)+",0)"})}function fp(n,t){n.attr("transform",function(n){return"translate(0,"+t(n)+")"})}function vt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function vi(n,t,i){function e(t){var i=n(t),r=f(i,1);return r-t>t-i?i:r}function u(i){return t(i=n(new v(i-1)),1),i}function f(n,i){return t(n=new v(+n),i),n}function o(n,r,f){var e=u(n),o=[];if(f>1)for(;r>e;)i(e)%f||o.push(new Date(+e)),t(e,1);else for(;r>e;)o.push(new Date(+e)),t(e,1);return o}function s(n,t,i){try{v=vt;var r=new vt;return r._=n,o(r,t,i)}finally{v=Date}}n.floor=n;n.round=e;n.ceil=u;n.offset=f;n.range=o;var r=n.utc=gu(n);return r.floor=r,r.round=gu(e),r.ceil=gu(u),r.offset=gu(f),r.range=s,n}function gu(n){return function(t,i){try{v=vt;var r=new vt;return r._=t,n(r,i)._}finally{v=Date}}}function y(n){function t(t){for(var u,e,s,f=[],r=-1,o=0;++r<i;)37===n.charCodeAt(r)&&(f.push(n.substring(o,r)),null!=(e=dw[u=n.charAt(++r)])&&(u=n.charAt(++r)),(s=ce[u])&&(u=s(t,null==e?"e"===u?" ":"0":e)),f.push(u),o=r+1);return f.push(n.substring(o,r)),f.join("")}var i=n.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},f=nf(i,n,t,0),u,r;return f!=t.length?null:("p"in i&&(i.H=i.H%12+12*i.p),u=null!=i.Z&&v!==vt,r=new(u?vt:v),"j"in i?r.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(r.setFullYear(i.y,0,1),r.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(r.getDay()+5)%7:i.w+7*i.U-(r.getDay()+6)%7)):r.setFullYear(i.y,i.m,i.d),r.setHours(i.H+Math.floor(i.Z/100),i.M+i.Z%100,i.S,i.L),u?r._:r)},t.toString=function(){return n},t}function nf(n,t,i,r){for(var f,e,o,u=0,s=t.length,h=i.length;s>u;){if(r>=h)return-1;if(f=t.charCodeAt(u++),37===f){if(o=t.charAt(u++),e=nrt[o in dw?t.charAt(u++):o],!e||(r=e(n,i,r))<0)return-1}else if(f!=i.charCodeAt(r++))return-1}return r}function tf(t){return new RegExp("^(?:"+t.map(n.requote).join("|")+")","i")}function rf(n){for(var i=new rt,t=-1,r=n.length;++t<r;)i.set(n[t].toLowerCase(),t);return i}function p(n,t,i){var u=0>n?"-":"",r=(u?-n:n)+"",f=r.length;return u+(i>f?new Array(i-f+1).join(t)+r:r)}function wn(n,t,i){pw.lastIndex=0;var r=pw.exec(t.substring(i));return r?(n.w=kit.get(r[0].toLowerCase()),i+r[0].length):-1}function bn(n,t,i){yw.lastIndex=0;var r=yw.exec(t.substring(i));return r?(n.w=bit.get(r[0].toLowerCase()),i+r[0].length):-1}function kn(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+1));return r?(n.w=+r[0],i+r[0].length):-1}function dn(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i));return r?(n.U=+r[0],i+r[0].length):-1}function gn(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i));return r?(n.W=+r[0],i+r[0].length):-1}function ntt(n,t,i){bw.lastIndex=0;var r=bw.exec(t.substring(i));return r?(n.m=git.get(r[0].toLowerCase()),i+r[0].length):-1}function ttt(n,t,i){ww.lastIndex=0;var r=ww.exec(t.substring(i));return r?(n.m=dit.get(r[0].toLowerCase()),i+r[0].length):-1}function itt(n,t,i){return nf(n,ce.c.toString(),t,i)}function rtt(n,t,i){return nf(n,ce.x.toString(),t,i)}function utt(n,t,i){return nf(n,ce.X.toString(),t,i)}function ftt(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+4));return r?(n.y=+r[0],i+r[0].length):-1}function ett(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+2));return r?(n.y=stt(+r[0]),i+r[0].length):-1}function ott(n,t,i){return/^[+-]\d{4}$/.test(t=t.substring(i,i+5))?(n.Z=+t,i+5):-1}function stt(n){return n+(n>68?1900:2e3)}function htt(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+2));return r?(n.m=r[0]-1,i+r[0].length):-1}function ep(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+2));return r?(n.d=+r[0],i+r[0].length):-1}function ctt(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+3));return r?(n.j=+r[0],i+r[0].length):-1}function op(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+2));return r?(n.H=+r[0],i+r[0].length):-1}function ltt(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+2));return r?(n.M=+r[0],i+r[0].length):-1}function att(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+2));return r?(n.S=+r[0],i+r[0].length):-1}function vtt(n,t,i){s.lastIndex=0;var r=s.exec(t.substring(i,i+3));return r?(n.L=+r[0],i+r[0].length):-1}function ytt(n,t,i){var r=trt.get(t.substring(i,i+=2).toLowerCase());return null==r?-1:(n.p=r,i)}function ptt(n){var t=n.getTimezoneOffset(),i=t>0?"-":"+",r=~~(Math.abs(t)/60),u=Math.abs(t)%60;return i+p(r,"0",2)+p(u,"0",2)}function wtt(n,t,i){kw.lastIndex=0;var r=kw.exec(t.substring(i,i+1));return r?i+r[0].length:-1}function ft(n){function t(n){try{v=vt;var t=new v;return t._=n,i(t)}finally{v=Date}}var i=y(n);return t.parse=function(n){try{v=vt;var t=i.parse(n);return t&&t._}finally{v=Date}},t.toString=i.toString,t}function th(n){return n.toISOString()}function ih(t,i,r){function u(n){return t(n)}function f(t,r){var e=t[1]-t[0],f=e/r,u=n.bisect(le,f);return u==le.length?[i.year,vr(t.map(function(n){return n/31536e6}),r)[2]]:u?i[f/le[u-1]<le[u]/f?u-1:u]:[urt,vr(t,r)[2]]}return u.invert=function(n){return yi(t.invert(n))},u.domain=function(n){return arguments.length?(t.domain(n),u):t.domain().map(yi)},u.nice=function(n,t){function r(i){return!isNaN(i)&&!n.range(i,yi(+i+1),t).length}var e=u.domain(),o=ur(e),i=null==n?f(o,10):"number"==typeof n&&f(o,n);return i&&(n=i[0],t=i[1]),u.domain(bs(e,t>1?{floor:function(t){for(;r(t=n.floor(t));)t=yi(t-1);return t},ceil:function(t){for(;r(t=n.ceil(t));)t=yi(+t+1);return t}}:n))},u.ticks=function(n,t){var i=ur(u.domain()),r=null==n?f(i,10):"number"==typeof n?f(i,n):!n.range&&[{range:n},t];return r&&(n=r[0],t=r[1]),n.range(i[0],yi(+i[1]+1),1>t?1:t)},u.tickFormat=function(){return r},u.copy=function(){return ih(t.copy(),i,r)},ks(u,t)}function yi(n){return new Date(n)}function sp(n){return function(t){for(var r=n.length-1,i=n[r];!i[1](t);)i=n[--r];return i[0](t)}}function btt(n){return JSON.parse(n.responseText)}function ktt(n){var t=g.createRange();return t.selectNode(g.body),t.createContextualFragment(n.responseText)}var n={version:"3.3.6"},rh,yt,uh,fh,f,ef,et,sh,of,sf,lp,hf,lf,ch,yp,af,vf,pr,wr,pf,wf,bf,kf,ot,ah,dp,br,yh,ph,gf,ii,b,kh,bi,dh,gh,nc,tc,ic,ee,dr,oe,gr,rw,uw,fw,rc,ew,ow,sw,uc,hw,si,cw,fc,ec,vw,ac;Date.now||(Date.now=function(){return+new Date});var dtt=[].slice,ni=function(n){return dtt.call(n)},g=document,ti=g.documentElement,a=window;try{ni(ti.childNodes)[0].nodeType}catch(ort){ni=function(n){for(var t=n.length,i=new Array(t);t--;)i[t]=n[t];return i}}try{g.createElement("div").style.setProperty("opacity",0,"")}catch(srt){var uf=a.Element.prototype,gtt=uf.setAttribute,nit=uf.setAttributeNS,hp=a.CSSStyleDeclaration.prototype,tit=hp.setProperty;uf.setAttribute=function(n,t){gtt.call(this,n,t+"")};uf.setAttributeNS=function(n,t,i){nit.call(this,n,t,i+"")};hp.setProperty=function(n,t,i){tit.call(this,n,t+"",i)}}n.ascending=function(n,t){return t>n?-1:n>t?1:n>=t?0:NaN};n.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN};n.min=function(n,t){var i,u,r=-1,f=n.length;if(1===arguments.length){for(;++r<f&&!(null!=(i=n[r])&&i>=i);)i=void 0;for(;++r<f;)null!=(u=n[r])&&i>u&&(i=u)}else{for(;++r<f&&!(null!=(i=t.call(n,n[r],r))&&i>=i);)i=void 0;for(;++r<f;)null!=(u=t.call(n,n[r],r))&&i>u&&(i=u)}return i};n.max=function(n,t){var i,u,r=-1,f=n.length;if(1===arguments.length){for(;++r<f&&!(null!=(i=n[r])&&i>=i);)i=void 0;for(;++r<f;)null!=(u=n[r])&&u>i&&(i=u)}else{for(;++r<f&&!(null!=(i=t.call(n,n[r],r))&&i>=i);)i=void 0;for(;++r<f;)null!=(u=t.call(n,n[r],r))&&u>i&&(i=u)}return i};n.extent=function(n,t){var i,r,f,u=-1,e=n.length;if(1===arguments.length){for(;++u<e&&!(null!=(i=f=n[u])&&i>=i);)i=f=void 0;for(;++u<e;)null!=(r=n[u])&&(i>r&&(i=r),r>f&&(f=r))}else{for(;++u<e&&!(null!=(i=f=t.call(n,n[u],u))&&i>=i);)i=void 0;for(;++u<e;)null!=(r=t.call(n,n[u],u))&&(i>r&&(i=r),r>f&&(f=r))}return[i,f]};n.sum=function(n,t){var r,u=0,f=n.length,i=-1;if(1===arguments.length)for(;++i<f;)isNaN(r=+n[i])||(u+=r);else for(;++i<f;)isNaN(r=+t.call(n,n[i],i))||(u+=r);return u};n.mean=function(n,t){var u,e=n.length,i=0,r=-1,f=0;if(1===arguments.length)for(;++r<e;)ae(u=n[r])&&(i+=(u-i)/++f);else for(;++r<e;)ae(u=t.call(n,n[r],r))&&(i+=(u-i)/++f);if(f)return i};n.quantile=function(n,t){var u=(n.length-1)*t+1,i=Math.floor(u),r=+n[i-1],f=u-i;return f?r+f*(n[i]-r):r};n.median=function(t,i){return arguments.length>1&&(t=t.map(i)),t=t.filter(ae),t.length?n.quantile(t.sort(n.ascending),.5):void 0};n.bisector=function(n){return{left:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var f=r+u>>>1;n.call(t,t[f],f)<i?r=f+1:u=f}return r},right:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var f=r+u>>>1;i<n.call(t,t[f],f)?u=f:r=f+1}return r}}};rh=n.bisector(function(n){return n});n.bisectLeft=rh.left;n.bisect=n.bisectRight=rh.right;n.shuffle=function(n){for(var r,i,t=n.length;t;)i=0|Math.random()*t--,r=n[t],n[t]=n[i],n[i]=r;return n};n.permute=function(n,t){for(var i=t.length,r=new Array(i);i--;)r[i]=n[t[i]];return r};n.pairs=function(n){for(var f,t=0,i=n.length-1,r=n[0],u=new Array(0>i?0:i);i>t;)u[t]=[f=r,r=n[++t]];return u};n.zip=function(){var r,t,e;if(!(r=arguments.length))return[];for(var i=-1,u=n.min(arguments,nb),f=new Array(u);++i<u;)for(t=-1,e=f[i]=new Array(r);++t<r;)e[t]=arguments[t][i];return f};n.transpose=function(t){return n.zip.apply(n,t)};n.keys=function(n){var t=[];for(var i in n)t.push(i);return t};n.values=function(n){var t=[];for(var i in n)t.push(n[i]);return t};n.entries=function(n){var t=[];for(var i in n)t.push({key:i,value:n[i]});return t};n.merge=function(n){return Array.prototype.concat.apply([],n)};n.range=function(n,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=n,n=0)),1/0==(t-n)/i)throw new Error("infinite range");var u,f=[],r=tb(Math.abs(i)),e=-1;if(n*=r,t*=r,i*=r,0>i)for(;(u=n+i*++e)>t;)f.push(u/r);else for(;(u=n+i*++e)<t;)f.push(u/r);return f};n.map=function(n){var t=new rt,i;if(n instanceof rt)n.forEach(function(n,i){t.set(n,i)});else for(i in n)t.set(i,n[i]);return t};yc(rt,{has:function(n){return yt+n in this},get:function(n){return this[yt+n]},set:function(n,t){return this[yt+n]=t},remove:function(n){return n=yt+n,n in this&&delete this[n]},keys:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},values:function(){var n=[];return this.forEach(function(t,i){n.push(i)}),n},entries:function(){var n=[];return this.forEach(function(t,i){n.push({key:t,value:i})}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===uh&&n.call(this,t.substring(1),this[t])}});yt="\x00";uh=yt.charCodeAt(0);n.nest=function(){function r(n,e,o){if(o>=i.length)return f?f.call(t,e):u?e.sort(u):e;for(var l,s,h,a,v=-1,y=e.length,p=i[o++],c=new rt;++v<y;)(a=c.get(l=p(s=e[v])))?a.push(s):c.set(l,[s]);return n?(s=n(),h=function(t,i){s.set(t,r(n,i,o))}):(s={},h=function(t,i){s[t]=r(n,i,o)}),c.forEach(h),s}function e(n,t){if(t>=i.length)return n;var r=[],u=o[t++];return n.forEach(function(n,i){r.push({key:n,values:e(i,t)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var u,f,t={},i=[],o=[];return t.map=function(n,t){return r(t,n,0)},t.entries=function(t){return e(r(n.map,t,0),0)},t.key=function(n){return i.push(n),t},t.sortKeys=function(n){return o[i.length-1]=n,t},t.sortValues=function(n){return u=n,t},t.rollup=function(n){return f=n,t},t};n.set=function(n){var i=new ve,t,r;if(n)for(t=0,r=n.length;r>t;++t)i.add(n[t]);return i};yc(ve,{has:function(n){return yt+n in this},add:function(n){return this[yt+n]=!0,n},remove:function(n){return n=yt+n,n in this&&delete this[n]},values:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===uh&&n.call(this,t.substring(1))}});n.behavior={};n.rebind=function(n,t){for(var i,r=1,u=arguments.length;++r<u;)n[i=arguments[r]]=ib(n,t,t[i]);return n};fh=["webkit","ms","moz","Moz","o","O"];n.dispatch=function(){for(var n=new pe,t=-1,i=arguments.length;++t<i;)n[arguments[t]]=pc(n);return n};pe.prototype.on=function(n,t){var r=n.indexOf("."),i="";if(r>=0&&(i=n.substring(r+1),n=n.substring(0,r)),n)return arguments.length<2?this[n].on(i):this[n].on(i,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(i,null);return this}};n.event=null;n.requote=function(n){return n.replace(iit,"\\$&")};var iit=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ff={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var i in t)n[i]=t[i]},eh=function(n,t){return t.querySelector(n)},oh=function(n,t){return t.querySelectorAll(n)},rit=ti[ye(ti,"matchesSelector")],cp=function(n,t){return rit.call(n,t)};"function"==typeof Sizzle&&(eh=function(n,t){return Sizzle(n,t)[0]||null},oh=function(n,t){return Sizzle.uniqueSort(Sizzle(n,t))},cp=Sizzle.matchesSelector);n.selection=function(){return sh};f=n.selection.prototype=[];f.select=function(n){var i,f,e,t,o=[],r,s,u,h;for(n=be(n),r=-1,s=this.length;++r<s;)for(o.push(i=[]),i.parentNode=(e=this[r]).parentNode,u=-1,h=e.length;++u<h;)(t=e[u])?(i.push(f=n.call(t,t.__data__,u,r)),f&&"__data__"in t&&(f.__data__=t.__data__)):i.push(null);return kt(o)};f.selectAll=function(n){var u,t,f=[],i,e;for(n=bc(n),i=-1,e=this.length;++i<e;)for(var o=this[i],r=-1,s=o.length;++r<s;)(t=o[r])&&(f.push(u=ni(n.call(t,t.__data__,r,i))),u.parentNode=t);return kt(f)};ef={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:ef,qualify:function(n){var t=n.indexOf(":"),i=n;return t>=0&&(i=n.substring(0,t),n=n.substring(t+1)),ef.hasOwnProperty(i)?{space:ef[i],local:n}:n}};f.attr=function(t,i){if(arguments.length<2){if("string"==typeof t){var r=this.node();return t=n.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(i in t)this.each(kc(i,t[i]));return this}return this.each(kc(t,i))};f.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var r=this.node(),u=(n=n.trim().split(/^|\s+/g)).length,i=-1;if(t=r.classList){for(;++i<u;)if(!t.contains(n[i]))return!1}else for(t=r.getAttribute("class");++i<u;)if(!gc(n[i]).test(t))return!1;return!0}for(t in n)this.each(nl(t,n[t]));return this}return this.each(nl(n,t))};f.style=function(n,t,i){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(i in n)this.each(tl(i,n[i],t));return this}if(2>r)return a.getComputedStyle(this.node(),null).getPropertyValue(n);i=""}return this.each(tl(n,t,i))};f.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(il(t,n[t]));return this}return this.each(il(n,t))};f.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent};f.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML};f.append=function(n){return n=rl(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})};f.insert=function(n,t){return n=rl(n),t=be(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments))})};f.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})};f.data=function(n,t){function e(n,i){var r,u,o,l=n.length,a=i.length,k=Math.min(l,a),v=new Array(a),c=new Array(a),y=new Array(l);if(t){var e,p=new rt,w=new rt,b=[];for(r=-1;++r<l;)e=t.call(u=n[r],u.__data__,r),p.has(e)?y[r]=u:p.set(e,u),b.push(e);for(r=-1;++r<a;)e=t.call(i,o=i[r],r),(u=p.get(e))?(v[r]=u,u.__data__=o):w.has(e)||(c[r]=ke(o)),w.set(e,o),p.remove(e);for(r=-1;++r<l;)p.has(b[r])&&(y[r]=n[r])}else{for(r=-1;++r<k;)u=n[r],o=i[r],u?(u.__data__=o,v[r]=u):c[r]=ke(o);for(;a>r;++r)c[r]=ke(i[r]);for(;l>r;++r)y[r]=n[r]}c.update=v;c.parentNode=v.parentNode=y.parentNode=n.parentNode;s.push(c);f.push(v);h.push(y)}var r,o,i=-1,u=this.length;if(!arguments.length){for(n=new Array(u=(r=this[0]).length);++i<u;)(o=r[i])&&(n[i]=o.__data__);return n}var s=fl([]),f=kt([]),h=kt([]);if("function"==typeof n)for(;++i<u;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<u;)e(r=this[i],n);return f.enter=function(){return s},f.exit=function(){return h},f};f.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")};f.filter=function(n){var u,f,i,e=[],r,o,t,s;for("function"!=typeof n&&(n=ul(n)),r=0,o=this.length;o>r;r++)for(e.push(u=[]),u.parentNode=(f=this[r]).parentNode,t=0,s=f.length;s>t;t++)(i=f[t])&&n.call(i,i.__data__,t)&&u.push(i);return kt(e)};f.order=function(){for(var i=-1,f=this.length;++i<f;)for(var t,r=this[i],u=r.length-1,n=r[u];--u>=0;)(t=r[u])&&(n&&n!==t.nextSibling&&n.parentNode.insertBefore(t,n),n=t);return this};f.sort=function(n){n=ub.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(n);return this.order()};f.each=function(n){return dt(this,function(t,i,r){n.call(t,t.__data__,i,r)})};f.call=function(n){var t=ni(arguments);return n.apply(t[0]=this,t),this};f.empty=function(){return!this.node()};f.node=function(){for(var i,n=0,r=this.length;r>n;n++)for(var u=this[n],t=0,f=u.length;f>t;t++)if(i=u[t],i)return i;return null};f.size=function(){var n=0;return this.each(function(){++n}),n};et=[];n.selection.enter=fl;n.selection.enter.prototype=et;et.append=f.append;et.empty=f.empty;et.node=f.node;et.call=f.call;et.size=f.size;et.select=function(n){for(var i,h,r,e,o,t,u,s=[],f=-1,c=this.length;++f<c;)for(o=(t=this[f]).update,s.push(r=[]),r.parentNode=t.parentNode,i=-1,h=t.length;++i<h;)(u=t[i])?(r.push(o[i]=e=n.call(t.parentNode,u.__data__,i,f)),e.__data__=u.__data__):r.push(null);return kt(s)};et.insert=function(n,t){return arguments.length<2&&(t=fb(this)),f.insert.call(this,n,t)};f.transition=function(){for(var i,n,r=ki||++aw,u=[],o=se||{time:Date.now(),ease:ud,delay:0,duration:250},f=-1,s=this.length;++f<s;){u.push(i=[]);for(var e=this[f],t=-1,h=e.length;++t<h;)(n=e[t])&&du(n,t,r,o),i.push(n)}return yr(u,r)};f.interrupt=function(){return this.each(nu)};n.select=function(n){var t=["string"==typeof n?eh(n,g):n];return t.parentNode=ti,kt([t])};n.selectAll=function(n){var t=ni("string"==typeof n?oh(n,g):n);return t.parentNode=ti,kt([t])};sh=n.select(ti);f.on=function(n,t,i){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(i in n)this.each(el(i,n[i],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;i=!1}return this.each(el(n,t,i))};of=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});of.forEach(function(n){"on"+n in g&&of.remove(n)});sf=ye(ti.style,"userSelect");lp=0;n.mouse=function(n){return sl(n,wc())};hf=/WebKit/.test(a.navigator.userAgent)?-1:0;n.touches=function(n,t){return arguments.length<2&&(t=wc().touches),t?ni(t).map(function(t){var i=sl(n,t);return i.identifier=t.identifier,i}):[]};n.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",s)}function f(){return n.event.changedTouches[0].identifier}function e(t,i){return n.touches(t).filter(function(n){return n.identifier===i})[0]}function r(t,r,f,e){return function(){function w(){var n=r(y,h),t=n[0]-s[0],i=n[1]-s[1];p|=t|i;s=n;v({type:"drag",x:n[0]+o[0],y:n[1]+o[1],dx:t,dy:i})}function b(){d.on(f+"."+c,null).on(e+"."+c,null);g(p&&n.event.target===k);v({type:"dragend"})}var o,l=this,y=l.parentNode,v=u.of(l,arguments),k=n.event.target,h=t(),c=null==h?"drag":"drag-"+h,s=r(y,h),p=0,d=n.select(a).on(f+"."+c,w).on(e+"."+c,b),g=tu();i?(o=i.apply(l,arguments),o=[o.x-s[0],o.y-s[1]]):o=[0,0];v({type:"dragstart"})}}var u=we(t,"drag","dragstart","dragend"),i=null,o=r(h,n.mouse,"mousemove","mouseup"),s=r(f,e,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},n.rebind(t,u,"on")};var u=Math.PI,nt=2*u,w=u/2,i=1e-6,ap=i*i,r=u/180,o=180/u,cf=Math.SQRT2,hh=2,vp=4;n.interpolateZoom=function(n,t){function v(n){var t=n*p,r,h;return y?(r=de(u),h=i/(hh*c)*(r*ob(cf*t+u)-ll(u)),[o+h*f,s+h*e,i*r/de(cf*t+u)]):[o+n*f,s+n*e,i*Math.exp(cf*t)]}var o=n[0],s=n[1],i=n[2],w=t[0],b=t[1],r=t[2],f=w-o,e=b-s,h=f*f+e*e,c=Math.sqrt(h),l=(r*r-i*i+vp*h)/(2*i*hh*c),a=(r*r-i*i-vp*h)/(2*r*hh*c),u=Math.log(Math.sqrt(l*l+1)-l),k=Math.log(Math.sqrt(a*a+1)-a),y=k-u,p=(y||Math.log(r/i))/cf;return v.duration=1e3*p,v};n.behavior.zoom=function(){function i(n){n.on(tt,ut).on(yp+".zoom",ht).on(it,et).on("dblclick.zoom",ct).on(rt,ft)}function s(n){return[(n[0]-t.x)/t.k,(n[1]-t.y)/t.k]}function st(n){return[n[0]*t.k+t.x,n[1]*t.k+t.y]}function h(n){t.k=Math.max(w[0],Math.min(w[1],n))}function o(n,i){i=st(i);t.x+=n[0]-i[0];t.y+=n[1]-i[1]}function b(){v&&v.domain(g.range().map(function(n){return(n-t.x)/t.k}).map(g.invert));y&&y.domain(nt.range().map(function(n){return(n-t.y)/t.k}).map(nt.invert))}function u(n){n({type:"zoomstart"})}function r(n){b();n({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function f(n){n({type:"zoomend"})}function ut(){function c(){h=1;o(n.mouse(t),p);r(i)}function l(){y.on(it,a===t?et:null).on(ot,null);w(h&&n.event.target===v);f(i)}var t=this,i=e.of(t,arguments),v=n.event.target,h=0,y=n.select(a).on(it,c).on(ot,l),p=s(n.mouse(t)),w=tu();nu.call(t);u(i)}function ft(){function y(){var r=n.touches(c);return w=t.k,r.forEach(function(n){n.identifier in i&&(i[n.identifier]=s(n))}),r}function p(){for(var u,s,f,a,c=n.event.changedTouches,e=0,k=c.length;k>e;++e)i[c[e].identifier]=null;if(u=y(),s=Date.now(),1===u.length)500>s-d&&(f=u[0],a=i[f.identifier],h(2*t.k),o(f,a),bt(),r(l)),d=s;else if(u.length>1){var f=u[0],p=u[1],w=f[0]-p[0],b=f[1]-p[1];v=w*w+b*b}}function nt(){for(var s,p,t,f,u,e,y=n.touches(c),a=0,b=y.length;b>a;++a,e=null)if(u=y[a],e=i[u.identifier]){if(f)break;t=u;f=e}e&&(s=(s=u[0]-t[0])*s+(s=u[1]-t[1])*s,p=v&&Math.sqrt(s/v),t=[(t[0]+u[0])/2,(t[1]+u[1])/2],f=[(f[0]+e[0])/2,(f[1]+e[1])/2],h(p*w));d=null;o(t,f);r(l)}function it(){var e;if(n.event.touches.length){for(var r=n.event.changedTouches,t=0,u=r.length;u>t;++t)delete i[r[t].identifier];for(e in i)return void y()}et.on(k,null).on(g,null);ot.on(tt,ut).on(rt,ft);st();f(l)}var w,c=this,l=e.of(c,arguments),i={},v=0,b=n.event.changedTouches[0].identifier,k="touchmove.zoom-"+b,g="touchend.zoom-"+b,et=n.select(a).on(k,nt).on(g,it),ot=n.select(c).on(tt,null).on(rt,p),st=tu();nu.call(c);p();u(l)}function ht(){var i=e.of(this,arguments),a;l?clearTimeout(l):(nu.call(this),u(i));l=setTimeout(function(){l=null;f(i)},50);bt();a=k||n.mouse(this);c||(c=s(a));h(Math.pow(2,.002*lf())*t.k);o(a,c);r(i)}function et(){c=null}function ct(){var i=e.of(this,arguments),c=n.mouse(this),a=s(c),l=Math.log(t.k)/Math.LN2;u(i);h(Math.pow(2,n.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1));o(c,a);r(i);f(i)}var c,k,l,d,g,v,nt,y,t={x:0,y:0,k:1},p=[960,500],w=ch,tt="mousedown.zoom",it="mousemove.zoom",ot="mouseup.zoom",rt="touchstart.zoom",e=we(i,"zoomstart","zoom","zoomend");return i.event=function(i){i.each(function(){var i=e.of(this,arguments),o=t;ki?n.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1};u(i)}).tween("zoom:zoom",function(){var u=p[0],s=p[1],f=u/2,e=s/2,h=n.interpolateZoom([(f-t.x)/t.k,(e-t.y)/t.k,u/t.k],[(f-o.x)/o.k,(e-o.y)/o.k,u/o.k]);return function(n){var o=h(n),s=u/o[2];this.__chart__=t={x:f-o[0]*s,y:e-o[1]*s,k:s};r(i)}}).each("end.zoom",function(){f(i)}):(this.__chart__=t,u(i),r(i),f(i))})},i.translate=function(n){return arguments.length?(t={x:+n[0],y:+n[1],k:t.k},b(),i):[t.x,t.y]},i.scale=function(n){return arguments.length?(t={x:t.x,y:t.y,k:+n},b(),i):t.k},i.scaleExtent=function(n){return arguments.length?(w=null==n?ch:[+n[0],+n[1]],i):w},i.center=function(n){return arguments.length?(k=n&&[+n[0],+n[1]],i):k},i.size=function(n){return arguments.length?(p=n&&[+n[0],+n[1]],i):p},i.x=function(n){return arguments.length?(v=n,g=n.copy(),t={x:0,y:0,k:1},i):v},i.y=function(n){return arguments.length?(y=n,nt=n.copy(),t={x:0,y:0,k:1},i):y},n.rebind(i,e,"on")};ch=[0,1/0];yp="onwheel"in g?(lf=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in g?(lf=function(){return n.event.wheelDelta},"mousewheel"):(lf=function(){return-n.event.detail},"MozMousePixelScroll");di.prototype.toString=function(){return this.rgb()+""};n.hsl=function(n,t,i){return 1===arguments.length?n instanceof ge?gi(n.h,n.s,n.l):wl(""+n,bl,gi):gi(+n,+t,+i)};af=ge.prototype=new di;af.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),gi(this.h,this.s,this.l/n)};af.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),gi(this.h,this.s,n*this.l)};af.rgb=function(){return no(this.h,this.s,this.l)};n.hcl=function(t,i,r){return 1===arguments.length?t instanceof iu?nr(t.h,t.c,t.l):t instanceof ru?yl(t.l,t.a,t.b):yl((t=kl((t=n.rgb(t)).r,t.g,t.b)).l,t.a,t.b):nr(+t,+i,+r)};vf=iu.prototype=new di;vf.brighter=function(n){return nr(this.h,this.c,Math.min(100,this.l+yf*(arguments.length?n:1)))};vf.darker=function(n){return nr(this.h,this.c,Math.max(0,this.l-yf*(arguments.length?n:1)))};vf.rgb=function(){return to(this.h,this.c,this.l).rgb()};n.lab=function(t,i,r){return 1===arguments.length?t instanceof ru?tr(t.l,t.a,t.b):t instanceof iu?to(t.l,t.c,t.h):kl((t=n.rgb(t)).r,t.g,t.b):tr(+t,+i,+r)};var yf=18,pp=.95047,wp=1,bp=1.08883,lh=ru.prototype=new di;lh.brighter=function(n){return tr(Math.min(100,this.l+yf*(arguments.length?n:1)),this.a,this.b)};lh.darker=function(n){return tr(Math.max(0,this.l-yf*(arguments.length?n:1)),this.a,this.b)};lh.rgb=function(){return vl(this.l,this.a,this.b)};n.rgb=function(n,t,i){return 1===arguments.length?n instanceof fo?ht(n.r,n.g,n.b):wl(""+n,ht,no):ht(~~n,~~t,~~i)};pr=fo.prototype=new di;pr.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var i=this.r,r=this.g,u=this.b,t=30;return i||r||u?(i&&t>i&&(i=t),r&&t>r&&(r=t),u&&t>u&&(u=t),ht(Math.min(255,~~(i/n)),Math.min(255,~~(r/n)),Math.min(255,~~(u/n)))):ht(t,t,t)};pr.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),ht(~~(n*this.r),~~(n*this.g),~~(n*this.b))};pr.hsl=function(){return bl(this.r,this.g,this.b)};pr.toString=function(){return"#"+ir(this.r)+ir(this.g)+ir(this.b)};wr=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});wr.forEach(function(n,t){wr.set(n,pl(t))});n.functor=e;n.xhr=so(l);n.dsv=function(t,i){function r(t,r,u){arguments.length<3&&(u=r,r=null);var o=n.xhr(t,i,u);return o.row=function(n){return arguments.length?o.response(null==(r=n)?f:e(n)):r},o.row(r)}function f(n){return r.parse(n.responseText)}function e(n){return function(t){return r.parse(t.responseText,n)}}function o(n){return n.map(u).join(t)}function u(n){return s.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var s=new RegExp('["'+t+"\n]"),h=t.charCodeAt(0);return r.parse=function(n,t){var i;return r.parseRows(n,function(n,r){if(i)return i(n,r-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");i=t?function(n,i){return t(u(n),i)}:u})},r.parseRows=function(n,t){function s(){var f,t,u,s;if(i>=o)return e;if(r)return r=!1,c;if(f=i,34===n.charCodeAt(f)){for(t=f;t++<o;)if(34===n.charCodeAt(t)){if(34!==n.charCodeAt(t+1))break;++t}return i=t+2,u=n.charCodeAt(t+1),13===u?(r=!0,10===n.charCodeAt(t+2)&&++i):10===u&&(r=!0),n.substring(f+1,t).replace(/""/g,'"')}for(;o>i;){if(u=n.charCodeAt(i++),s=1,10===u)r=!0;else if(13===u)r=!0,10===n.charCodeAt(i)&&(++i,++s);else if(u!==h)continue;return n.substring(f,i-s)}return n.substring(f)}for(var f,u,r,c={},e={},l=[],o=n.length,i=0,a=0;(u=s())!==e;){for(f=[];u!==c&&u!==e;)f.push(u),u=s();(!t||(f=t(f,a++)))&&l.push(f)}return l},r.format=function(n){if(Array.isArray(n[0]))return r.formatRows(n);var f=new ve,i=[];return n.forEach(function(n){for(var t in n)f.has(t)||i.push(f.add(t))}),[i.map(u).join(t)].concat(n.map(function(n){return i.map(function(t){return u(n[t])}).join(t)})).join("\n")},r.formatRows=function(n){return n.map(o).join("\n")},r};n.csv=n.dsv(",","text/csv");n.tsv=n.dsv("\t","text/tab-separated-values");ah=a[ye(a,"requestAnimationFrame")]||function(n){setTimeout(n,17)};n.timer=function(n,t,i){var u=arguments.length,f,r;2>u&&(t=0);3>u&&(i=Date.now());f=i+t;r={callback:n,time:f,next:null};wf?wf.next=r:pf=r;wf=r;bf||(kf=clearTimeout(kf),bf=1,ah(co))};n.timer.flush=function(){gl();na()};var uit=".",fit=",",df=[3,3],eit="$",oit=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(hb);n.formatPrefix=function(t,i){var r=0;return t&&(0>t&&(t*=-1),i&&(t=n.round(t,lo(t,i))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((0>=r?r+1:r-1)/3)))),oit[8+r/3]};n.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};n.format=function(t){var u=kp.exec(t),v=u[1]||" ",e=u[2]||">",p=u[3]||"",f=u[4]||"",s=u[5],h=+u[6],c=u[7],r=u[8],i=u[9],o=1,l="",y=!1,a;switch(r&&(r=+r.substring(1)),(s||"0"===v&&"="===e)&&(s=v="0",e="=",c&&(h-=Math.floor((h-1)/4))),i){case"n":c=!0;i="g";break;case"%":o=100;l="%";i="f";break;case"p":o=100;l="%";i="r";break;case"b":case"o":case"x":case"X":"#"===f&&(f="0"+i.toLowerCase());case"c":case"d":y=!0;r=0;break;case"s":o=-1;i="r"}return"#"===f?f="":"$"===f&&(f=eit),"r"!=i||r||(i="g"),null!=r&&("g"==i?r=Math.max(1,Math.min(21,r)):("e"==i||"f"==i)&&(r=Math.max(0,Math.min(20,r)))),i=sit.get(i)||cb,a=s&&c,function(t){var u,g,k,w;if(y&&t%1)return"";u=0>t||0===t&&0>1/t?(t=-t,"-"):p;0>o?(g=n.formatPrefix(t,r),t=g.scale(t),l=g.symbol):t*=o;t=i(t,r);var d=t.lastIndexOf("."),b=0>d?t:t.substring(0,d),nt=0>d?"":uit+t.substring(d+1);return!s&&c&&(b=vh(b)),k=f.length+b.length+nt.length+(a?0:u.length),w=h>k?new Array(k=h-k+1).join(v):"",a&&(b=vh(w+b)),u+=f,t=b+nt,("<"===e?u+t+w:">"===e?w+u+t:"^"===e?w.substring(0,k>>=1)+u+t+w.substring(k):u+(a?t:w+t))+l}};var kp=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,sit=n.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(t,i){return(t=n.round(t,lo(t,i))).toFixed(Math.max(0,Math.min(20,lo(t*(1+1e-15),i))))}}),vh=l;df&&(dp=df.length,vh=function(n){for(var i=n.length,r=[],u=0,t=df[0];i>0&&t>0;)r.push(n.substring(i-=t,i+t)),t=df[u=(u+1)%dp];return r.reverse().join(fit)});n.geo={};ao.prototype={s:0,t:0,add:function(n){ta(n,this.t,br);ta(br.s,this.s,this);this.s?this.t+=br.t:this.s=br.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};br=new ao;n.geo.stream=function(n,t){n&&yh.hasOwnProperty(n.type)?yh[n.type](n,t):fu(n,t)};yh={Feature:function(n,t){fu(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)fu(i[r].geometry,t)}};ph={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates;t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){vo(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)vo(i[r],t,0)},Polygon:function(n,t){ia(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)ia(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)fu(i[r],t)}};n.geo.area=function(t){return gf=0,n.geo.stream(t,b),gf};ii=new ao;b={sphere:function(){gf+=4*u},point:h,lineStart:h,lineEnd:h,polygonStart:function(){ii.reset();b.lineStart=lb},polygonEnd:function(){var n=2*ii;gf+=0>n?4*u+n:n;b.lineStart=b.lineEnd=b.point=h}};n.geo.bounds=function(){function p(n,i){a.push(c=[t=n,u=n]);e>i&&(e=i);i>s&&(s=i)}function w(n,i){var k=ci([n*r,i*r]),a;if(v){var w=rr(v,k),g=[w[1],-w[0],0],h=rr(g,w);su(h);h=hu(h);var d=n-l,y=d>0?1:-1,c=h[0]*o*y,b=Math.abs(d)>180;b^(c>y*l&&y*n>c)?(a=h[1]*o,a>s&&(s=a)):(c=(c+360)%360-180,b^(c>y*l&&y*n>c))?(a=-h[1]*o,e>a&&(e=a)):(e>i&&(e=i),i>s&&(s=i));b?l>n?f(t,n)>f(t,u)&&(u=n):f(n,u)>f(t,u)&&(t=n):u>=t?(t>n&&(t=n),n>u&&(u=n)):n>l?f(t,n)>f(t,u)&&(u=n):f(n,u)>f(t,u)&&(t=n)}else p(n,i);v=k;l=n}function k(){h.point=w}function d(){c[0]=t;c[1]=u;h.point=p;v=null}function g(n,t){if(v){var i=n-l;y+=Math.abs(i)>180?i+(i>0?360:-360):i}else tt=n,it=t;b.point(n,t);w(n,t)}function rt(){b.lineStart()}function ut(){g(tt,it);b.lineEnd();Math.abs(y)>i&&(t=-(u=180));c[0]=t;c[1]=u;v=null}function f(n,t){return(t-=n)<0?t+360:t}function ft(n,t){return n[0]-t[0]}function nt(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var t,e,u,s,l,tt,it,v,y,a,c,h={point:p,lineStart:k,lineEnd:d,polygonStart:function(){h.point=g;h.lineStart=rt;h.lineEnd=ut;y=0;b.polygonStart()},polygonEnd:function(){b.polygonEnd();h.point=p;h.lineStart=k;h.lineEnd=d;0>ii?(t=-(u=180),e=-(s=90)):y>i?s=90:-i>y&&(e=-90);c[0]=t;c[1]=u}};return function(i){var v;if(s=u=-(t=e=1/0),a=[],n.geo.stream(i,h),v=a.length,v){a.sort(ft);for(var o,l=1,r=a[0],y=[r];v>l;++l)o=a[l],nt(o[0],r)||nt(o[1],r)?(f(r[0],o[1])>f(r[0],r[1])&&(r[1]=o[1]),f(o[0],r[1])>f(r[0],r[1])&&(r[0]=o[0])):y.push(r=o);for(var p,o,w=-1/0,v=y.length-1,l=0,r=y[v];v>=l;r=o,++l)o=y[l],(p=f(r[1],o[0]))>w&&(w=p,t=o[0],u=r[1])}return a=c=null,1/0===t||1/0===e?[[NaN,NaN],[NaN,NaN]]:[[t,e],[u,s]]}}();n.geo.centroid=function(t){kr=ne=pi=wi=pt=ri=ui=st=fr=er=fi=0;n.geo.stream(t,tt);var r=fr,u=er,f=fi,e=r*r+u*u+f*f;return ap>e&&(r=ri,u=ui,f=st,i>ne&&(r=pi,u=wi,f=pt),e=r*r+u*u+f*f,ap>e)?[NaN,NaN]:[Math.atan2(u,r)*o,hi(f/Math.sqrt(e))*o]};var kr,ne,pi,wi,pt,ri,ui,st,fr,er,fi,tt={sphere:h,point:po,lineStart:ra,lineEnd:ua,polygonStart:function(){tt.lineStart=ab},polygonEnd:function(){tt.lineStart=ra}},gp=oa(sr,wb,kb,[-u,-u/2]),te=1e9;n.geo.clipExtent=function(){var t,i,r,u,n,f,e={stream:function(t){return n&&(n.valid=!1),n=f(t),n.valid=!0,n},extent:function(o){return arguments.length?(f=ha(t=+o[0][0],i=+o[0][1],r=+o[1][0],u=+o[1][1]),n&&(n.valid=!1,n=null),e):[[t,i],[r,u]]}};return e.extent([[0,0],[960,500]])};(n.geo.conicEqualArea=function(){return wo(la)}).raw=la;n.geo.albers=function(){return n.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};n.geo.albersUsa=function(){function r(n){var t=n[0],i=n[1];return u=null,s(t,i),u||(h(t,i),u)||c(t,i),u}var u,s,h,c,t=n.geo.albers(),f=n.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),e=n.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o={point:function(n,t){u=[n,t]}};return r.invert=function(n){var u=t.scale(),o=t.translate(),i=(n[0]-o[0])/u,r=(n[1]-o[1])/u;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?f:r>=.166&&.234>r&&i>=-.214&&-.115>i?e:t).invert(n)},r.stream=function(n){var i=t.stream(n),r=f.stream(n),u=e.stream(n);return{point:function(n,t){i.point(n,t);r.point(n,t);u.point(n,t)},sphere:function(){i.sphere();r.sphere();u.sphere()},lineStart:function(){i.lineStart();r.lineStart();u.lineStart()},lineEnd:function(){i.lineEnd();r.lineEnd();u.lineEnd()},polygonStart:function(){i.polygonStart();r.polygonStart();u.polygonStart()},polygonEnd:function(){i.polygonEnd();r.polygonEnd();u.polygonEnd()}}},r.precision=function(n){return arguments.length?(t.precision(n),f.precision(n),e.precision(n),r):t.precision()},r.scale=function(n){return arguments.length?(t.scale(n),f.scale(.35*n),e.scale(n),r.translate(t.translate())):t.scale()},r.translate=function(n){if(!arguments.length)return t.translate();var u=t.scale(),l=+n[0],a=+n[1];return s=t.translate(n).clipExtent([[l-.455*u,a-.238*u],[l+.455*u,a+.238*u]]).stream(o).point,h=f.translate([l-.307*u,a+.201*u]).clipExtent([[l-.425*u+i,a+.12*u+i],[l-.214*u-i,a+.234*u-i]]).stream(o).point,c=e.translate([l-.205*u,a+.212*u]).clipExtent([[l-.214*u+i,a+.166*u+i],[l-.115*u-i,a+.234*u-i]]).stream(o).point,r},r.scale(1070)};var wh,bh,ie,re,ue,fe,ei={point:h,lineStart:h,lineEnd:h,polygonStart:function(){bh=0;ei.lineStart=gb},polygonEnd:function(){ei.lineStart=ei.lineEnd=ei.point=h;wh+=Math.abs(bh/2)}},hit={point:nk,lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h},it={point:li,lineStart:va,lineEnd:ya,polygonStart:function(){it.lineStart=ik},polygonEnd:function(){it.point=li;it.lineStart=va;it.lineEnd=ya}};n.geo.transform=function(n){return{stream:function(t){var i=new au(t);for(var r in n)i[r]=n[r];return i}}};au.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};n.geo.path=function(){function t(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),f&&f.valid||(f=u(i)),n.geo.stream(t,f)),i.result()}function e(){return f=null,t}var o,s,u,i,f,r=4.5;return t.area=function(t){return wh=0,n.geo.stream(t,u(ei)),wh},t.centroid=function(t){return pi=wi=pt=ri=ui=st=fr=er=fi=0,n.geo.stream(t,u(it)),fi?[fr/fi,er/fi]:st?[ri/st,ui/st]:pt?[pi/pt,wi/pt]:[NaN,NaN]},t.bounds=function(t){return ue=fe=-(ie=re=1/0),n.geo.stream(t,u(hit)),[[ie,re],[ue,fe]]},t.projection=function(n){return arguments.length?(u=(o=n)?n.stream||uk(n):l,e()):o},t.context=function(n){return arguments.length?(i=null==(s=n)?new tk:new rk(n),"function"!=typeof r&&i.pointRadius(r),e()):s},t.pointRadius=function(n){return arguments.length?(r="function"==typeof n?n:(i.pointRadius(+n),+n),t):r},t.projection(n.geo.albersUsa()).context(null)};n.geo.projection=gt;n.geo.projectionMutator=bo;(n.geo.equirectangular=function(){return gt(hr)}).raw=hr.invert=hr;n.geo.rotation=function(n){function t(t){return t=n(t[0]*r,t[1]*r),t[0]*=o,t[1]*=o,t}return n=ko(n[0]%360*r,n[1]*r,n.length>2?n[2]*r:0),t.invert=function(t){return t=n.invert(t[0]*r,t[1]*r),t[0]*=o,t[1]*=o,t},t};wa.invert=hr;n.geo.circle=function(){function n(){var n="function"==typeof t?t.apply(this,arguments):t,f=ko(-n[0]*r,-n[1]*r,0).invert,i=[];return u(null,null,1,{point:function(n,t){i.push(n=f(n,t));n[0]*=o;n[1]*=o}}),{type:"Polygon",coordinates:[i]}}var i,u,t=[0,0],f=6;return n.origin=function(i){return arguments.length?(t=i,n):t},n.angle=function(t){return arguments.length?(u=go((i=+t)*r,f*r),n):i},n.precision=function(t){return arguments.length?(u=go(i*r,(f=+t)*r),n):f},n.angle(90)};n.geo.distance=function(n,t){var i,f=(t[0]-n[0])*r,e=n[1]*r,o=t[1]*r,a=Math.sin(f),s=Math.cos(f),h=Math.sin(e),c=Math.cos(e),l=Math.sin(o),u=Math.cos(o);return Math.atan2(Math.sqrt((i=u*a)*i+(i=c*l-h*u*s)*i),h*l+c*u*s)};n.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:k()}}function k(){return n.range(Math.ceil(u/a)*a,r,a).map(w).concat(n.range(Math.ceil(e/v)*v,f,v).map(b)).concat(n.range(Math.ceil(s/l)*l,o,l).filter(function(n){return Math.abs(n%a)>i}).map(d)).concat(n.range(Math.ceil(c/p)*p,h,p).filter(function(n){return Math.abs(n%v)>i}).map(g))}var o,s,r,u,h,c,f,e,d,g,w,b,l=10,p=l,a=90,v=360,y=2.5;return t.lines=function(){return k().map(function(n){return{type:"LineString",coordinates:n}})},t.outline=function(){return{type:"Polygon",coordinates:[w(u).concat(b(f).slice(1),w(r).reverse().slice(1),b(e).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(u=+n[0][0],r=+n[1][0],e=+n[0][1],f=+n[1][1],u>r&&(n=u,u=r,r=n),e>f&&(n=e,e=f,f=n),t.precision(y)):[[u,e],[r,f]]},t.minorExtent=function(n){return arguments.length?(s=+n[0][0],o=+n[1][0],c=+n[0][1],h=+n[1][1],s>o&&(n=s,s=o,o=n),c>h&&(n=c,c=h,h=n),t.precision(y)):[[s,c],[o,h]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(a=+n[0],v=+n[1],t):[a,v]},t.minorStep=function(n){return arguments.length?(l=+n[0],p=+n[1],t):[l,p]},t.precision=function(n){return arguments.length?(y=+n,d=nv(c,h,90),g=tv(s,o,y),w=nv(e,f,90),b=tv(u,r,y),t):y},t.majorExtent([[-180,-90+i],[180,90-i]]).minorExtent([[-180,-80-i],[180,80+i]])};n.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[u||i.apply(this,arguments),f||r.apply(this,arguments)]}}var u,f,i=ns,r=ts;return t.distance=function(){return n.geo.distance(u||i.apply(this,arguments),f||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,u="function"==typeof n?null:n,t):i},t.target=function(n){return arguments.length?(r=n,f="function"==typeof n?null:n,t):r},t.precision=function(){return arguments.length?t:0},t};n.geo.interpolate=function(n,t){return ek(n[0]*r,n[1]*r,t[0]*r,t[1]*r)};n.geo.length=function(t){return kh=0,n.geo.stream(t,bi),kh};bi={sphere:h,point:h,lineStart:ok,lineEnd:h,polygonStart:h,polygonEnd:h};dh=cr(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(n.geo.azimuthalEqualArea=function(){return gt(dh)}).raw=dh;gh=cr(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},l);(n.geo.azimuthalEquidistant=function(){return gt(gh)}).raw=gh;(n.geo.conicConformal=function(){return wo(iv)}).raw=iv;(n.geo.conicEquidistant=function(){return wo(rv)}).raw=rv;nc=cr(function(n){return 1/n},Math.atan);(n.geo.gnomonic=function(){return gt(nc)}).raw=nc;vu.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-w]};(n.geo.mercator=function(){return uv(vu)}).raw=vu;tc=cr(function(){return 1},Math.asin);(n.geo.orthographic=function(){return gt(tc)}).raw=tc;ic=cr(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(n.geo.stereographic=function(){return gt(ic)}).raw=ic;is.invert=function(n,t){return[Math.atan2(ll(n),Math.cos(t)),hi(Math.sin(t)/de(n))]};(n.geo.transverseMercator=function(){return uv(is)}).raw=is;n.geom={};n.svg={};n.svg.line=function(){return fv(l)};ee=n.map({linear:k,"linear-closed":sk,step:hk,"step-before":rs,"step-after":us,basis:ev,"basis-open":vk,"basis-closed":yk,bundle:pk,cardinal:ak,"cardinal-open":ck,"cardinal-closed":lk,monotone:kk});ee.forEach(function(n,t){t.key=n;t.closed=/-closed$/.test(n)});var nw=[0,2/3,1/3,0],tw=[0,1/3,2/3,0],oi=[0,1/6,2/3,1/6];n.geom.hull=function(n){function t(n){var d;if(n.length<3)return[];var u,g,t,o,l,a,p,w,b,v,k,c,nt=e(r),it=e(i),y=n.length,tt=y-1,f=[],h=[],s=0;if(nt===ut&&i===ct)u=n;else for(t=0,u=[];y>t;++t)u.push([+nt.call(this,g=n[t],t),+it.call(this,g,t)]);for(t=1;y>t;++t)(u[t][1]<u[s][1]||u[t][1]==u[s][1]&&u[t][0]<u[s][0])&&(s=t);for(t=0;y>t;++t)t!==s&&(a=u[t][1]-u[s][1],l=u[t][0]-u[s][0],f.push({angle:Math.atan2(a,l),index:t}));for(f.sort(function(n,t){return n.angle-t.angle}),k=f[0].angle,v=f[0].index,b=0,t=1;tt>t;++t){if(o=f[t].index,k==f[t].angle){if(l=u[v][0]-u[s][0],a=u[v][1]-u[s][1],p=u[o][0]-u[s][0],w=u[o][1]-u[s][1],l*l+a*a>=p*p+w*w){f[t].index=-1;continue}f[b].index=-1}k=f[t].angle;b=t;v=o}for(h.push(s),t=0,o=0;2>t;++o)f[o].index>-1&&(h.push(f[o].index),t++);for(c=h.length;tt>o;++o)if(!(f[o].index<0)){for(;!dk(h[c-2],h[c-1],f[o].index,u);)--c;h[c++]=f[o].index}for(d=[],t=c-1;t>=0;--t)d.push(n[h[t]]);return d}var r=ut,i=ct;return arguments.length?t(n):(t.x=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(i=n,t):i},t)};n.geom.polygon=function(n){return ff(n,dr),n};dr=n.geom.polygon.prototype=[];dr.area=function(){for(var t,i=-1,r=this.length,n=this[r-1],u=0;++i<r;)t=n,n=this[i],u+=t[1]*n[0]-t[0]*n[1];return.5*u};dr.centroid=function(n){var i,r,u=-1,f=this.length,e=0,o=0,t=this[f-1];for(arguments.length||(n=-1/(6*this.area()));++u<f;)i=t,t=this[u],r=i[0]*t[1]-t[0]*i[1],e+=(i[0]+t[0])*r,o+=(i[1]+t[1])*r;return[e*n,o*n]};dr.clip=function(n){for(var f,e,o,t,i,r,s=sv(n),h=-1,c=this.length-sv(this),u=this[c-1];++h<c;){for(f=n.slice(),n.length=0,t=this[h],i=f[(o=f.length-s)-1],e=-1;++e<o;)r=f[e],ss(r,u,t)?(ss(i,u,t)||n.push(ov(i,r,u,t)),n.push(r)):ss(i,u,t)&&n.push(ov(i,r,u,t)),i=r;s&&n.push(n[0]);u=t}return n};n.geom.delaunay=function(n){var t=n.map(function(){return[]}),i=[];return hs(n,function(i){t[i.region.l.index].push(n[i.region.r.index])}),t.forEach(function(t,r){var f=n[r],o=f[0],s=f[1],u,e;for(t.forEach(function(n){n.angle=Math.atan2(n[0]-o,n[1]-s)}),t.sort(function(n,t){return n.angle-t.angle}),u=0,e=t.length-1;e>u;u++)i.push([f,t[u],t[u+1]])}),i};n.geom.voronoi=function(t){function r(t){var c,a,s,h=t.map(function(){return[]}),v=e(f),y=e(o),l=t.length,r=1e6;if(v===ut&&y===ct)c=t;else for(c=new Array(l),s=0;l>s;++s)c[s]=[+v.call(this,a=t[s],s),+y.call(this,a,s)];if(hs(c,function(n){var t,i,u,f,e,o,s,c;1===n.a&&n.b>=0?(t=n.ep.r,i=n.ep.l):(t=n.ep.l,i=n.ep.r);1===n.a?(e=t?t.y:-r,u=n.c-n.b*e,o=i?i.y:r,f=n.c-n.b*o):(u=t?t.x:-r,e=n.c-n.a*u,f=i?i.x:r,o=n.c-n.a*f);s=[u,e];c=[f,o];h[n.region.l.index].push(s,c);h[n.region.r.index].push(s,c)}),h=h.map(function(t,r){var e=c[r][0],o=c[r][1],u=t.map(function(n){return Math.atan2(n[0]-e,n[1]-o)}),f=n.range(t.length).sort(function(n,t){return u[n]-u[t]});return f.filter(function(n,t){return!t||u[n]-u[f[t-1]]>i}).map(function(n){return t[n]})}),h.forEach(function(n,t){var l=n.length,s,u,h;if(!l)return n.push([-r,-r],[-r,r],[r,r],[r,-r]);if(!(l>2)){var a=c[t],v=n[0],y=n[1],p=a[0],w=a[1],f=v[0],e=v[1],b=y[0],k=y[1],d=Math.abs(b-f),o=k-e;Math.abs(o)<i?(u=e>w?-r:r,n.push([-r,u],[r,u])):i>d?(s=f>p?-r:r,n.push([s,-r],[s,r])):(u=(f-p)*(k-e)>(b-f)*(e-w)?r:-r,h=Math.abs(o)-d,Math.abs(h)<i?n.push([0>o?u:-u,u]):(h>0&&(u*=-1),n.push([-r,u],[r,u])))}}),u)for(s=0;l>s;++s)u.clip(h[s]);for(s=0;l>s;++s)h[s].point=t[s];return h}var f=ut,o=ct,u=null;return arguments.length?r(t):(r.x=function(n){return arguments.length?(f=n,r):f},r.y=function(n){return arguments.length?(o=n,r):o},r.clipExtent=function(t){if(!arguments.length)return u&&[u[0],u[2]];if(null==t)u=null;else{var i=+t[0][0],f=+t[0][1],e=+t[1][0],o=+t[1][1];u=n.geom.polygon([[i,f],[i,o],[e,o],[e,f]])}return r},r.size=function(n){return arguments.length?r.clipExtent(n&&[[0,0],n]):u&&u[2]},r.links=function(n){var i,u,t,r=n.map(function(){return[]}),s=[],h=e(f),c=e(o),l=n.length;if(h===ut&&c===ct)i=n;else for(i=new Array(l),t=0;l>t;++t)i[t]=[+h.call(this,u=n[t],t),+c.call(this,u,t)];return hs(i,function(t){var i=t.region.l.index,u=t.region.r.index;r[i][u]||(r[i][u]=r[u][i]=!0,s.push({source:n[i],target:n[u]}))}),s},r.triangles=function(t){if(f===ut&&o===ct)return n.geom.delaunay(t);for(var r,u=new Array(s),h=e(f),c=e(o),i=-1,s=t.length;++i<s;)(u[i]=[+h.call(this,r=t[i],i),+c.call(this,r,i)]).data=r;return n.geom.delaunay(u).map(function(n){return n.map(function(n){return n.data})})},r)};oe={l:"r",r:"l"};n.geom.quadtree=function(n,t,i,r,u){function f(n){function tt(n,t,i,r,u,f,e,o){var s,h,c;isNaN(i)||isNaN(r)||(n.leaf?(s=n.x,h=n.y,null!=s?Math.abs(s-i)+Math.abs(h-r)<.01?g(n,t,i,r,u,f,e,o):(c=n.point,n.x=n.y=n.point=null,g(n,c,s,h,u,f,e,o),g(n,t,i,r,u,f,e,o)):(n.x=i,n.y=r,n.point=t)):g(n,t,i,r,u,f,e,o))}function g(n,t,i,r,u,f,e,o){var s=.5*(u+e),h=.5*(f+o),c=i>=s,l=r>=h,a=(l<<1)+c;n.leaf=!1;n=n.nodes[a]||(n.nodes[a]=hv());c?u=s:e=s;l?f=h:o=h;tt(n,t,i,r,u,f,e,o)}var c,k,d,f,nt,l,a,v,y,ut=e(o),ft=e(s),w,b,it,rt,p;if(null!=t)l=t,a=i,v=r,y=u;else if(v=y=-(l=a=1/0),k=[],d=[],nt=n.length,h)for(f=0;nt>f;++f)c=n[f],c.x<l&&(l=c.x),c.y<a&&(a=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),k.push(c.x),d.push(c.y);else for(f=0;nt>f;++f)w=+ut(c=n[f],f),b=+ft(c,f),l>w&&(l=w),a>b&&(a=b),w>v&&(v=w),b>y&&(y=b),k.push(w),d.push(b);if(it=v-l,rt=y-a,it>rt?y=a+it:v=l+rt,p=hv(),p.add=function(n){tt(p,n,+ut(n,++f),+ft(n,f),l,a,v,y)},p.visit=function(n){lr(n,p,l,a,v,y)},f=-1,null==t){for(;++f<nt;)tt(p,n[f],k[f],d[f],l,a,v,y);--f}else n.forEach(p.add);return k=d=n=c=null,p}var h,o=ut,s=ct;return(h=arguments.length)?(o=gk,s=nd,3===h&&(u=i,r=t,i=t=0),f(n)):(f.x=function(n){return arguments.length?(o=n,f):o},f.y=function(n){return arguments.length?(s=n,f):s},f.extent=function(n){return arguments.length?(null==n?t=i=r=u=null:(t=+n[0][0],i=+n[0][1],r=+n[1][0],u=+n[1][1]),f):null==t?null:[[t,i],[r,u]]},f.size=function(n){return arguments.length?(null==n?t=i=r=u=null:(t=i=0,r=+n[0],u=+n[1]),f):null==t?null:[r-t,u-i]},f)};n.interpolateRgb=cs;n.interpolateObject=cv;n.interpolateNumber=lt;n.interpolateString=lv;gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;n.interpolate=ai;n.interpolators=[function(n,t){var i=typeof t;return("string"===i?wr.has(t)||/^(#|rgb\(|hsl\()/.test(t)?cs:lv:t instanceof di?cs:"object"===i?Array.isArray(t)?pu:cv:lt)(n,t)}];n.interpolateArray=pu;var iw=function(){return l},cit=n.map({linear:iw,poly:fd,quad:function(){return id},cubic:function(){return rd},sin:function(){return ed},exp:function(){return od},circle:function(){return sd},elastic:hd,back:cd,bounce:function(){return ld}}),lit=n.map({"in":l,out:av,"in-out":vv,"out-in":function(n){return vv(av(n))}});n.ease=function(n){var t=n.indexOf("-"),i=t>=0?n.substring(0,t):n,r=t>=0?n.substring(t+1):"in";return i=cit.get(i)||iw,r=lit.get(r)||l,td(r(i.apply(null,Array.prototype.slice.call(arguments,1))))};n.interpolateHcl=ad;n.interpolateHsl=vd;n.interpolateLab=yd;n.interpolateRound=yv;n.transform=function(t){var i=g.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(n){if(null!=n){i.setAttribute("transform",n);var t=i.transform.baseVal.consolidate()}return new pv(t?t.matrix:rw)})(t)};pv.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};rw={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateTransform=kv;n.layout={};n.layout.bundle=function(){return function(n){for(var t=[],i=-1,r=n.length;++i<r;)t.push(kd(n[i]));return t}};n.layout.chord=function(){function c(){var v,t,b,c,a,k={},d=[],it=n.range(r),g=[],p,w;for(i=[],u=[],v=0,c=-1;++c<r;){for(t=0,a=-1;++a<r;)t+=f[c][a];d.push(t);g.push(n.range(r));v+=t}for(e&&it.sort(function(n,t){return e(d[n],d[t])}),o&&g.forEach(function(n,t){n.sort(function(n,i){return o(f[t][n],f[t][i])})}),v=(nt-h*r)/v,t=0,c=-1;++c<r;){for(b=t,a=-1;++a<r;){var y=it[c],tt=g[y][a],rt=f[y][tt],ut=t,ft=t+=rt*v;k[y+"-"+tt]={index:y,subindex:tt,startAngle:ut,endAngle:ft,value:rt}}u[y]={index:y,startAngle:b,endAngle:t,value:(t-b)/v};t+=h}for(c=-1;++c<r;)for(a=c-1;++a<r;)p=k[c+"-"+a],w=k[a+"-"+c],(p.value||w.value)&&i.push(p.value<w.value?{source:w,target:p}:{source:p,target:w});s&&l()}function l(){i.sort(function(n,t){return s((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var i,u,f,r,e,o,s,t={},h=0;return t.matrix=function(n){return arguments.length?(r=(f=n)&&f.length,i=u=null,t):f},t.padding=function(n){return arguments.length?(h=n,i=u=null,t):h},t.sortGroups=function(n){return arguments.length?(e=n,i=u=null,t):e},t.sortSubgroups=function(n){return arguments.length?(o=n,i=null,t):o},t.sortChords=function(n){return arguments.length?(s=n,i&&l(),t):s},t.chords=function(){return i||c(),i},t.groups=function(){return u||c(),u},t};n.layout.force=function(){function k(n){return function(t,i,r,u){var e;if(t.point!==n){var o=t.cx-n.x,s=t.cy-n.y,f=1/Math.sqrt(o*o+s*s);if(b>(u-i)*f)return e=t.charge*f*f,n.px-=o*e,n.py-=s*e,!0;t.point&&isFinite(f)&&(e=t.pointCharge*f*f,n.px-=o*e,n.py-=s*e)}return!t.charge}}function d(i){i.px=n.event.x;i.py=n.event.y;t.resume()}var h,r,c,a,v,t={},y=n.dispatch("start","tick","end"),f=[1,1],p=.9,o=uw,s=fw,e=-30,w=.1,b=.8,i=[],u=[];return t.tick=function(){if((r*=.99)<.005)return y.end({type:"end",alpha:r=0}),!0;for(var tt,t,b,g,d,s,h,l,nt=i.length,it=u.length,o=0;it>o;++o)t=u[o],b=t.source,g=t.target,h=g.x-b.x,l=g.y-b.y,(d=h*h+l*l)&&(d=r*a[o]*((d=Math.sqrt(d))-c[o])/d,h*=d,l*=d,g.x-=h*(s=b.weight/(g.weight+b.weight)),g.y-=l*s,b.x+=h*(s=1-s),b.y+=l*s);if((s=r*w)&&(h=f[0]/2,l=f[1]/2,o=-1,s))for(;++o<nt;)t=i[o],t.x+=(h-t.x)*s,t.y+=(l-t.y)*s;if(e)for(gv(tt=n.geom.quadtree(i),r,v),o=-1;++o<nt;)(t=i[o]).fixed||tt.visit(k(t));for(o=-1;++o<nt;)t=i[o],t.fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*p,t.y-=(t.py-(t.py=t.y))*p);y.tick({type:"tick",alpha:r})},t.nodes=function(n){return arguments.length?(i=n,t):i},t.links=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(f=n,t):f},t.linkDistance=function(n){return arguments.length?(o="function"==typeof n?n:+n,t):o},t.distance=t.linkDistance,t.linkStrength=function(n){return arguments.length?(s="function"==typeof n?n:+n,t):s},t.friction=function(n){return arguments.length?(p=+n,t):p},t.charge=function(n){return arguments.length?(e="function"==typeof n?n:+n,t):e},t.gravity=function(n){return arguments.length?(w=+n,t):w},t.theta=function(n){return arguments.length?(b=+n,t):b},t.alpha=function(i){return arguments.length?(i=+i,r?r=i>0?i:0:i>0&&(y.start({type:"start",alpha:r=i}),n.timer(t.tick)),t):r},t.start=function(){function w(t,i){for(var r,u=b(n),f=-1,e=u.length;++f<e;)if(!isNaN(r=u[f][t]))return r;return Math.random()*i}function b(){if(!l){for(l=[],h=0;p>h;++h)l[h]=[];for(h=0;y>h;++h){var t=u[h];l[t.source.index].push(t.target);l[t.target.index].push(t.source)}}return l[n]}for(var h,l,r,p=i.length,y=u.length,k=f[0],d=f[1],n=0;p>n;++n)(r=i[n]).index=n,r.weight=0;for(n=0;y>n;++n)r=u[n],"number"==typeof r.source&&(r.source=i[r.source]),"number"==typeof r.target&&(r.target=i[r.target]),++r.source.weight,++r.target.weight;for(n=0;p>n;++n)r=i[n],isNaN(r.x)&&(r.x=w("x",k)),isNaN(r.y)&&(r.y=w("y",d)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(c=[],"function"==typeof o)for(n=0;y>n;++n)c[n]=+o.call(this,u[n],n);else for(n=0;y>n;++n)c[n]=o;if(a=[],"function"==typeof s)for(n=0;y>n;++n)a[n]=+s.call(this,u[n],n);else for(n=0;y>n;++n)a[n]=s;if(v=[],"function"==typeof e)for(n=0;p>n;++n)v[n]=+e.call(this,i[n],n);else for(n=0;p>n;++n)v[n]=e;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){return h||(h=n.behavior.drag().origin(l).on("dragstart.force",gd).on("drag.force",d).on("dragend.force",ng)),arguments.length?(this.on("mouseover.force",tg).on("mouseout.force",ig).call(h),void 0):h},n.rebind(t,y,"on")};uw=20;fw=1;n.layout.hierarchy=function(){function u(f,e,o){var h=r.call(n,f,e);if(f.depth=e,o.push(f),h&&(c=h.length)){for(var c,s,l=-1,a=f.children=[],v=0,y=e+1;++l<c;)s=u(h[l],y,o),s.parent=f,a.push(s),v+=s.value;i&&a.sort(i);t&&(f.value=v)}else t&&(f.value=+t.call(n,f,e)||0);return f}function f(i,r){var e=i.children,u=0,s,o,h;if(e&&(s=e.length))for(o=-1,h=r+1;++o<s;)u+=f(e[o],h);else t&&(u=+t.call(n,i,r)||0);return t&&(i.value=u),u}function n(n){var t=[];return u(n,0,t),t}var i=fg,r=rg,t=ug;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(i){return arguments.length?(t=i,n):t},n.revalue=function(n){return f(n,0),n},n};n.layout.partition=function(){function r(n,t,i,u){var f=n.children,o,s,h,e;if(n.x=t,n.y=n.depth*u,n.dx=i,n.dy=u,f&&(o=f.length))for(e=-1,i=n.value?i/n.value:0;++e<o;)r(s=f[e],t,h=s.value*i,u),t+=h}function u(n){var t=n.children,i=0,f,r;if(t&&(f=t.length))for(r=-1;++r<f;)i=Math.max(i,u(t[r]));return 1+i}function i(n,i){var e=f.call(this,n,i);return r(e[0],0,t[0],t[1]/u(e[0])),e}var f=n.layout.hierarchy(),t=[1,1];return i.size=function(n){return arguments.length?(t=n,i):t},ar(i,f)};n.layout.pie=function(){function t(e){var o=e.map(function(n,i){return+f.call(t,n,i)}),s=+("function"==typeof r?r.apply(this,arguments):r),l=(("function"==typeof u?u.apply(this,arguments):u)-s)/n.sum(o),c=n.range(e.length),h;return null!=i&&c.sort(i===rc?function(n,t){return o[t]-o[n]}:function(n,t){return i(e[n],e[t])}),h=[],c.forEach(function(n){var t;h[n]={data:e[n],value:t=o[n],startAngle:s,endAngle:s+=t*l}}),h}var f=Number,i=rc,r=0,u=nt;return t.value=function(n){return arguments.length?(f=n,t):f},t.sort=function(n){return arguments.length?(i=n,t):i},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(u=n,t):u},t};rc={};n.layout.stack=function(){function t(s,h){var l=s.map(function(n,i){return r.call(t,n,i)}),a=l.map(function(n){return n.map(function(n,i){return[e.call(t,n,i),o.call(t,n,i)]})}),y=u.call(t,a,h);l=n.permute(l,y);a=n.permute(a,y);for(var v,p,w=f.call(t,a,h),b=l.length,k=l[0].length,c=0;k>c;++c)for(i.call(t,l[0][c],p=w[c],a[0][c][1]),v=1;b>v;++v)i.call(t,l[v][c],p+=a[v-1][c][1],a[v][c][1]);return s}var r=l,u=ls,f=as,i=hg,e=og,o=sg;return t.values=function(n){return arguments.length?(r=n,t):r},t.order=function(n){return arguments.length?(u="function"==typeof n?n:ew.get(n)||ls,t):u},t.offset=function(n){return arguments.length?(f="function"==typeof n?n:ow.get(n)||as,t):f},t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(i=n,t):i},t};ew=n.map({"inside-out":function(t){for(var i,u=t.length,f=t.map(cg),e=t.map(lg),l=n.range(u).sort(function(n,t){return f[n]-f[t]}),o=0,s=0,h=[],c=[],r=0;u>r;++r)i=l[r],s>o?(o+=e[i],h.push(i)):(s+=e[i],c.push(i));return c.reverse().concat(h)},reverse:function(t){return n.range(t.length).reverse()},"default":ls});ow=n.map({silhouette:function(n){for(var r,i,s=n.length,f=n[0].length,e=[],u=0,o=[],t=0;f>t;++t){for(r=0,i=0;s>r;r++)i+=n[r][t][1];i>u&&(u=i);e.push(i)}for(t=0;f>t;++t)o[t]=(u-e[t])/2;return o},wiggle:function(n){var i,t,r,u,h,c,f,e,o,a=n.length,l=n[0],v=l.length,s=[];for(s[0]=e=o=0,t=1;v>t;++t){for(i=0,u=0;a>i;++i)u+=n[i][t][1];for(i=0,h=0,f=l[t][0]-l[t-1][0];a>i;++i){for(r=0,c=(n[i][t][1]-n[i][t-1][1])/(2*f);i>r;++r)c+=(n[r][t][1]-n[r][t-1][1])/f;h+=c*n[i][t][1]}s[t]=e-=u?h/u*f:0;o>e&&(o=e)}for(t=0;v>t;++t)s[t]-=o;return s},expand:function(n){for(var t,r,u=n.length,f=n[0].length,o=1/u,e=[],i=0;f>i;++i){for(t=0,r=0;u>t;t++)r+=n[t][i][1];if(r)for(t=0;u>t;t++)n[t][i][1]/=r;else for(t=0;u>t;t++)n[t][i][1]=o}for(i=0;f>i;++i)e[i]=0;return e},zero:as});n.layout.histogram=function(){function t(t,e){for(var o,s,l=[],h=t.map(r,this),a=u.call(this,h,e),c=f.call(this,a,h,e),e=-1,y=h.length,v=c.length-1,p=i?1:1/y;++e<v;)o=l[e]=[],o.dx=c[e+1]-(o.x=c[e]),o.y=0;if(v>0)for(e=-1;++e<y;)s=h[e],s>=a[0]&&s<=a[1]&&(o=l[n.bisect(c,s,1,v)-1],o.y+=p,o.push(t[e]));return l}var i=!0,r=Number,u=yg,f=vg;return t.value=function(n){return arguments.length?(r=n,t):r},t.range=function(n){return arguments.length?(u=e(n),t):u},t.bins=function(n){return arguments.length?(f="number"==typeof n?function(t){return ny(t,n)}:e(n),t):f},t.frequency=function(n){return arguments.length?(i=!!n,t):i},t};n.layout.tree=function(){function i(n,i){function h(n,t){var f=n.children,i=n._tree,o;if(f&&(s=f.length)){for(var s,e,u,c=f[0],l=c,a=-1;++a<s;)u=f[a],h(u,e),l=v(u,e,l),e=u;kg(n);o=.5*(c._tree.prelim+u._tree.prelim);t?(i.prelim=t._tree.prelim+r(n,t),i.mod=i.prelim-o):i.prelim=o}else t&&(i.prelim=t._tree.prelim+r(n,t))}function c(n,t){var i,u,r;if(n.x=n._tree.prelim+t,i=n.children,i&&(u=i.length))for(r=-1,t+=n._tree.mod;++r<u;)c(i[r],t)}function v(n,t,i){if(t){for(var s,f=n,e=n,u=t,o=n.parent.children[0],h=f._tree.mod,c=e._tree.mod,l=u._tree.mod,a=o._tree.mod;u=ys(u),f=vs(f),u&&f;)o=vs(o),e=ys(e),e._tree.ancestor=n,s=u._tree.prelim+l-f._tree.prelim-h+r(u,f),s>0&&(dg(gg(u,n,i),n,s),h+=s,c+=s),l+=u._tree.mod,h+=f._tree.mod,a+=o._tree.mod,c+=e._tree.mod;u&&!ys(e)&&(e._tree.thread=u,e._tree.mod+=l-c);f&&!vs(o)&&(o._tree.thread=f,o._tree.mod+=h-a,i=n)}return i}var l=f.call(this,n,i),e=l[0];at(e,function(n,t){n._tree={ancestor:n,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}});h(e);c(e,-e._tree.prelim);var o=wu(e,wg),s=wu(e,pg),y=wu(e,bg),a=o.x-r(o,s)/2,p=s.x+r(s,o)/2,w=y.depth||1;return at(e,u?function(n){n.x*=t[0];n.y=n.depth*t[1];delete n._tree}:function(n){n.x=(n.x-a)/(p-a)*t[0];n.y=n.depth/w*t[1];delete n._tree}),l}var f=n.layout.hierarchy().sort(null).value(null),r=ty,t=[1,1],u=!1;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(n){return arguments.length?(u=null==(t=n),i):u?null:t},i.nodeSize=function(n){return arguments.length?(u=null!=(t=n),i):u?t:null},ar(i,f)};n.layout.pack=function(){function i(n,i){var c=f.call(this,n,i),e=c[0],o=u[0],s=u[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t},h;return(e.x=e.y=0,at(e,function(n){n.r=+l(n.value)}),at(e,uy),r)&&(h=r*(t?1:Math.max(2*e.r/o,2*e.r/s))/2,at(e,function(n){n.r+=h}),at(e,uy),at(e,function(n){n.r-=h})),fy(e,o/2,s/2,t?1:1/Math.max(2*e.r/o,2*e.r/s)),c}var t,f=n.layout.hierarchy().sort(nn),r=0,u=[1,1];return i.size=function(n){return arguments.length?(u=n,i):u},i.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,i):t},i.padding=function(n){return arguments.length?(r=+n,i):r},ar(i,f)};n.layout.cluster=function(){function i(n,i){var o,c=f.call(this,n,i),e=c[0],a=0;at(e,function(n){var t=n.children;t&&t.length?(n.x=fn(t),n.y=un(t)):(n.x=o?a+=r(n,o):0,n.y=0,o=n)});var s=oy(e),h=sy(e),l=s.x-r(s,h)/2,v=h.x+r(h,s)/2;return at(e,u?function(n){n.x=(n.x-e.x)*t[0];n.y=(e.y-n.y)*t[1]}:function(n){n.x=(n.x-l)/(v-l)*t[0];n.y=(1-(e.y?n.y/e.y:1))*t[1]}),c}var f=n.layout.hierarchy().sort(null).value(null),r=ty,t=[1,1],u=!1;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(n){return arguments.length?(u=null==(t=n),i):u?null:t},i.nodeSize=function(n){return arguments.length?(u=null!=(t=n),i):u?t:null},ar(i,f)};n.layout.treemap=function(){function o(n,t){for(var r,i,u=-1,f=n.length;++u<f;)i=(r=n[u]).value*(0>t?0:t),r.area=isNaN(i)||0>=i?0:i}function a(n){var u=n.children;if(u&&u.length){var l,v,y,r=c(n),t=[],f=u.slice(),h=1/0,e="slice"===i?r.dx:"dice"===i?r.dy:"slice-dice"===i?1&n.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(o(f,r.dx*r.dy/n.value),t.area=0;(y=f.length)>0;)t.push(l=f[y-1]),t.area+=l.area,"squarify"!==i||(v=p(t,e))<=h?(f.pop(),h=v):(t.area-=t.pop().area,s(t,e,r,!1),e=Math.min(r.dx,r.dy),t.length=t.area=0,h=1/0);t.length&&(s(t,e,r,!0),t.length=t.area=0);u.forEach(a)}}function v(n){var u=n.children;if(u&&u.length){var i,r=c(n),f=u.slice(),t=[];for(o(f,r.dx*r.dy/n.value),t.area=0;i=f.pop();)t.push(i),t.area+=i.area,null!=i.z&&(s(t,i.z?r.dx:r.dy,r,!f.length),t.length=t.area=0);u.forEach(v)}}function p(n,t){for(var i,r=n.area,u=0,f=1/0,o=-1,s=n.length;++o<s;)(i=n[o].area)&&(f>i&&(f=i),i>u&&(u=i));return r*=r,t*=t,r?Math.max(t*u*e/r,r/(t*f*e)):1/0}function s(n,t,i,r){var f,h=-1,c=n.length,o=i.x,s=i.y,e=t?u(n.area/t):0;if(t==i.dx){for((r||e>i.dy)&&(e=i.dy);++h<c;)f=n[h],f.x=o,f.y=s,f.dy=e,o+=f.dx=Math.min(i.x+i.dx-o,e?u(f.area/e):0);f.z=!0;f.dx+=i.x+i.dx-o;i.y+=e;i.dy-=e}else{for((r||e>i.dx)&&(e=i.dx);++h<c;)f=n[h],f.x=o,f.y=s,f.dx=e,s+=f.dy=Math.min(i.y+i.dy-s,e?u(f.area/e):0);f.z=!1;f.dy+=i.y+i.dy-s;i.x+=e;i.dx-=e}}function t(n){var i=r||h(n),t=i[0];return t.x=0,t.y=0,t.dx=f[0],t.dy=f[1],r&&h.revalue(t),o([t],t.dx*t.dy/t.value),(r?v:a)(t),l&&(r=i),i}var r,h=n.layout.hierarchy(),u=Math.round,f=[1,1],y=null,c=ws,l=!1,i="squarify",e=.5*(1+Math.sqrt(5));return t.size=function(n){return arguments.length?(f=n,t):f},t.padding=function(n){function u(i){var r=n.call(t,i,i.depth);return null==r?ws(i):hy(i,"number"==typeof r?[r,r,r,r]:r)}function i(t){return hy(t,n)}if(!arguments.length)return y;var r;return c=null==(y=n)?ws:"function"==(r=typeof n)?u:"number"===r?(n=[n,n,n,n],i):i,t},t.round=function(n){return arguments.length?(u=n?Math.round:Number,t):u!=Number},t.sticky=function(n){return arguments.length?(l=n,r=null,t):l},t.ratio=function(n){return arguments.length?(e=n,t):e},t.mode=function(n){return arguments.length?(i=n+"",t):i},ar(t,h)};n.random={normal:function(n,t){var i=arguments.length;return 2>i&&(t=1),1>i&&(n=0),function(){var r,u,i;do r=2*Math.random()-1,u=2*Math.random()-1,i=r*r+u*u;while(!i||i>1);return n+t*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=n.random.normal.apply(n,arguments);return function(){return Math.exp(t())}},irwinHall:function(n){return function(){for(var t=0,i=0;n>i;i++)t+=Math.random();return t/n}}};n.scale={};sw={floor:l,ceil:l};n.scale.linear=function(){return cy([0,1],[0,1],ai,!1)};n.scale.log=function(){return ay(n.scale.linear().domain([0,1]),10,!0,[1,10])};uc=n.format(".0e");hw={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};n.scale.pow=function(){return vy(n.scale.linear(),1,[0,1])};n.scale.sqrt=function(){return n.scale.pow().exponent(.5)};n.scale.ordinal=function(){return yy([],{t:"range",a:[[]]})};n.scale.category10=function(){return n.scale.ordinal().range(ait)};n.scale.category20=function(){return n.scale.ordinal().range(vit)};n.scale.category20b=function(){return n.scale.ordinal().range(yit)};n.scale.category20c=function(){return n.scale.ordinal().range(pit)};var ait=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(uu),vit=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(uu),yit=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(uu),pit=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(uu);n.scale.quantile=function(){return py([],[])};n.scale.quantize=function(){return wy(0,1,[0,1])};n.scale.threshold=function(){return by([.5],[0,1])};n.scale.identity=function(){return ky([0,1])};n.svg.arc=function(){function n(){var e=t.apply(this,arguments),n=i.apply(this,arguments),o=r.apply(this,arguments)+si,s=f.apply(this,arguments)+si,h=(o>s&&(h=o,o=s,s=h),s-o),c=u>h?"0":"1",l=Math.cos(o),a=Math.sin(o),v=Math.cos(s),y=Math.sin(s);return h>=cw?e?"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z":e?"M"+n*l+","+n*a+"A"+n+","+n+" 0 "+c+",1 "+n*v+","+n*y+"L"+e*v+","+e*y+"A"+e+","+e+" 0 "+c+",0 "+e*l+","+e*a+"Z":"M"+n*l+","+n*a+"A"+n+","+n+" 0 "+c+",1 "+n*v+","+n*y+"L0,0Z"}var t=hn,i=cn,r=dy,f=gy;return n.innerRadius=function(i){return arguments.length?(t=e(i),n):t},n.outerRadius=function(t){return arguments.length?(i=e(t),n):i},n.startAngle=function(t){return arguments.length?(r=e(t),n):r},n.endAngle=function(t){return arguments.length?(f=e(t),n):f},n.centroid=function(){var n=(t.apply(this,arguments)+i.apply(this,arguments))/2,u=(r.apply(this,arguments)+f.apply(this,arguments))/2+si;return[Math.cos(u)*n,Math.sin(u)*n]},n};si=-w;cw=nt-i;n.svg.line.radial=function(){var n=fv(np);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n};rs.reverse=us;us.reverse=rs;n.svg.area=function(){return tp(l)};n.svg.area.radial=function(){var n=tp(np);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n};n.svg.chord=function(){function n(n,u){var f=h(this,i,n,u),e=h(this,r,n,u);return"M"+f.p0+c(f.r,f.p1,f.a1-f.a0)+(l(f,e)?t(f.r,f.p1,f.r,f.p0):t(f.r,f.p1,e.r,e.p0)+c(e.r,e.p1,e.a1-e.a0)+t(e.r,e.p1,f.r,f.p0))+"Z"}function h(n,t,i,r){var e=t.call(n,i,r),u=f.call(n,e,r),h=o.call(n,e,r)+si,c=s.call(n,e,r)+si;return{r:u,a0:h,a1:c,p0:[u*Math.cos(h),u*Math.sin(h)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function l(n,t){return n.a0==t.a0&&n.a1==t.a1}function c(n,t,i){return"A"+n+","+n+" 0 "+ +(i>u)+",1 "+t}function t(n,t,i,r){return"Q 0,0 "+r}var i=ns,r=ts,f=ln,o=dy,s=gy;return n.radius=function(t){return arguments.length?(f=e(t),n):f},n.source=function(t){return arguments.length?(i=e(t),n):i},n.target=function(t){return arguments.length?(r=e(t),n):r},n.startAngle=function(t){return arguments.length?(o=e(t),n):o},n.endAngle=function(t){return arguments.length?(s=e(t),n):s},n};n.svg.diagonal=function(){function n(n,u){var e=t.call(this,n,u),o=i.call(this,n,u),s=(e.y+o.y)/2,f=[e,{x:e.x,y:s},{x:o.x,y:s},o];return f=f.map(r),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var t=ns,i=ts,r=ip;return n.source=function(i){return arguments.length?(t=e(i),n):t},n.target=function(t){return arguments.length?(i=e(t),n):i},n.projection=function(t){return arguments.length?(r=t,n):r},n};n.svg.diagonal.radial=function(){var t=n.svg.diagonal(),i=ip,r=t.projection;return t.projection=function(n){return arguments.length?r(an(i=n)):i},t};n.svg.symbol=function(){function n(n,r){return(fc.get(t.call(this,n,r))||rp)(i.call(this,n,r))}var t=yn,i=vn;return n.type=function(i){return arguments.length?(t=e(i),n):t},n.size=function(t){return arguments.length?(i=e(t),n):i},n};fc=n.map({circle:rp,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*lw)),i=t*lw;return"M0,"+-t+"L"+i+",0 0,"+t+" "+-i+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/he),i=t*he/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/he),i=t*he/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}});n.svg.symbolTypes=fc.keys();var ki,se,he=Math.sqrt(3),lw=Math.tan(30*r),c=[],aw=0;c.call=f.call;c.empty=f.empty;c.node=f.node;c.size=f.size;n.transition=function(n){return arguments.length?ki?n.transition():n:sh.transition()};n.transition.prototype=c;c.select=function(n){var f,i,t,e=this.id,o=[],r,s;for(n=be(n),r=-1,s=this.length;++r<s;){o.push(f=[]);for(var h=this[r],u=-1,c=h.length;++u<c;)(t=h[u])&&(i=n.call(t,t.__data__,u,r))?("__data__"in t&&(i.__data__=t.__data__),du(i,u,e,t.__transition__[e]),f.push(i)):f.push(null)}return yr(o,e)};c.selectAll=function(n){var s,u,t,f,h,e=this.id,c=[],i,l,r,v;for(n=bc(n),i=-1,l=this.length;++i<l;)for(var a=this[i],o=-1,y=a.length;++o<y;)if(t=a[o])for(h=t.__transition__[e],u=n.call(t,t.__data__,o,i),c.push(s=[]),r=-1,v=u.length;++r<v;)(f=u[r])&&du(f,r,e,h),s.push(f);return yr(c,e)};c.filter=function(n){var u,f,t,e=[],i,o;for("function"!=typeof n&&(n=ul(n)),i=0,o=this.length;o>i;i++){e.push(u=[]);for(var f=this[i],r=0,s=f.length;s>r;r++)(t=f[r])&&n.call(t,t.__data__,r)&&u.push(t)}return yr(e,this.id)};c.tween=function(n,t){var i=this.id;return arguments.length<2?this.node().__transition__[i].tween.get(n):dt(this,null==t?function(t){t.__transition__[i].tween.remove(n)}:function(r){r.__transition__[i].tween.set(n,t)})};c.attr=function(t,i){function f(){this.removeAttribute(r)}function e(){this.removeAttributeNS(r.space,r.local)}function o(n){return null==n?f:(n+="",function(){var t,i=this.getAttribute(r);return i!==n&&(t=u(i,n),function(n){this.setAttribute(r,t(n))})})}function s(n){return null==n?e:(n+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==n&&(t=u(i,n),function(n){this.setAttributeNS(r.space,r.local,t(n))})})}if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var u="transform"==t?kv:ai,r=n.ns.qualify(t);return nh(this,"attr."+t,i,r.local?s:o)};c.attrTween=function(t,i){function u(n,t){var u=i.call(this,n,t,this.getAttribute(r));return u&&function(n){this.setAttribute(r,u(n))}}function f(n,t){var u=i.call(this,n,t,this.getAttributeNS(r.space,r.local));return u&&function(n){this.setAttributeNS(r.space,r.local,u(n))}}var r=n.ns.qualify(t);return this.tween("attr."+t,r.local?f:u)};c.style=function(n,t,i){function u(){this.style.removeProperty(n)}function f(t){return null==t?u:(t+="",function(){var r,u=a.getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=ai(u,t),function(t){this.style.setProperty(n,r(t),i)})})}var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(i in n)this.style(i,n[i],t);return this}i=""}return nh(this,"style."+n,t,f)};c.styleTween=function(n,t,i){function r(r,u){var f=t.call(this,r,u,a.getComputedStyle(this,null).getPropertyValue(n));return f&&function(t){this.style.setProperty(n,f(t),i)}}return arguments.length<3&&(i=""),this.tween("style."+n,r)};c.text=function(n){return nh(this,"text",n,pn)};c.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})};c.ease=function(t){var i=this.id;return arguments.length<1?this.node().__transition__[i].ease:("function"!=typeof t&&(t=n.ease.apply(n,arguments)),dt(this,function(n){n.__transition__[i].ease=t}))};c.delay=function(n){var t=this.id;return dt(this,"function"==typeof n?function(i,r,u){i.__transition__[t].delay=+n.call(i,i.__data__,r,u)}:(n=+n,function(i){i.__transition__[t].delay=n}))};c.duration=function(n){var t=this.id;return dt(this,"function"==typeof n?function(i,r,u){i.__transition__[t].duration=Math.max(1,n.call(i,i.__data__,r,u))}:(n=Math.max(1,n),function(i){i.__transition__[t].duration=n}))};c.each=function(t,i){var r=this.id,u,f;return arguments.length<2?(u=se,f=ki,ki=r,dt(this,function(n,i,u){se=n.__transition__[r];t.call(n,n.__data__,i,u)}),se=u,ki=f):dt(this,function(u){var f=u.__transition__[r];(f.event||(f.event=n.dispatch("start","end"))).on(t,i)}),this};c.transition=function(){for(var u,f,n,t,s=this.id,e=++aw,o=[],r=0,h=this.length;h>r;r++){o.push(u=[]);for(var f=this[r],i=0,c=f.length;c>i;i++)(n=f[i])&&(t=Object.create(n.__transition__[s]),t.delay+=t.duration,du(n,i,e,t)),u.push(n)}return yr(o,e)};n.svg.axis=function(){function t(t){t.each(function(){var a,rt=n.select(this),et=this.__chart__||o,t=this.__chart__=o.copy(),ot=null==h?t.ticks?t.ticks.apply(t,s):t.domain():h,st=null==e?t.tickFormat?t.tickFormat.apply(t,s):l:e,p=rt.selectAll(".tick").data(ot,t),y=p.enter().insert("g",".domain").attr("class","tick").style("opacity",i),ht=n.transition(p.exit()).style("opacity",i).remove(),w=n.transition(p).style("opacity",1),v=bu(t),ut=rt.selectAll(".domain").data([0]),b=(ut.enter().append("path").attr("class","domain"),n.transition(ut)),ft,it;y.append("line");y.append("text");var k=y.select("line"),d=w.select("line"),g=p.select("text").text(st),nt=y.select("text"),tt=w.select("text");switch(c){case"bottom":a=up;k.attr("y2",r);nt.attr("y",Math.max(r,0)+f);d.attr("x2",0).attr("y2",r);tt.attr("x",0).attr("y",Math.max(r,0)+f);g.attr("dy",".71em").style("text-anchor","middle");b.attr("d","M"+v[0]+","+u+"V0H"+v[1]+"V"+u);break;case"top":a=up;k.attr("y2",-r);nt.attr("y",-(Math.max(r,0)+f));d.attr("x2",0).attr("y2",-r);tt.attr("x",0).attr("y",-(Math.max(r,0)+f));g.attr("dy","0em").style("text-anchor","middle");b.attr("d","M"+v[0]+","+-u+"V0H"+v[1]+"V"+-u);break;case"left":a=fp;k.attr("x2",-r);nt.attr("x",-(Math.max(r,0)+f));d.attr("x2",-r).attr("y2",0);tt.attr("x",-(Math.max(r,0)+f)).attr("y",0);g.attr("dy",".32em").style("text-anchor","end");b.attr("d","M"+-u+","+v[0]+"H0V"+v[1]+"H"+-u);break;case"right":a=fp;k.attr("x2",r);nt.attr("x",Math.max(r,0)+f);d.attr("x2",r).attr("y2",0);tt.attr("x",Math.max(r,0)+f).attr("y",0);g.attr("dy",".32em").style("text-anchor","start");b.attr("d","M"+u+","+v[0]+"H0V"+v[1]+"H"+u)}t.rangeBand?(ft=t.rangeBand()/2,it=function(n){return t(n)+ft},y.call(a,it),w.call(a,it)):(y.call(a,et),w.call(a,t),ht.call(a,t))})}var e,o=n.scale.linear(),c=ec,r=6,u=6,f=3,s=[10],h=null;return t.scale=function(n){return arguments.length?(o=n,t):o},t.orient=function(n){return arguments.length?(c=n in vw?n+"":ec,t):c},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(n){return arguments.length?(h=n,t):h},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(n){var i=arguments.length;return i?(r=+n,u=+arguments[i-1],t):r},t.innerTickSize=function(n){return arguments.length?(r=+n,t):r},t.outerTickSize=function(n){return arguments.length?(u=+n,t):u},t.tickPadding=function(n){return arguments.length?(f=+n,t):f},t.tickSubdivide=function(){return arguments.length&&t},t};ec="bottom";vw={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function f(t){t.each(function(){var i=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",b).on("touchstart.brush",b),h=i.selectAll(".background").data([0]),e,t,o,s;h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");e=i.selectAll(".resize").data(v,l);e.exit().remove();e.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return wit[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");e.style("display",f.empty()?"none":null);o=n.transition(i);s=n.transition(h);r&&(t=bu(r),s.attr("x",t[0]).attr("width",t[1]-t[0]),p(o));u&&(t=bu(u),s.attr("y",t[0]).attr("height",t[1]-t[0]),w(o));y(o)})}function y(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+t[+/e$/.test(n)]+","+i[+/^s/.test(n)]+")"})}function p(n){n.select(".extent").attr("x",t[0]);n.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1]-t[0])}function w(n){n.select(".extent").attr("y",i[0]);n.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function b(){function ht(){32==n.event.keyCode&&(b||(v=null,l[0]-=t[1],l[1]-=i[1],b=2),bt())}function ct(){32==n.event.keyCode&&2==b&&(l[0]+=t[1],l[1]+=i[1],b=0,bt())}function g(){var f=n.mouse(tt),e=!1;nt&&(f[0]+=nt[0],f[1]+=nt[1]);b||(n.event.altKey?(v||(v=[(t[0]+t[1])/2,(i[0]+i[1])/2]),l[0]=t[+(f[0]<v[0])],l[1]=i[+(f[1]<v[1])]):v=null);lt&&ot(f,r,0)&&(p(k),e=!0);at&&ot(f,u,1)&&(w(k),e=!0);e&&(y(k),rt({type:"brush",mode:b?"move":"resize"}))}function ot(n,r,u){var f,y,k=bu(r),p=k[0],w=k[1],c=l[u],a=u?i:t,d=a[1]-a[0];return b&&(p-=c,w-=d+c),f=(u?h:s)?Math.max(p,Math.min(w,n[u])):n[u],b?y=(f+=c)+d:(v&&(c=Math.max(p,Math.min(w,2*v[u]-f))),f>c?(y=f,f=c):y=c),a[0]!=f||a[1]!=y?(u?o=null:e=null,a[0]=f,a[1]=y,!0):void 0}function st(){g();k.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null);n.select("body").style("cursor",null);ut.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);vt();rt({type:"brushend"})}var v,nt,tt=this,it=n.select(n.event.target),rt=c.of(tt,arguments),k=n.select(tt),d=it.datum(),lt=!/^(n|s)$/.test(d)&&r,at=!/^(e|w)$/.test(d)&&u,b=it.classed("extent"),vt=tu(),l=n.mouse(tt),ut=n.select(a).on("keydown.brush",ht).on("keyup.brush",ct),ft,et;(n.event.changedTouches?ut.on("touchmove.brush",g).on("touchend.brush",st):ut.on("mousemove.brush",g).on("mouseup.brush",st),k.interrupt().selectAll("*").interrupt(),b)?(l[0]=t[0]-l[0],l[1]=i[0]-l[1]):d?(ft=+/w$/.test(d),et=+/^n/.test(d),nt=[t[1-ft]-l[0],i[1-et]-l[1]],l[0]=t[ft],l[1]=i[et]):n.event.altKey&&(v=l.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",it.style("cursor"));rt({type:"brushstart"});g()}var e,o,c=we(f,"brushstart","brush","brushend"),r=null,u=null,t=[0,0],i=[0,0],s=!0,h=!0,v=oc[0];return f.event=function(r){r.each(function(){var u=c.of(this,arguments),r={x:t,y:i,i:e,j:o},f=this.__chart__||r;this.__chart__=r;ki?n.select(this).transition().each("start.brush",function(){e=f.i;o=f.j;t=f.x;i=f.y;u({type:"brushstart"})}).tween("brush:brush",function(){var n=pu(t,r.x),f=pu(i,r.y);return e=o=null,function(e){t=r.x=n(e);i=r.y=f(e);u({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=r.i;o=r.j;u({type:"brush",mode:"resize"});u({type:"brushend"})}):(u({type:"brushstart"}),u({type:"brush",mode:"resize"}),u({type:"brushend"}))})},f.x=function(n){return arguments.length?(r=n,v=oc[!r<<1|!u],f):r},f.y=function(n){return arguments.length?(u=n,v=oc[!r<<1|!u],f):u},f.clamp=function(n){return arguments.length?(r&&u?(s=!!n[0],h=!!n[1]):r?s=!!n:u&&(h=!!n),f):r&&u?[s,h]:r?s:u?h:null},f.extent=function(n){var s,h,c,l,a;return arguments.length?(r&&(s=n[0],h=n[1],u&&(s=s[0],h=h[0]),e=[s,h],r.invert&&(s=r(s),h=r(h)),s>h&&(a=s,s=h,h=a),(s!=t[0]||h!=t[1])&&(t=[s,h])),u&&(c=n[0],l=n[1],r&&(c=c[1],l=l[1]),o=[c,l],u.invert&&(c=u(c),l=u(l)),c>l&&(a=c,c=l,l=a),(c!=i[0]||l!=i[1])&&(i=[c,l])),f):(r&&(e?(s=e[0],h=e[1]):(s=t[0],h=t[1],r.invert&&(s=r.invert(s),h=r.invert(h)),s>h&&(a=s,s=h,h=a))),u&&(o?(c=o[0],l=o[1]):(c=i[0],l=i[1],u.invert&&(c=u.invert(c),l=u.invert(l)),c>l&&(a=c,c=l,l=a))),r&&u?[[s,c],[h,l]]:r?[s,h]:u&&[c,l])},f.clear=function(){return f.empty()||(t=[0,0],i=[0,0],e=o=null),f},f.empty=function(){return!!r&&t[0]==t[1]||!!u&&i[0]==i[1]},n.rebind(f,c,"on")};var wit={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},oc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],t=n.time={},v=Date;vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){wt.setUTCDate.apply(this._,arguments)},setDay:function(){wt.setUTCDay.apply(this._,arguments)},setFullYear:function(){wt.setUTCFullYear.apply(this._,arguments)},setHours:function(){wt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){wt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){wt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){wt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){wt.setUTCSeconds.apply(this._,arguments)},setTime:function(){wt.setTime.apply(this._,arguments)}};var wt=Date.prototype,sc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],hc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cc=["January","February","March","April","May","June","July","August","September","October","November","December"],lc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.year=vi(function(n){return n=t.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()});t.years=t.year.range;t.years.utc=t.year.utc.range;t.day=vi(function(n){var t=new v(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1});t.days=t.day.range;t.days.utc=t.day.utc.range;t.dayOfYear=function(n){var i=t.year(n);return Math.floor((n-i-6e4*(n.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)};["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].forEach(function(n,i){n=n.toLowerCase();i=7-i;var r=t[n]=vi(function(n){return(n=t.day(n)).setDate(n.getDate()-(n.getDay()+i)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var r=t.year(n).getDay();return Math.floor((t.dayOfYear(n)+(r+i)%7)/7)-(r!==i)});t[n+"s"]=r.range;t[n+"s"].utc=r.utc.range;t[n+"OfYear"]=function(n){var r=t.year(n).getDay();return Math.floor((t.dayOfYear(n)+(r+i)%7)/7)}});t.week=t.sunday;t.weeks=t.sunday.range;t.weeks.utc=t.sunday.utc.range;t.weekOfYear=t.sundayOfYear;t.format=y;var yw=tf(sc),bit=rf(sc),pw=tf(hc),kit=rf(hc),ww=tf(cc),dit=rf(cc),bw=tf(lc),git=rf(lc),kw=/^%/,dw={"-":"",_:" ",0:"0"},ce={a:function(n){return hc[n.getDay()]},A:function(n){return sc[n.getDay()]},b:function(n){return lc[n.getMonth()]},B:function(n){return cc[n.getMonth()]},c:y("%a %b %e %X %Y"),d:function(n,t){return p(n.getDate(),t,2)},e:function(n,t){return p(n.getDate(),t,2)},H:function(n,t){return p(n.getHours(),t,2)},I:function(n,t){return p(n.getHours()%12||12,t,2)},j:function(n,i){return p(1+t.dayOfYear(n),i,3)},L:function(n,t){return p(n.getMilliseconds(),t,3)},m:function(n,t){return p(n.getMonth()+1,t,2)},M:function(n,t){return p(n.getMinutes(),t,2)},p:function(n){return n.getHours()>=12?"PM":"AM"},S:function(n,t){return p(n.getSeconds(),t,2)},U:function(n,i){return p(t.sundayOfYear(n),i,2)},w:function(n){return n.getDay()},W:function(n,i){return p(t.mondayOfYear(n),i,2)},x:y("%m/%d/%Y"),X:y("%H:%M:%S"),y:function(n,t){return p(n.getFullYear()%100,t,2)},Y:function(n,t){return p(n.getFullYear()%1e4,t,4)},Z:ptt,"%":function(){return"%"}},nrt={a:wn,A:bn,b:ntt,B:ttt,c:itt,d:ep,e:ep,H:op,I:op,j:ctt,L:vtt,m:htt,M:ltt,p:ytt,S:att,U:dn,w:kn,W:gn,x:rtt,X:utt,y:ett,Y:ftt,Z:ott,"%":wtt},s=/^\s*\d+/,trt=n.map({am:0,pm:1});y.utc=ft;ac=ft("%Y-%m-%dT%H:%M:%S.%LZ");y.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?th:ac;th.parse=function(n){var t=new Date(n);return isNaN(t)?null:t};th.toString=ac.toString;t.second=vi(function(n){return new v(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()});t.seconds=t.second.range;t.seconds.utc=t.second.utc.range;t.minute=vi(function(n){return new v(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()});t.minutes=t.minute.range;t.minutes.utc=t.minute.utc.range;t.hour=vi(function(n){var t=n.getTimezoneOffset()/60;return new v(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()});t.hours=t.hour.range;t.hours.utc=t.hour.utc.range;t.month=vi(function(n){return n=t.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()});t.months=t.month.range;t.months.utc=t.month.utc.range;var le=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],vc=[[t.second,1],[t.second,5],[t.second,15],[t.second,30],[t.minute,1],[t.minute,5],[t.minute,15],[t.minute,30],[t.hour,1],[t.hour,3],[t.hour,6],[t.hour,12],[t.day,1],[t.day,2],[t.week,1],[t.month,1],[t.month,3],[t.year,1]],irt=[[y("%Y"),sr],[y("%B"),function(n){return n.getMonth()}],[y("%b %d"),function(n){return 1!=n.getDate()}],[y("%a %d"),function(n){return n.getDay()&&1!=n.getDate()}],[y("%I %p"),function(n){return n.getHours()}],[y("%I:%M"),function(n){return n.getMinutes()}],[y(":%S"),function(n){return n.getSeconds()}],[y(".%L"),function(n){return n.getMilliseconds()}]],rrt=sp(irt);vc.year=t.year;t.scale=function(){return ih(n.scale.linear(),vc,rrt)};var urt={range:function(t,i,r){return n.range(+t,+i,r).map(yi)}},gw=vc.map(function(n){return[n[0].utc,n[1]]}),frt=[[ft("%Y"),sr],[ft("%B"),function(n){return n.getUTCMonth()}],[ft("%b %d"),function(n){return 1!=n.getUTCDate()}],[ft("%a %d"),function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],[ft("%I %p"),function(n){return n.getUTCHours()}],[ft("%I:%M"),function(n){return n.getUTCMinutes()}],[ft(":%S"),function(n){return n.getUTCSeconds()}],[ft(".%L"),function(n){return n.getUTCMilliseconds()}]],ert=sp(frt);return gw.year=t.year.utc,t.scale.utc=function(){return ih(n.scale.linear(),gw,ert)},n.text=so(function(n){return n.responseText}),n.json=function(n,t){return ho(n,"application/json",btt,t)},n.html=function(n,t){return ho(n,"text/html",ktt,t)},n.xml=so(function(n){return n.responseXML}),n}(),function(n,t){typeof define=="function"&&define.amd?define(["d3"],function(i){return n.Rickshaw=t(i)}):typeof exports=="object"?module.exports=t(require("d3")):n.Rickshaw=t(d3)}(this,function(n){var t={namespace:function(n){for(var r,f=n.split("."),i=t,u=1,e=f.length;u<e;u++)r=f[u],i[r]=i[r]||{},i=i[r];return i},keys:function(n){var t=[];for(var i in n)t.push(i);return t},extend:function(n,t){for(var i in t)n[i]=t[i];return n},clone:function(n){return JSON.parse(JSON.stringify(n))}};return function(n){function u(n){return o.call(n)===v}function y(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function p(n){var t,i;if(w(n)!==r)throw new TypeError;t=[];for(i in n)n.hasOwnProperty(i)&&t.push(i);return t}function w(n){switch(n){case null:return s;case void 0:return h}var t=typeof n;switch(t){case"boolean":return c;case"number":return l;case"string":return a}return r}function b(n){return typeof n=="undefined"}function k(n){var t=n.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return t.length==1&&!t[0]?[]:t}function d(n,i){var r=n;return function(){var n=e([t(r,this)],arguments);return i.apply(this,n)}}function e(n,t){for(var r=n.length,i=t.length;i--;)n[r+i]=t[i];return n}function g(n,t){return n=f.call(n,0),e(n,t)}function t(n,t){if(arguments.length<2&&b(arguments[0]))return this;var i=n,r=f.call(arguments,2);return function(){var n=g(r,arguments);return i.apply(t,n)}}var o=Object.prototype.toString,s="Null",h="Undefined",c="Boolean",l="Number",a="String",r="Object",v="[object Function]",f=Array.prototype.slice,nt=function(){},i=function(){function n(){}function f(){function t(){this.initialize.apply(this,arguments)}var r=null,f=[].slice.apply(arguments),e,o;if(u(f[0])&&(r=f.shift()),y(t,i.Methods),t.superclass=r,t.subclasses=[],r){n.prototype=r.prototype;t.prototype=new n;try{r.subclasses.push(t)}catch(s){}}for(e=0,o=f.length;e<o;e++)t.addMethods(f[e]);return t.prototype.initialize||(t.prototype.initialize=nt),t.prototype.constructor=t,t}function e(n){var h=this.superclass&&this.superclass.prototype,e=p(n),o,c,s,i,f;for(r&&(n.toString!=Object.prototype.toString&&e.push("toString"),n.valueOf!=Object.prototype.valueOf&&e.push("valueOf")),o=0,c=e.length;o<c;o++)s=e[o],i=n[s],h&&u(i)&&k(i)[0]=="$super"&&(f=i,i=d(function(n){return function(){return h[n].apply(this,arguments)}}(s),f),i.valueOf=t(f.valueOf,f),i.toString=t(f.toString,f)),this.prototype[s]=i;return this}var r=function(){for(var n in{toString:1})if(n==="toString")return!1;return!0}();return{create:f,Methods:{addMethods:e}}}();n.exports?n.exports.Class=i:n.Class=i}(t),t.namespace("Rickshaw.Compat.ClassList"),t.Compat.ClassList=function(){typeof document=="undefined"||"classList"in document.createElement("a")||function(n){"use strict";var e="classList",t="prototype",o=(n.HTMLElement||n.Element)[t],r=Object,l=String[t].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[t].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1},s=function(n,t){this.name=n;this.code=DOMException[n];this.message=t},u=function(n,t){if(t==="")throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(n,t)},h=function(n){for(var i=l.call(n.className),r=i?i.split(/\s+/):[],t=0,u=r.length;t<u;t++)this.push(r[t]);this._updateClassName=function(){n.className=this.toString()}},i=h[t]=[],c=function(){return new h(this)},f;if(s[t]=Error[t],i.item=function(n){return this[n]||null},i.contains=function(n){return n+="",u(this,n)!==-1},i.add=function(n){n+="";u(this,n)===-1&&(this.push(n),this._updateClassName())},i.remove=function(n){n+="";var t=u(this,n);t!==-1&&(this.splice(t,1),this._updateClassName())},i.toggle=function(n){n+="";u(this,n)===-1?this.add(n):this.remove(n)},i.toString=function(){return this.join(" ")},r.defineProperty){f={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(o,e,f)}catch(v){v.number===-2146823252&&(f.enumerable=!1,r.defineProperty(o,e,f))}}else r[t].__defineGetter__&&o.__defineGetter__(e,c)}(window)},(typeof RICKSHAW_NO_COMPAT=="undefined"||RICKSHAW_NO_COMPAT)&&typeof RICKSHAW_NO_COMPAT!="undefined"||new t.Compat.ClassList,t.namespace("Rickshaw.Graph"),t.Graph=function(i){var r=this;this.initialize=function(t){if(!t.element)throw"Rickshaw.Graph needs a reference to an element";if(t.element.nodeType!==1)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=t.element;this.series=t.series;this.window={};this.updateCallbacks=[];this.configureCallbacks=[];this.defaults={interpolation:"cardinal",offset:"zero",min:undefined,max:undefined,preserve:!1,xScale:undefined,yScale:undefined,stack:!0};this._loadRenderers();this.configure(t);this.validateSeries(t.series);this.series.active=function(){return r.series.filter(function(n){return!n.disabled})};this.setSize({width:t.width,height:t.height});this.element.classList.add("rickshaw_graph");this.vis=n.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height);this.discoverRange()};this._loadRenderers=function(){var i,n;for(i in t.Graph.Renderer)i&&t.Graph.Renderer.hasOwnProperty(i)&&(n=t.Graph.Renderer[i],n&&n.prototype&&n.prototype.render)&&r.registerRenderer(new n({graph:r}))};this.validateSeries=function(n){var i;if(!Array.isArray(n)&&!(n instanceof t.Series)){i=Object.prototype.toString.apply(n);throw"series is not an array: "+i;}n.forEach(function(n){if(!(n instanceof Object))throw"series element is not an object: "+n;if(!n.data)throw"series has no data: "+JSON.stringify(n);if(!Array.isArray(n.data))throw"series data is not an array: "+JSON.stringify(n.data);if(n.data.length>0){var i=n.data[0].x,t=n.data[0].y;if(typeof i!="number"||typeof t!="number"&&t!==null)throw"x and y properties of points should be numbers instead of "+typeof i+" and "+typeof t;}if(n.data.length>=3&&(n.data[2].x<n.data[1].x||n.data[1].x<n.data[0].x||n.data[n.data.length-1].x<n.data[0].x))throw"series data needs to be sorted on x values for series name: "+n.name;},this)};this.dataDomain=function(){var t=this.series.map(function(n){return n.data}),i=n.min(t.map(function(n){return n[0].x})),r=n.max(t.map(function(n){return n[n.length-1].x}));return[i,r]};this.discoverRange=function(){var t=this.renderer.domain();this.x=(this.xScale||n.scale.linear()).copy().domain(t.x).range([0,this.width]);this.y=(this.yScale||n.scale.linear()).copy().domain(t.y).range([this.height,0]);this.x.magnitude=n.scale.linear().domain([t.x[0]-t.x[0],t.x[1]-t.x[0]]).range([0,this.width]);this.y.magnitude=n.scale.linear().domain([t.y[0]-t.y[0],t.y[1]-t.y[0]]).range([0,this.height])};this.render=function(){var n=this.stackData();this.discoverRange();this.renderer.render();this.updateCallbacks.forEach(function(n){n()})};this.update=this.render;this.stackData=function(){var i=this.series.active().map(function(n){return n.data}).map(function(n){return n.filter(function(n){return this._slice(n)},this)},this),f=this.preserve,u,e,o;return f||this.series.forEach(function(n){n.scale&&(f=!0)}),i=f?t.clone(i):i,this.series.active().forEach(function(n,t){if(n.scale){var r=i[t];r&&r.forEach(function(t){t.y=n.scale(t.y)})}}),this.stackData.hooks.data.forEach(function(n){i=n.f.apply(r,[i])}),this.renderer.unstack||(this._validateStackable(),e=n.layout.stack(),e.offset(r.offset),u=e(i)),u=u||i,this.renderer.unstack&&u.forEach(function(n){n.forEach(function(n){n.y0=n.y0===undefined?0:n.y0})}),this.stackData.hooks.after.forEach(function(n){u=n.f.apply(r,[i])}),o=0,this.series.forEach(function(n){n.disabled||(n.stack=u[o++])}),this.stackedData=u,u};this._validateStackable=function(){var t=this.series,n;t.forEach(function(t){if(n=n||t.data.length,n&&t.data.length!=n)throw"stacked series cannot have differing numbers of points: "+n+" vs "+t.data.length+"; see Rickshaw.Series.fill()";},this)};this.stackData.hooks={data:[],after:[]};this._slice=function(n){if(this.window.xMin||this.window.xMax){var t=!0;return this.window.xMin&&n.x<this.window.xMin&&(t=!1),this.window.xMax&&n.x>this.window.xMax&&(t=!1),t}return!0};this.onUpdate=function(n){this.updateCallbacks.push(n)};this.onConfigure=function(n){this.configureCallbacks.push(n)};this.registerRenderer=function(n){this._renderers=this._renderers||{};this._renderers[n.name]=n};this.configure=function(n){this.config=this.config||{};(n.width||n.height)&&this.setSize(n);t.keys(this.defaults).forEach(function(t){this.config[t]=t in n?n[t]:t in this?this[t]:this.defaults[t]},this);t.keys(this.config).forEach(function(n){this[n]=this.config[n]},this);"stack"in n&&(n.unstack=!n.stack);var i=n.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(i,n);this.configureCallbacks.forEach(function(t){t(n)})};this.setRenderer=function(n,t){if(typeof n=="function")this.renderer=new n({graph:r}),this.registerRenderer(this.renderer);else{if(!this._renderers[n])throw"couldn't find renderer "+n;this.renderer=this._renderers[n]}typeof t=="object"&&this.renderer.configure(t)};this.setSize=function(n){if(n=n||{},typeof window!==undefined)var t=window.getComputedStyle(this.element,null),i=parseInt(t.getPropertyValue("width"),10),r=parseInt(t.getPropertyValue("height"),10);this.width=n.width||i||400;this.height=n.height||r||250;this.vis&&this.vis.attr("width",this.width).attr("height",this.height)};this.initialize(i)},t.namespace("Rickshaw.Fixtures.Color"),t.Fixtures.Color=function(){this.schemes={};this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse();this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"];this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"];this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse();this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"};this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse();this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"];this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},t.namespace("Rickshaw.Fixtures.RandomData"),t.Fixtures.RandomData=function(n){var t,i;n=n||1;t=200;i=Math.floor((new Date).getTime()/1e3);this.addData=function(r){var f=Math.random()*100+15+t,u=r[0].length,e=1;r.forEach(function(t){var r=Math.random()*20,o=f/25+e+++(Math.cos(u*e*11/960)+2)*15+(Math.cos(u/7)+2)*7+(Math.cos(u/17)+2)*1;t.push({x:u*n+i,y:o+r})});t=f*.85};this.removeData=function(t){t.forEach(function(n){n.shift()});i+=n}},t.namespace("Rickshaw.Fixtures.Time"),t.Fixtures.Time=function(){var t=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.units=[{name:"decade",seconds:86400*365.25*10,formatter:function(n){return parseInt(n.getUTCFullYear()/10,10)*10}},{name:"year",seconds:86400*365.25,formatter:function(n){return n.getUTCFullYear()}},{name:"month",seconds:86400*30.5,formatter:function(n){return t.months[n.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(n){return t.formatDate(n)}},{name:"day",seconds:86400,formatter:function(n){return n.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(n){return t.formatTime(n)}},{name:"hour",seconds:3600,formatter:function(n){return t.formatTime(n)}},{name:"15 minute",seconds:900,formatter:function(n){return t.formatTime(n)}},{name:"minute",seconds:60,formatter:function(n){return n.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(n){return n.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(n){return n.getUTCSeconds()+"s"}},{name:"decisecond",seconds:1/10,formatter:function(n){return n.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:1/100,formatter:function(n){return n.getUTCMilliseconds()+"ms"}}];this.unit=function(n){return this.units.filter(function(t){return n==t.name}).shift()};this.formatDate=function(t){return n.time.format("%b %e")(t)};this.formatTime=function(n){return n.toUTCString().match(/(\d+:\d+):/)[1]};this.ceil=function(n,t){var i,f,r,u;return t.name=="month"?(i=new Date(n*1e3),f=Date.UTC(i.getUTCFullYear(),i.getUTCMonth())/1e3,f==n)?n:(r=i.getUTCFullYear(),u=i.getUTCMonth(),u==11?(u=0,r=r+1):u+=1,Date.UTC(r,u)/1e3):t.name=="year"?(i=new Date(n*1e3),f=Date.UTC(i.getUTCFullYear(),0)/1e3,f==n)?n:(r=i.getUTCFullYear()+1,Date.UTC(r,0)/1e3):Math.ceil(n/t.seconds)*t.seconds}},t.namespace("Rickshaw.Fixtures.Time.Local"),t.Fixtures.Time.Local=function(){var t=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.units=[{name:"decade",seconds:86400*365.25*10,formatter:function(n){return parseInt(n.getFullYear()/10,10)*10}},{name:"year",seconds:86400*365.25,formatter:function(n){return n.getFullYear()}},{name:"month",seconds:86400*30.5,formatter:function(n){return t.months[n.getMonth()]}},{name:"week",seconds:604800,formatter:function(n){return t.formatDate(n)}},{name:"day",seconds:86400,formatter:function(n){return n.getDate()}},{name:"6 hour",seconds:21600,formatter:function(n){return t.formatTime(n)}},{name:"hour",seconds:3600,formatter:function(n){return t.formatTime(n)}},{name:"15 minute",seconds:900,formatter:function(n){return t.formatTime(n)}},{name:"minute",seconds:60,formatter:function(n){return n.getMinutes()}},{name:"15 second",seconds:15,formatter:function(n){return n.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(n){return n.getSeconds()+"s"}},{name:"decisecond",seconds:1/10,formatter:function(n){return n.getMilliseconds()+"ms"}},{name:"centisecond",seconds:1/100,formatter:function(n){return n.getMilliseconds()+"ms"}}];this.unit=function(n){return this.units.filter(function(t){return n==t.name}).shift()};this.formatDate=function(t){return n.time.format("%b %e")(t)};this.formatTime=function(n){return n.toString().match(/(\d+:\d+):/)[1]};this.ceil=function(n,t){var r,e,u,o,i,f;return t.name=="day"?(o=new Date((n+t.seconds-1)*1e3),i=new Date(0),i.setMilliseconds(0),i.setSeconds(0),i.setMinutes(0),i.setHours(0),i.setDate(o.getDate()),i.setMonth(o.getMonth()),i.setFullYear(o.getFullYear()),i.getTime()/1e3):t.name=="month"?(r=new Date(n*1e3),e=new Date(r.getFullYear(),r.getMonth()).getTime()/1e3,e==n)?n:(u=r.getFullYear(),f=r.getMonth(),f==11?(f=0,u=u+1):f+=1,new Date(u,f).getTime()/1e3):t.name=="year"?(r=new Date(n*1e3),e=new Date(r.getUTCFullYear(),0).getTime()/1e3,e==n)?n:(u=r.getFullYear()+1,new Date(u,0).getTime()/1e3):Math.ceil(n/t.seconds)*t.seconds}},t.namespace("Rickshaw.Fixtures.Number"),t.Fixtures.Number.formatKMBT=function(n){var t=Math.abs(n);return t>=1e12?n/1e12+"T":t>=1e9?n/1e9+"B":t>=1e6?n/1e6+"M":t>=1e3?n/1e3+"K":t<1&&n>0?n.toFixed(2):t===0?"":n},t.Fixtures.Number.formatBase1024KMGTP=function(n){var t=Math.abs(n);return t>=0x4000000000000?n/0x4000000000000+"P":t>=1099511627776?n/1099511627776+"T":t>=1073741824?n/1073741824+"G":t>=1048576?n/1048576+"M":t>=1024?n/1024+"K":t<1&&n>0?n.toFixed(2):t===0?"":n},t.namespace("Rickshaw.Color.Palette"),t.Color.Palette=function(i){var e=new t.Fixtures.Color,o,r,f,u,s;if(i=i||{},this.schemes={},this.scheme=e.schemes[i.scheme]||i.scheme||e.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,i.interpolatedStopCount){for(o=this.scheme.length-1,u=[],r=0;r<o;r++)for(u.push(this.scheme[r]),s=n.interpolateHsl(this.scheme[r],this.scheme[r+1]),f=1;f<i.interpolatedStopCount;f++)u.push(s(1/i.interpolatedStopCount*f));u.push(this.scheme[this.scheme.length-1]);this.scheme=u}this.rotateCount=this.scheme.length;this.color=function(n){return this.scheme[n]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"};this.interpolateColor=function(){if(Array.isArray(this.scheme)){var t;return this.generatorIndex==this.rotateCount*2-1?(t=n.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(t=n.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(t),t}}},t.namespace("Rickshaw.Graph.Ajax"),t.Graph.Ajax=t.Class.create({initialize:function(n){this.dataURL=n.dataURL;this.onData=n.onData||function(n){return n};this.onComplete=n.onComplete||function(){};this.onError=n.onError||function(){};this.args=n;this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL);this.onError(this)},success:function(n){n=this.onData(n);this.args.series=this._splice({data:n,series:this.args.series});this.graph=this.graph||new t.Graph(this.args);this.graph.render();this.onComplete(this)},_splice:function(n){var t=n.data,i=n.series;return n.series?(i.forEach(function(n){var i=n.key||n.name;if(!i)throw"series needs a key or a name";t.forEach(function(t){var r=t.key||t.name,u;if(!r)throw"data needs a key or a name";i==r&&(u=["color","name","data"],u.forEach(function(i){t[i]&&(n[i]=t[i])}))})}),i):t}}),t.namespace("Rickshaw.Graph.Annotate"),t.Graph.Annotate=function(n){var r=this.graph=n.graph,i;this.elements={timeline:n.element};i=this;this.data={};this.elements.timeline.classList.add("rickshaw_annotation_timeline");this.add=function(n,t,r){i.data[n]=i.data[n]||{boxes:[]};i.data[n].boxes.push({content:t,end:r})};this.update=function(){t.keys(i.data).forEach(function(n){var t=i.data[n],r=i.graph.x(n),u;if(r<0||r>i.graph.x.range()[1]){t.element&&(t.line.classList.add("offscreen"),t.element.style.display="none");t.boxes.forEach(function(n){n.rangeElement&&n.rangeElement.classList.add("offscreen")});return}t.element||(u=t.element=document.createElement("div"),u.classList.add("annotation"),this.elements.timeline.appendChild(u),u.addEventListener("click",function(){u.classList.toggle("active");t.line.classList.toggle("active");t.boxes.forEach(function(n){n.rangeElement&&n.rangeElement.classList.toggle("active")})},!1));t.element.style.left=r+"px";t.element.style.display="block";t.boxes.forEach(function(n){var u=n.element,f,e,o;u||(u=n.element=document.createElement("div"),u.classList.add("content"),u.innerHTML=n.content,t.element.appendChild(u),t.line=document.createElement("div"),t.line.classList.add("annotation_line"),i.graph.element.appendChild(t.line),n.end&&(n.rangeElement=document.createElement("div"),n.rangeElement.classList.add("annotation_range"),i.graph.element.appendChild(n.rangeElement)));n.end&&(f=r,e=Math.min(i.graph.x(n.end),i.graph.x.range()[1]),f>e&&(e=r,f=Math.max(i.graph.x(n.end),i.graph.x.range()[0])),o=e-f,n.rangeElement.style.left=f+"px",n.rangeElement.style.width=o+"px",n.rangeElement.classList.remove("offscreen"));t.line.classList.remove("offscreen");t.line.style.left=r+"px"})},this)};this.graph.onUpdate(function(){i.update()})},t.namespace("Rickshaw.Graph.Axis.Time"),t.Graph.Axis.Time=function(n){var i=this,r;this.graph=n.graph;this.elements=[];this.ticksTreatment=n.ticksTreatment||"plain";this.fixedTimeUnit=n.timeUnit;r=n.timeFixture||new t.Fixtures.Time;this.appropriateTimeUnit=function(){var n,i=r.units,t=this.graph.x.domain(),u=t[1]-t[0];return i.forEach(function(t){Math.floor(u/t.seconds)>=2&&(n=n||t)}),n||r.units[r.units.length-1]};this.tickOffsets=function(){for(var i,t=this.graph.x.domain(),n=this.fixedTimeUnit||this.appropriateTimeUnit(),o=Math.ceil((t[1]-t[0])/n.seconds),u=t[0],f=[],e=0;e<o;e++)i=r.ceil(u,n),u=i+n.seconds/2,f.push({value:i,unit:n});return f};this.render=function(){this.elements.forEach(function(n){n.parentNode.removeChild(n)});this.elements=[];var n=this.tickOffsets();n.forEach(function(n){var t,r;i.graph.x(n.value)>i.graph.x.range()[1]||(t=document.createElement("div"),t.style.left=i.graph.x(n.value)+"px",t.classList.add("x_tick"),t.classList.add(i.ticksTreatment),r=document.createElement("div"),r.classList.add("title"),r.innerHTML=n.unit.formatter(new Date(n.value*1e3)),t.appendChild(r),i.graph.element.appendChild(t),i.elements.push(t))})};this.graph.onUpdate(function(){i.render()})},t.namespace("Rickshaw.Graph.Axis.X"),t.Graph.Axis.X=function(t){var r=this,i=.1;this.initialize=function(t){this.graph=t.graph;this.orientation=t.orientation||"top";this.pixelsPerTick=t.pixelsPerTick||75;t.ticks&&(this.staticTicks=t.ticks);t.tickValues&&(this.tickValues=t.tickValues);this.tickSize=t.tickSize||4;this.ticksTreatment=t.ticksTreatment||"plain";t.element?(this.element=t.element,this._discoverSize(t.element,t),this.vis=n.select(t.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:t.width,height:t.height})):this.vis=this.graph.vis;this.graph.onUpdate(function(){r.render()})};this.setSize=function(n){if(n=n||{},this.element){this._discoverSize(this.element.parentNode,n);this.vis.attr("height",this.height).attr("width",this.width*(1+i));var t=Math.floor(this.width*i/2);this.element.style.left=-1*t+"px"}};this.render=function(){var r,u,f,e,o;this._renderWidth!==undefined&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});r=n.svg.axis().scale(this.graph.x).orient(this.orientation);r.tickFormat(t.tickFormat||function(n){return n});this.tickValues&&r.tickValues(this.tickValues);this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);u=Math.floor(this.width*i/2)||0;this.orientation=="top"?(e=this.height||this.graph.height,f="translate("+u+","+e+")"):f="translate("+u+", 0)";this.element&&this.vis.selectAll("*").remove();this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",f).call(r.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));o=(this.orientation=="bottom"?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(r.ticks(this.ticks).tickSubdivide(0).tickSize(o)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)});this._renderHeight=this.graph.height};this._discoverSize=function(n,t){var r,u,f;typeof window!="undefined"&&(r=window.getComputedStyle(n,null),u=parseInt(r.getPropertyValue("height"),10),t.auto||(f=parseInt(r.getPropertyValue("width"),10)));this.width=(t.width||f||this.graph.width)*(1+i);this.height=t.height||u||40};this.initialize(t)},t.namespace("Rickshaw.Graph.Axis.Y"),t.Graph.Axis.Y=t.Class.create({initialize:function(t){this.graph=t.graph;this.orientation=t.orientation||"right";this.pixelsPerTick=t.pixelsPerTick||75;t.ticks&&(this.staticTicks=t.ticks);t.tickValues&&(this.tickValues=t.tickValues);this.tickSize=t.tickSize||4;this.ticksTreatment=t.ticksTreatment||"plain";this.tickFormat=t.tickFormat||function(n){return n};this.berthRate=.1;t.element?(this.element=t.element,this.vis=n.select(t.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:t.width,height:t.height})):this.vis=this.graph.vis;var i=this;this.graph.onUpdate(function(){i.render()})},setSize:function(n){var t,i,r,u;(n=n||{},this.element)&&(typeof window!="undefined"&&(t=window.getComputedStyle(this.element.parentNode,null),i=parseInt(t.getPropertyValue("width"),10),n.auto||(r=parseInt(t.getPropertyValue("height"),10))),this.width=n.width||i||this.graph.width*this.berthRate,this.height=n.height||r||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate)),u=this.height*this.berthRate,this.orientation=="left"&&(this.element.style.top=-1*u+"px"))},render:function(){this._renderHeight!==undefined&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0});this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var n=this._drawAxis(this.graph.y);this._drawGrid(n);this._renderHeight=this.graph.height},_drawAxis:function(t){var i=n.svg.axis().scale(t).orient(this.orientation),r,u;return i.tickFormat(this.tickFormat),this.tickValues&&i.tickValues(this.tickValues),this.orientation=="left"&&(r=this.height*this.berthRate,u="translate("+this.width+", "+r+")"),this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",u).call(i.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),i},_drawGrid:function(n){var t=(this.orientation=="right"?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(n.ticks(this.ticks).tickSubdivide(0).tickSize(t)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),t.namespace("Rickshaw.Graph.Axis.Y.Scaled"),t.Graph.Axis.Y.Scaled=t.Class.create(t.Graph.Axis.Y,{initialize:function($super,n){if(typeof n.scale=="undefined")throw new Error("Scaled requires scale");this.scale=n.scale;this.grid=typeof n.grid=="undefined"?!0:n.grid;$super(n)},_drawAxis:function($super,t){var i=this.scale.domain(),r=this.graph.renderer.domain().y,u=[Math.min.apply(Math,i),Math.max.apply(Math,i)],f=n.scale.linear().domain([0,1]).range(u),e=[f(r[0]),f(r[1])],o=n.scale.linear().domain(u).range(e),s=this.scale.copy().domain(i.map(o)).range(t.range());return $super(s)},_drawGrid:function($super,n){this.grid&&$super(n)}}),t.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),t.Graph.Behavior.Series.Highlight=function(t){this.graph=t.graph;this.legend=t.legend;var i=this,r={},u=null,f=t.disabledColor||function(t){return n.interpolateRgb(t,n.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(n){n.element.addEventListener("mouseover",function(){u||(u=n,i.legend.lines.forEach(function(t){var u,e;if(n===t){i.graph.renderer.unstack&&(t.series.renderer?t.series.renderer.unstack:!0)&&(u=i.graph.series.indexOf(t.series),t.originalIndex=u,e=i.graph.series.splice(u,1)[0],i.graph.series.push(e));return}r[t.series.name]=r[t.series.name]||t.series.color;t.series.color=f(t.series.color)}),i.graph.update())},!1);n.element.addEventListener("mouseout",function(){if(u)u=null;else return;i.legend.lines.forEach(function(t){if(n===t&&t.hasOwnProperty("originalIndex")){var u=i.graph.series.pop();i.graph.series.splice(t.originalIndex,0,u);delete t.originalIndex}r[t.series.name]&&(t.series.color=r[t.series.name])});i.graph.update()},!1)};this.legend&&this.legend.lines.forEach(function(n){i.addHighlightEvents(n)})},t.namespace("Rickshaw.Graph.Behavior.Series.Order"),t.Graph.Behavior.Series.Order=function(n){this.graph=n.graph;this.legend=n.legend;var t=this;if(typeof jQuery=="undefined")throw"couldn't find jQuery at window.jQuery";if(typeof window.jQuery.ui=="undefined")throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(t.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var i=[],n;for(jQuery(t.legend.list).find("li").each(function(n,t){t.series&&i.push(t.series)}),n=t.graph.series.length-1;n>=0;n--)t.graph.series[n]=i.shift();t.graph.update()}});jQuery(t.legend.list).disableSelection()});this.graph.onUpdate(function(){var n=window.getComputedStyle(t.legend.element).height;t.legend.element.style.height=n})},t.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),t.Graph.Behavior.Series.Toggle=function(n){var t,i;this.graph=n.graph;this.legend=n.legend;t=this;this.addAnchor=function(n){var i=document.createElement("a"),r;i.innerHTML="&#10004;";i.classList.add("action");n.element.insertBefore(i,n.element.firstChild);i.onclick=function(){if(n.series.disabled)n.series.enable(),n.element.classList.remove("disabled");else{if(this.graph.series.filter(function(n){return!n.disabled}).length<=1)return;n.series.disable();n.element.classList.add("disabled")}}.bind(this);r=n.element.getElementsByTagName("span")[0];r.onclick=function(){var r=n.series.disabled,i,u;if(!r)for(i=0;i<t.legend.lines.length;i++)if(u=t.legend.lines[i],n.series!==u.series&&!u.series.disabled){r=!0;break}r?(n.series.enable(),n.element.classList.remove("disabled"),t.legend.lines.forEach(function(t){n.series===t.series||(t.series.disable(),t.element.classList.add("disabled"))})):t.legend.lines.forEach(function(n){n.series.enable();n.element.classList.remove("disabled")})}};this.legend&&(i=jQuery,typeof i!="undefined"&&i(this.legend.list).sortable&&i(this.legend.list).sortable({start:function(n,t){t.item.bind("no.onclick",function(n){n.preventDefault()})},stop:function(n,t){setTimeout(function(){t.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(n){t.addAnchor(n)}));this._addBehavior=function(){this.graph.series.forEach(function(n){n.disable=function(){if(t.graph.series.length<=1)throw"only one series left";n.disabled=!0;t.graph.update()};n.enable=function(){n.disabled=!1;t.graph.update()}})};this._addBehavior();this.updateBehaviour=function(){this._addBehavior()}},t.namespace("Rickshaw.Graph.HoverDetail"),t.Graph.HoverDetail=t.Class.create({initialize:function(n){var i=this.graph=n.graph,t;this.xFormatter=n.xFormatter||function(n){return new Date(n*1e3).toUTCString()};this.yFormatter=n.yFormatter||function(n){return n===null?n:n.toFixed(2)};t=this.element=document.createElement("div");t.className="detail";this.visible=!0;i.element.appendChild(t);this.lastEvent=null;this._addListeners();this.onShow=n.onShow;this.onHide=n.onHide;this.onRender=n.onRender;this.formatter=n.formatter||this.formatter},formatter:function(n,t,i,r,u){return n.name+":&nbsp;"+u},update:function(t){var e,h;if((t=t||this.lastEvent,t)&&(this.lastEvent=t,t.target.nodeName.match(/^(path|svg|rect|circle)$/))){var r=this.graph,u=t.offsetX||t.layerX,o=t.offsetY||t.layerY,s=0,f=[],i;(this.graph.series.active().forEach(function(t){var e=this.graph.stackedData[s++],a,h;if(e.length){var l=r.x.invert(u),w=n.scale.linear().domain([e[0].x,e.slice(-1)[0].x]).range([0,e.length-1]),v=Math.round(w(l));for(v==e.length-1&&v--,a=Math.min(v||0,e.length-1),h=v;h<e.length-1;){if(!e[h]||!e[h+1])break;if(e[h].x<=l&&e[h+1].x>l){a=Math.abs(l-e[h].x)<Math.abs(l-e[h+1].x)?h:h+1;break}e[h+1].x<=l?h++:h--}a<0&&(a=0);var c=e[a],y=Math.sqrt(Math.pow(Math.abs(r.x(c.x)-u),2)+Math.pow(Math.abs(r.y(c.y+c.y0)-o),2)),b=t.xFormatter||this.xFormatter,k=t.yFormatter||this.yFormatter,p={formattedXValue:b(c.x),formattedYValue:k(t.scale?t.scale.invert(c.y):c.y),series:t,value:c,distance:y,order:s,name:t.name};(!i||y<i.distance)&&(i=p);f.push(p)}},this),i)&&(i.active=!0,e=i.value.x,h=i.formattedXValue,this.element.innerHTML="",this.element.style.left=r.x(e)+"px",this.visible&&this.render({points:f,detail:f,mouseX:u,mouseY:o,formattedXValue:h,domainX:e}))}},hide:function(){this.visible=!1;this.element.classList.add("inactive");typeof this.onHide=="function"&&this.onHide()},show:function(){this.visible=!0;this.element.classList.remove("inactive");typeof this.onShow=="function"&&this.onShow()},render:function(n){var a=this.graph,v=n.points,t=v.filter(function(n){return n.active}).shift(),o,h,f,i,e,c,r,u,s,l;if(t.value.y!==null&&(o=t.formattedXValue,h=t.formattedYValue,this.element.innerHTML="",this.element.style.left=a.x(t.value.x)+"px",f=document.createElement("div"),f.className="x_label",f.innerHTML=o,this.element.appendChild(f),i=document.createElement("div"),i.className="item",e=t.series,c=e.scale?e.scale.invert(t.value.y):t.value.y,i.innerHTML=this.formatter(e,t.value.x,c,o,h,t),i.style.top=this.graph.y(t.value.y0+t.value.y)+"px",this.element.appendChild(i),r=document.createElement("div"),r.className="dot",r.style.top=i.style.top,r.style.borderColor=e.color,this.element.appendChild(r),t.active&&(i.classList.add("active"),r.classList.add("active")),u=[f,i],u.forEach(function(n){n.classList.add("left")}),this.show(),s=this._calcLayoutError(u),s>0&&(u.forEach(function(n){n.classList.remove("left");n.classList.add("right")}),l=this._calcLayoutError(u),l>s&&u.forEach(function(n){n.classList.remove("right");n.classList.add("left")})),typeof this.onRender=="function"))this.onRender(n)},_calcLayoutError:function(n){var t=this.element.parentNode.getBoundingClientRect(),i=0,r=n.forEach(function(n){var r=n.getBoundingClientRect();r.width&&(r.right>t.right&&(i+=r.right-t.right),r.left<t.left&&(i+=t.left-r.left))});return i},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(n){this.visible=!0;this.update(n)}.bind(this),!1);this.graph.onUpdate(function(){this.update()}.bind(this));this.graph.element.addEventListener("mouseout",function(n){!n.relatedTarget||n.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),t.namespace("Rickshaw.Graph.JSONP"),t.Graph.JSONP=t.Class.create(t.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),t.namespace("Rickshaw.Graph.Legend"),t.Graph.Legend=t.Class.create({className:"rickshaw_legend",initialize:function(n){this.element=n.element;this.graph=n.graph;this.naturalOrder=n.naturalOrder;this.element.classList.add(this.className);this.list=document.createElement("ul");this.element.appendChild(this.list);this.render();this.graph.onUpdate(function(){})},render:function(){for(var t=this,n;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];n=this.graph.series.map(function(n){return n});this.naturalOrder||(n=n.reverse());n.forEach(function(n){t.addLine(n)})},addLine:function(t){var i=document.createElement("li"),r,u,f;return i.className="line",t.disabled&&(i.className+=" disabled"),t.className&&n.select(i).classed(t.className,!0),r=document.createElement("div"),r.className="swatch",r.style.backgroundColor=t.color,i.appendChild(r),u=document.createElement("span"),u.className="label",u.innerHTML=t.name,i.appendChild(u),this.list.appendChild(i),i.series=t,t.noLegend&&(i.style.display="none"),f={element:i,series:t},this.shelving&&(this.shelving.addAnchor(f),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(f),this.lines.push(f),i}}),t.namespace("Rickshaw.Graph.RangeSlider"),t.Graph.RangeSlider=t.Class.create({initialize:function(n){var i=this.element=n.element,t=this.graph=n.graph;this.slideCallbacks=[];this.build();t.onUpdate(function(){this.update()}.bind(this))},build:function(){var r=this.element,n=this.graph,i=jQuery,t=n.dataDomain(),u=this;i(function(){i(r).slider({range:!0,min:t[0],max:t[1],values:[t[0],t[1]],slide:function(t,i){if(!(i.values[1]<=i.values[0])){n.window.xMin=i.values[0];n.window.xMax=i.values[1];n.update();var r=n.dataDomain();r[0]==i.values[0]&&(n.window.xMin=undefined);r[1]==i.values[1]&&(n.window.xMax=undefined);u.slideCallbacks.forEach(function(t){t(n,n.window.xMin,n.window.xMax)})}}})});i(r)[0].style.width=n.width+"px"},update:function(){var n=this.element,r=this.graph,t=jQuery,u=t(n).slider("option","values"),i=r.dataDomain();t(n).slider("option","min",i[0]);t(n).slider("option","max",i[1]);r.window.xMin==null&&(u[0]=i[0]);r.window.xMax==null&&(u[1]=i[1]);t(n).slider("option","values",u)},onSlide:function(n){this.slideCallbacks.push(n)}}),t.namespace("Rickshaw.Graph.RangeSlider.Preview"),t.Graph.RangeSlider.Preview=t.Class.create({initialize:function(t){if(!t.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!t.graph&&!t.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";if(this.element=t.element,this.element.style.position="relative",this.graphs=t.graph?[t.graph]:t.graphs,this.defaults={height:75,width:400,gripperColor:undefined,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=t.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=n.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],t.width||(this.widthFromGraph=!0),t.height||(this.heightFromGraph=!0),this.widthFromGraph||this.heightFromGraph)this.graphs[0].onConfigure(function(){this.configure(t);this.render()}.bind(this));t.width=t.width||this.graphs[0].width||this.defaults.width;t.height=t.height||this.graphs[0].height*this.heightRatio||this.defaults.height;this.configure(t);this.render()},onSlide:function(n){this.slideCallbacks.push(n)},onConfigure:function(n){this.configureCallbacks.push(n)},configure:function(n){this.config=this.config||{};this.configureCallbacks.forEach(function(t){t(n)});t.keys(this.defaults).forEach(function(t){this.config[t]=t in n?n[t]:t in this.config?this.config[t]:this.defaults[t]},this);("width"in n||"height"in n)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(n){var t=this.previewHeight/this.graphs.length-this.config.frameTopThickness*2,i=this.config.width-this.config.frameHandleThickness*2,r,u;n.setSize({width:i,height:t});this.svg&&(r=t+this.config.frameHandleThickness*2,u=i+this.config.frameHandleThickness*2,this.svg.style("width",u+"px"),this.svg.style("height",r+"px"))},this))},render:function(){var i=this;this.svg=n.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]);this.previewHeight=this.config.height-this.config.frameTopThickness*2;this.previewWidth=this.config.width-this.config.frameHandleThickness*2;this.currentFrame=[0,this.previewWidth];var s=function(n){var u=t.extend({},n.config),f=i.previewHeight/i.graphs.length,e=n.renderer.name,r;t.extend(u,{element:this.appendChild(document.createElement("div")),height:f,width:i.previewWidth,series:n.series,renderer:e});r=new t.Graph(u);i.previews.push(r);n.onUpdate(function(){r.render();i.render()});n.onConfigure(function(n){delete n.height;n.width=n.width-i.config.frameHandleThickness*2;r.configure(n);r.render()});r.render()},e=n.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),r="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";e.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",r).style("-moz-transform",r).style("-ms-transform",r).style("transform",r).each(s);e.exit().remove();var f=this.graphs[0],o=n.scale.linear().domain([0,this.previewWidth]).range(f.dataDomain()),u=[f.window.xMin,f.window.xMax];this.currentFrame[0]=u[0]===undefined?0:Math.round(o.invert(u[0]));this.currentFrame[0]<0&&(this.currentFrame[0]=0);this.currentFrame[1]=u[1]===undefined?this.previewWidth:o.invert(u[1]);this.currentFrame[1]-this.currentFrame[0]<i.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+i.config.minimumFrameWidth);this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0);this._renderDimming();this._renderFrame();this._renderGrippers();this._renderHandles();this._renderMiddle();this._registerMouseEvents()},_renderDimming:function(){var t=this.svg.selectAll("path.dimming").data([null]),n;t.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);n="";n+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness;n+=" h "+this.previewWidth;n+=" v "+this.previewHeight;n+=" h "+-this.previewWidth;n+=" z ";n+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness;n+=" H "+Math.min(this.currentFrame[1]+this.config.frameHandleThickness*2,this.previewWidth+this.config.frameHandleThickness);n+=" v "+this.previewHeight;n+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness);n+=" z";t.attr("d",n)},_renderFrame:function(){var t=this.svg.selectAll("path.frame").data([null]),n;t.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);n="";n+=" M "+this.currentFrame[0]+" 0";n+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness*2);n+=" V "+this.config.height;n+=" H "+this.currentFrame[0];n+=" z";n+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness;n+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness);n+=" v "+this.previewHeight;n+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness);n+=" z";t.attr("d",n)},_renderGrippers:function(){var t=this.svg.selectAll("path.gripper").data([null]),n;t.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);n="";[.4,.6].forEach(function(t){n+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*t)+" "+Math.round(this.config.height*.3);n+=" V "+Math.round(this.config.height*.7);n+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+t))+" "+Math.round(this.config.height*.3);n+=" V "+Math.round(this.config.height*.7)}.bind(this));t.attr("d",n)},_renderHandles:function(){var t=this.svg.selectAll("rect.left_handle").data([null]),n;t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0);t.attr("x",this.currentFrame[0]).attr("height",this.config.height);n=this.svg.selectAll("rect.right_handle").data([null]);n.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0);n.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var n=this.svg.selectAll("rect.middle_handle").data([null]);n.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0);n.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){function e(){var e;t.stop=i._getClientXFromEvent(n.event,t);var f=t.stop-t.start,r=i.frameBeforeDrag.slice(0),u=i.config.minimumFrameWidth;t.rigid&&(u=i.frameBeforeDrag[1]-i.frameBeforeDrag[0]);t.left&&(r[0]=Math.max(r[0]+f,0));t.right&&(r[1]=Math.min(r[1]+f,i.previewWidth));e=r[1]-r[0];e<=u&&(t.left&&(r[0]=r[1]-u),t.right&&(r[1]=r[0]+u),r[0]<=0&&(r[1]-=r[0],r[0]=0),r[1]>=i.previewWidth&&(r[0]-=r[1]-i.previewWidth,r[1]=i.previewWidth));i.graphs.forEach(function(t){var f=n.scale.linear().interpolate(n.interpolateNumber).domain([0,i.previewWidth]).range(t.dataDomain()),u=[f(r[0]),f(r[1])];i.slideCallbacks.forEach(function(n){n(t,u[0],u[1])});r[0]===0&&(u[0]=undefined);r[1]===i.previewWidth&&(u[1]=undefined);t.window.xMin=u[0];t.window.xMax=u[1];t.update()})}function u(){t.target=n.event.target;t.start=i._getClientXFromEvent(n.event,t);i.frameBeforeDrag=i.currentFrame.slice();n.event.preventDefault?n.event.preventDefault():n.event.returnValue=!1;n.select(document).on("mousemove.rickshaw_range_slider_preview",e);n.select(document).on("mouseup.rickshaw_range_slider_preview",f);n.select(document).on("touchmove.rickshaw_range_slider_preview",e);n.select(document).on("touchend.rickshaw_range_slider_preview",f);n.select(document).on("touchcancel.rickshaw_range_slider_preview",f)}function o(){t.left=!0;u()}function s(){t.right=!0;u()}function h(){t.left=!0;t.right=!0;t.rigid=!0;u()}function f(){n.select(document).on("mousemove.rickshaw_range_slider_preview",null);n.select(document).on("mouseup.rickshaw_range_slider_preview",null);n.select(document).on("touchmove.rickshaw_range_slider_preview",null);n.select(document).on("touchend.rickshaw_range_slider_preview",null);n.select(document).on("touchcancel.rickshaw_range_slider_preview",null);delete i.frameBeforeDrag;t.left=!1;t.right=!1;t.rigid=!1}var r=n.select(this.element),t={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},i=this;r.select("rect.left_handle").on("mousedown",o);r.select("rect.right_handle").on("mousedown",s);r.select("rect.middle_handle").on("mousedown",h);r.select("rect.left_handle").on("touchstart",o);r.select("rect.right_handle").on("touchstart",s);r.select("rect.middle_handle").on("touchstart",h)},_getClientXFromEvent:function(n,t){var r,u,i;switch(n.type){case"touchstart":case"touchmove":for(r=n.changedTouches,u=null,i=0;i<r.length;i++)if(r[i].target===t.target){u=r[i];break}return u!==null?u.clientX:undefined;default:return n.clientX}}}),t.namespace("Rickshaw.Graph.Renderer"),t.Graph.Renderer=t.Class.create({initialize:function(n){this.graph=n.graph;this.tension=n.tension||this.tension;this.configure(n)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(n){var f=n||this.graph.stackedData||this.graph.stackData(),r=+Infinity,u=-Infinity,t=+Infinity,i=-Infinity;return f.forEach(function(n){(n.forEach(function(n){if(n.y!=null){var r=n.y+n.y0;r<t&&(t=r);r>i&&(i=r)}}),n.length)&&(n[0].x<r&&(r=n[0].x),n[n.length-1].x>u&&(u=n[n.length-1].x))}),r-=(u-r)*this.padding.left,u+=(u-r)*this.padding.right,t=this.graph.min==="auto"?t:this.graph.min||0,i=this.graph.max===undefined?i:this.graph.max,(this.graph.min==="auto"||t<0)&&(t-=(i-t)*this.padding.bottom),this.graph.max===undefined&&(i+=(i-t)*this.padding.top),{x:[r,u],y:[t,i]}},render:function(n){var r,e,o,t;n=n||{};var u=this.graph,f=n.series||u.series,i=n.vis||u.vis;i.selectAll("*").remove();r=f.filter(function(n){return!n.disabled}).map(function(n){return n.stack});e=i.selectAll("path.path").data(r).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());this.stroke&&(o=i.selectAll("path.stroke").data(r).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory()));t=0;f.forEach(function(n){n.disabled||(n.path=e[0][t],this.stroke&&(n.stroke=o[0][t]),this._styleSeries(n),t++)},this)},_styleSeries:function(t){var i=this.fill?t.color:"none",r=this.stroke?t.color:"none";t.path.setAttribute("fill",i);t.path.setAttribute("stroke",r);t.path.setAttribute("stroke-width",this.strokeWidth);t.className&&n.select(t.path).classed(t.className,!0);t.className&&this.stroke&&n.select(t.stroke).classed(t.className,!0)},configure:function(n){n=n||{};t.keys(this.defaults()).forEach(function(i){if(!n.hasOwnProperty(i)){this[i]=this[i]||this.graph[i]||this.defaults()[i];return}typeof this.defaults()[i]=="object"?t.keys(this.defaults()[i]).forEach(function(t){this[i][t]=n[i][t]!==undefined?n[i][t]:this[i][t]!==undefined?this[i][t]:this.defaults()[i][t]},this):this[i]=n[i]!==undefined?n[i]:this[i]!==undefined?this[i]:this.graph[i]!==undefined?this.graph[i]:this.defaults()[i]},this)},setStrokeWidth:function(n){n!==undefined&&(this.strokeWidth=n)},setTension:function(n){n!==undefined&&(this.tension=n)}}),t.namespace("Rickshaw.Graph.Renderer.Line"),t.Graph.Renderer.Line=t.Class.create(t.Graph.Renderer,{name:"line",defaults:function($super){return t.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var i=this.graph,t=n.svg.line().x(function(n){return i.x(n.x)}).y(function(n){return i.y(n.y)}).interpolate(this.graph.interpolation).tension(this.tension);return t.defined&&t.defined(function(n){return n.y!==null}),t}}),t.namespace("Rickshaw.Graph.Renderer.Stack"),t.Graph.Renderer.Stack=t.Class.create(t.Graph.Renderer,{name:"stack",defaults:function($super){return t.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var t=this.graph,i=n.svg.area().x(function(n){return t.x(n.x)}).y0(function(n){return t.y(n.y0)}).y1(function(n){return t.y(n.y+n.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(n){return n.y!==null}),i}}),t.namespace("Rickshaw.Graph.Renderer.Bar"),t.Graph.Renderer.Bar=t.Class.create(t.Graph.Renderer,{name:"bar",defaults:function($super){var n=t.extend($super(),{gapSize:.05,unstack:!1});return delete n.tension,n},initialize:function($super,n){n=n||{};this.gapSize=n.gapSize||this.gapSize;$super(n)},domain:function($super){var n=$super(),t=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return n.x[1]+=Number(t.magnitude),n},barWidth:function(n){var t=this._frequentInterval(n.stack);return this.graph.x.magnitude(t.magnitude)*(1-this.gapSize)},render:function(n){n=n||{};var t=this.graph,i=n.series||t.series,r=n.vis||t.vis;r.selectAll("*").remove();var u=this.barWidth(i.active()[0]),f=0,o=i.filter(function(n){return!n.disabled}).length,e=this.unstack?u/o:u,s=function(n){var i=[1,0,0,n.y<0?-1:1,0,n.y<0?t.y.magnitude(Math.abs(n.y))*2:0];return"matrix("+i.join(",")+")"};i.forEach(function(n){if(!n.disabled){var u=this.barWidth(n),i=r.selectAll("path").data(n.stack.filter(function(n){return n.y!==null})).enter().append("svg:rect").attr("x",function(n){return t.x(n.x)+f}).attr("y",function(n){return t.y(n.y0+Math.abs(n.y))*(n.y<0?-1:1)}).attr("width",e).attr("height",function(n){return t.y.magnitude(Math.abs(n.y))}).attr("transform",s);Array.prototype.forEach.call(i[0],function(t){t.setAttribute("fill",n.color)});this.unstack&&(f+=e)}},this)},_frequentInterval:function(n){for(var u,f,i={},r=0;r<n.length-1;r++)u=n[r+1].x-n[r].x,i[u]=i[u]||0,i[u]++;return f={count:0,magnitude:1},t.keys(i).forEach(function(n){f.count<i[n]&&(f={count:i[n],magnitude:n})}),f}}),t.namespace("Rickshaw.Graph.Renderer.Area"),t.Graph.Renderer.Area=t.Class.create(t.Graph.Renderer,{name:"area",defaults:function($super){return t.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var t=this.graph,i=n.svg.area().x(function(n){return t.x(n.x)}).y0(function(n){return t.y(n.y0)}).y1(function(n){return t.y(n.y+n.y0)}).interpolate(t.interpolation).tension(this.tension);return i.defined&&i.defined(function(n){return n.y!==null}),i},seriesStrokeFactory:function(){var t=this.graph,i=n.svg.line().x(function(n){return t.x(n.x)}).y(function(n){return t.y(n.y+n.y0)}).interpolate(t.interpolation).tension(this.tension);return i.defined&&i.defined(function(n){return n.y!==null}),i},render:function(n){var f;n=n||{};var i=this.graph,r=n.series||i.series,u=n.vis||i.vis;u.selectAll("*").remove();var e=this.unstack?"append":"insert",o=r.filter(function(n){return!n.disabled}).map(function(n){return n.stack}),t=u.selectAll("path").data(o).enter()[e]("svg:g","g");t.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area");this.stroke&&t.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");f=0;r.forEach(function(n){n.disabled||(n.path=t[0][f++],this._styleSeries(n))},this)},_styleSeries:function(t){t.path&&(n.select(t.path).select(".area").attr("fill",t.color),this.stroke&&n.select(t.path).select(".line").attr("fill","none").attr("stroke",t.stroke||n.interpolateRgb(t.color,"black")(.125)).attr("stroke-width",this.strokeWidth),t.className&&t.path.setAttribute("class",t.className))}}),t.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),t.Graph.Renderer.ScatterPlot=t.Class.create(t.Graph.Renderer,{name:"scatterplot",defaults:function($super){return t.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,n){$super(n)},render:function(n){n=n||{};var t=this.graph,r=n.series||t.series,i=n.vis||t.vis,u=this.dotSize;i.selectAll("*").remove();r.forEach(function(n){if(!n.disabled){var r=i.selectAll("path").data(n.stack.filter(function(n){return n.y!==null})).enter().append("svg:circle").attr("cx",function(n){return t.x(n.x)}).attr("cy",function(n){return t.y(n.y)}).attr("r",function(n){return"r"in n?n.r:u});n.className&&r.classed(n.className,!0);Array.prototype.forEach.call(r[0],function(t){t.setAttribute("fill",n.color)})}},this)}}),t.namespace("Rickshaw.Graph.Renderer.Multi"),t.Graph.Renderer.Multi=t.Class.create(t.Graph.Renderer,{name:"multi",initialize:function($super,n){$super(n)},defaults:function($super){return t.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,n){n=n||{};this.config=n;$super(n)},domain:function($super){var t,i;this.graph.stackData();t=[];i=this._groups();this._stack(i);i.forEach(function(n){var i=n.series.filter(function(n){return!n.disabled}).map(function(n){return n.stack}),r;i.length&&(r=null,r=n.renderer&&n.renderer.domain?n.renderer.domain(i):$super(i),t.push(r))});var r=n.min(t.map(function(n){return n.x[0]})),u=n.max(t.map(function(n){return n.x[1]})),f=n.min(t.map(function(n){return n.y[0]})),e=n.max(t.map(function(n){return n.y[1]}));return{x:[r,u],y:[f,e]}},_groups:function(){var r=this.graph,i={},u;return r.series.forEach(function(u){var o,f;if(!u.disabled){if(!i[u.renderer]){o="http://www.w3.org/2000/svg";f=document.createElementNS(o,"g");r.vis[0][0].appendChild(f);var e=r._renderers[u.renderer],s={},h=[this.defaults(),e.defaults(),this.config,this.graph];h.forEach(function(n){t.extend(s,n)});e.configure(s);i[u.renderer]={renderer:e,series:[],vis:n.select(f)}}i[u.renderer].series.push(u)}},this),u=[],Object.keys(i).forEach(function(n){var t=i[n];u.push(t)}),u},_stack:function(i){return i.forEach(function(i){var r=i.series.filter(function(n){return!n.disabled}),e=r.map(function(n){return n.stack}),u,f;i.renderer.unstack||(u=n.layout.stack(),f=t.clone(u(e)),r.forEach(function(n,i){n._stack=t.clone(f[i])}))},this),i},render:function(){this.graph.series.forEach(function(n){if(!n.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer");});this.graph.vis.selectAll("*").remove();var n=this._groups();n=this._stack(n);n.forEach(function(n){var t=n.series.filter(function(n){return!n.disabled});t.active=function(){return t};n.renderer.render({series:t,vis:n.vis});t.forEach(function(n){n.stack=n._stack||n.stack||n.data})})}}),t.namespace("Rickshaw.Graph.Renderer.LinePlot"),t.Graph.Renderer.LinePlot=t.Class.create(t.Graph.Renderer,{name:"lineplot",defaults:function($super){return t.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var i=this.graph,t=n.svg.line().x(function(n){return i.x(n.x)}).y(function(n){return i.y(n.y)}).interpolate(this.graph.interpolation).tension(this.tension);return t.defined&&t.defined(function(n){return n.y!==null}),t},render:function(n){n=n||{};var t=this.graph,i=n.series||t.series,r=n.vis||t.vis,u=this.dotSize;r.selectAll("*").remove();var f=i.filter(function(n){return!n.disabled}).map(function(n){return n.stack}),e=r.selectAll("path").data(f).enter().append("svg:path").attr("d",this.seriesPathFactory()),o=0;i.forEach(function(n){n.disabled||(n.path=e[0][o++],this._styleSeries(n))},this);i.forEach(function(n){if(!n.disabled){var i=r.selectAll("x").data(n.stack.filter(function(n){return n.y!==null})).enter().append("svg:circle").attr("cx",function(n){return t.x(n.x)}).attr("cy",function(n){return t.y(n.y)}).attr("r",function(n){return"r"in n?n.r:u});Array.prototype.forEach.call(i[0],function(t){t&&(t.setAttribute("data-color",n.color),t.setAttribute("fill","white"),t.setAttribute("stroke",n.color),t.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),t.namespace("Rickshaw.Graph.Smoother"),t.Graph.Smoother=t.Class.create({initialize:function(n){this.graph=n.graph;this.element=n.element;this.aggregationScale=1;this.build();this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var n=this,t=jQuery;this.element&&t(function(){t(n.element).slider({min:1,max:100,slide:function(t,i){n.setScale(i.value);n.graph.update()}})})},setScale:function(n){if(n<1)throw"scale out of range: "+n;this.aggregationScale=n;this.graph.update()},transformer:function(n){if(this.aggregationScale==1)return n;var t=[];return n.forEach(function(n){for(var r=[];n.length;){var u=0,f=0,i=n.splice(0,this.aggregationScale);i.forEach(function(n){u+=n.x/i.length;f+=n.y/i.length});r.push({x:u,y:f})}t.push(r)}.bind(this)),t}}),t.namespace("Rickshaw.Graph.Socketio"),t.Graph.Socketio=t.Class.create(t.Graph.Ajax,{request:function(){var n=io.connect(this.dataURL),t=this;n.on("rickshaw",function(n){t.success(n)})}}),t.namespace("Rickshaw.Series"),t.Series=t.Class.create(Array,{initialize:function(n,i,r){r=r||{};this.palette=new t.Color.Palette(i);this.timeBase=typeof r.timeBase=="undefined"?Math.floor((new Date).getTime()/1e3):r.timeBase;var u=typeof r.timeInterval=="undefined"?1e3:r.timeInterval;this.setTimeInterval(u);n&&typeof n=="object"&&Array.isArray(n)&&n.forEach(function(n){this.addItem(n)},this)},addItem:function(n){if(typeof n.name=="undefined")throw"addItem() needs a name";n.color=n.color||this.palette.color(n.name);n.data=n.data||[];n.data.length===0&&this.length&&this.getIndex()>0?this[0].data.forEach(function(t){n.data.push({x:t.x,y:0})}):n.data.length===0&&n.data.push({x:this.timeBase-(this.timeInterval||0),y:0});this.push(n);this.legend&&this.legend.addLine(this.itemByName(n.name))},addData:function(n,i){var r=this.getIndex();t.keys(n).forEach(function(n){this.itemByName(n)||this.addItem({name:n})},this);this.forEach(function(t){t.data.push({x:i||(r*this.timeInterval||1)+this.timeBase,y:n[t.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return this[t]},setTimeInterval:function(n){this.timeInterval=n/1e3},setTimeBase:function(n){this.timeBase=n},dump:function(){var n={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(t){var i={color:t.color,name:t.name,data:[]};t.data.forEach(function(n){i.data.push({x:n.x,y:n.y})});n.items.push(i)}),n},load:function(n){n.timeInterval&&(this.timeInterval=n.timeInterval);n.timeBase&&(this.timeBase=n.timeBase);n.items&&n.items.forEach(function(n){this.push(n);this.legend&&this.legend.addLine(this.itemByName(n.name))},this)}}),t.Series.zeroFill=function(n){t.Series.fill(n,0)},t.Series.fill=function(n,t){for(var r,i=0,u=n.map(function(n){return n.data});i<Math.max.apply(null,u.map(function(n){return n.length}));)r=Math.min.apply(null,u.filter(function(n){return n[i]}).map(function(n){return n[i].x})),u.forEach(function(n){n[i]&&n[i].x==r||n.splice(i,0,{x:r,y:t})}),i++},t.namespace("Rickshaw.Series.FixedDuration"),t.Series.FixedDuration=t.Class.create(t.Series,{initialize:function(n,i,r){if(r=r||{},typeof r.timeInterval=="undefined")throw new Error("FixedDuration series requires timeInterval");if(typeof r.maxDataPoints=="undefined")throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new t.Color.Palette(i),this.timeBase=typeof r.timeBase=="undefined"?Math.floor((new Date).getTime()/1e3):r.timeBase,this.setTimeInterval(r.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=r.maxDataPoints,n&&typeof n=="object"&&Array.isArray(n)&&(n.forEach(function(n){this.addItem(n)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,typeof this.maxDataPoints!="undefined"&&this.currentSize<this.maxDataPoints)for(var u=this.maxDataPoints-this.currentSize-1;u>1;u--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(n){n.data.unshift({x:((u-1)*this.timeInterval||1)+this.timeBase,y:0,i:u})},this)},addData:function($super,n,t){if($super(n,t),this.currentSize+=1,this.currentIndex+=1,this.maxDataPoints!==undefined)while(this.currentSize>this.maxDataPoints)this.dropData()},dropData:function(){this.forEach(function(n){n.data.splice(0,1)});this.currentSize-=1},getIndex:function(){return this.currentIndex}}),t}),function(n){"use strict";var i=function(){var t=this;n(document).ready(function(){t.initialize()})},t=i.prototype;i.SCREEN_XS=480;i.SCREEN_SM=768;i.SCREEN_MD=992;i.SCREEN_LG=1200;t._callFunctions=null;t._resizeTimer=null;t.initialize=function(){this._enableEvents();this._initBreakpoints();this._initInk();this._initAccordion()};t._enableEvents=function(){var t=this;n(window).on("resize",function(n){clearTimeout(t._resizeTimer);t._resizeTimer=setTimeout(function(){t._handleFunctionCalls(n)},300)})};t.getKnobStyle=function(t){var i=t.closest(".knob");return{width:Math.floor(i.outerWidth()),height:Math.floor(i.outerHeight()),fgColor:i.css("color"),bgColor:i.css("border-top-color"),draw:function(){t.data("percentage")&&n(this.i).val(this.cv+"%")}}};t._initAccordion=function(){n(".panel-group .card .in").each(function(){var t=n(this).parent();t.addClass("expanded")});n(".panel-group").on("hide.bs.collapse",function(t){var i=n(t.target),r=i.parent();r.removeClass("expanded")});n(".panel-group").on("show.bs.collapse",function(t){var r=n(t.target),i=r.parent(),u=i.closest(".panel-group");u.find(".card.expanded").removeClass("expanded");i.addClass("expanded")})};t._initInk=function(){var t=this;n(".ink-reaction").on("click",function(i){var r=n(this).get(0).getBoundingClientRect(),c=i.clientX-r.left,l=i.clientY-r.top,e=t.getBackground(n(this)),o=t.getLuma(e)>183?" inverse":"",u=n('<div class="ink'+o+'"><\/div>'),f=n(this).offset(),s=i.pageX-f.left,h=i.pageY-f.top;u.css({top:h,left:s}).appendTo(n(this));window.setTimeout(function(){u.remove()},1500)})};t.getBackground=function(n){var t=n.css("background-color"),i=parseFloat(t.split(",")[3],10);return(isNaN(i)||i>.8)&&t!=="transparent"?t:n.is("body")?!1:this.getBackground(n.parent())};t.getLuma=function(n){var t=n.substring(4,n.length-1).split(","),i=t[0],r=t[1],u=t[2];return.2126*i+.7152*r+.0722*u};t._initBreakpoints=function(){var t="";t+='<div id="device-breakpoints">';t+='<div class="device-xs visible-xs" data-breakpoint="xs"><\/div>';t+='<div class="device-sm visible-sm" data-breakpoint="sm"><\/div>';t+='<div class="device-md visible-md" data-breakpoint="md"><\/div>';t+='<div class="device-lg visible-lg" data-breakpoint="lg"><\/div>';t+="<\/div>";n("body").append(t)};t.isBreakpoint=function(t){return n(".device-"+t).is(":visible")};t.minBreakpoint=function(t){var i=["xs","sm","md","lg"],r=n("#device-breakpoints div:visible").data("breakpoint");return n.inArray(t,i)<n.inArray(r,i)};t.callOnResize=function(n){this._callFunctions===null&&(this._callFunctions=[]);this._callFunctions.push(n);n.call()};t._handleFunctionCalls=function(){if(this._callFunctions!==null)for(var n=0;n<this._callFunctions.length;n++)this._callFunctions[n].call()};window.materialadmin=window.materialadmin||{};window.materialadmin.App=new i}(jQuery),function(n,t){"use strict";var r=function(){var n=this;t(document).ready(function(){n.initialize()})},i=r.prototype;i.initialize=function(){};i.addCardLoader=function(n){var i=t('<div class="card-loader"><\/div>').appendTo(n),r,u;i.hide().fadeIn();r={lines:17,length:0,width:3,radius:6,corners:1,rotate:13,direction:1,color:"#000",speed:2,trail:76,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9};u=new Spinner(r).spin(i.get(0));n.data("card-spinner",u)};i.removeCardLoader=function(n){var i=n.data("card-spinner"),t=n.find(".card-loader");t.fadeOut(function(){i.stop();t.remove()})};i.toggleCardCollapse=function(n,i){i=typeof i!="undefined"?i:400;var r=!1;n.find(".nano").slideToggle(i);n.find(".card-body").slideToggle(i,function(){r===!1&&(t("#COLLAPSER").triggerHandler("card.bb.collapse",[!t(this).is(":visible")]),r=!0)});n.toggleClass("card-collapsed")};i.removeCard=function(n){n.fadeOut(function(){n.remove()})};window.materialadmin.AppCard=new r}(this.materialadmin,jQuery),function(n,t){"use strict";var r=function(){var n=this;t(document).ready(function(){n.initialize()})},i=r.prototype;i.initialize=function(){this._enableEvents();this._initRadioAndCheckbox();this._initFloatingLabels();this._initValidation()};i._enableEvents=function(){var n=this;t('[data-submit="form"]').on("click",function(n){n.preventDefault();var i=t(n.currentTarget).attr("href");t(i).submit()});t("textarea.autosize").on("focus",function(){t(this).autosize({append:""})})};i._initRadioAndCheckbox=function(){t(".checkbox-styled input, .radio-styled input").each(function(){t(this).next("span").length===0&&t(this).after("<span><\/span>")})};i._initFloatingLabels=function(){var n=this;t(".floating-label .form-control").on("keyup change",function(n){var i=t(n.currentTarget);t.trim(i.val())!==""?i.addClass("dirty").removeClass("static"):i.removeClass("dirty").removeClass("static")});t(".floating-label .form-control").each(function(){var n=t(this);t.trim(n.val())!==""&&n.addClass("static").addClass("dirty")});t(".form-horizontal .form-control").each(function(){t(this).after('<div class="form-control-line"><\/div>')})};i._initValidation=function(){t.isFunction(t.fn.validate)&&(t.validator.setDefaults({highlight:function(n){t(n).closest(".form-group").addClass("has-error")},unhighlight:function(n){t(n).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(n,t){t.parent(".input-group").length?n.insertAfter(t.parent()):t.parent("label").length?n.insertAfter(t.parent()):n.insertAfter(t)}}),t(".form-validate").each(function(){var n=t(this).validate();t(this).data("validator",n)}))};window.materialadmin.AppForm=new r}(this.materialadmin,jQuery),function(n,t){"use strict";var i=function(){var n=this;t(document).ready(function(){n.initialize()})},r=i.prototype;i.MENU_MAXIMIZED=1;i.MENU_COLLAPSED=2;i.MENU_HIDDEN=3;r._lastOpened=null;r.initialize=function(){this._enableEvents();this._invalidateMenu();this._evalMenuScrollbar()};r._enableEvents=function(){var n=this;t(window).on("resize",function(t){n._handleScreenSize(t)});t('[data-toggle="menubar"]').on("click",function(t){n._handleMenuToggleClick(t)});t('[data-dismiss="menubar"]').on("click",function(){n._handleMenubarLeave()});t("#main-menu").on("click","li",function(t){n._handleMenuItemClick(t)});t("#main-menu").on("click","a",function(t){n._handleMenuLinkClick(t)});t("body.menubar-hoverable").on("mouseenter","#menubar",function(){setTimeout(function(){n._handleMenubarEnter()},1)})};r._handleScreenSize=function(n){this._invalidateMenu();this._evalMenuScrollbar(n)};r._handleMenuToggleClick=function(){materialadmin.App.isBreakpoint("xs")||t("body").toggleClass("menubar-pin");var n=this.getMenuState();n===i.MENU_COLLAPSED?this._handleMenubarEnter():n===i.MENU_MAXIMIZED?this._handleMenubarLeave():n===i.MENU_HIDDEN&&this._handleMenubarEnter()};r._handleMenuItemClick=function(n){var u;n.stopPropagation();var r=t(n.currentTarget),f=r.find("> ul"),e=r.closest("ul");this._handleMenubarEnter(r);f.children().length!==0&&(this._closeSubMenu(e),u=this.getMenuState()===i.MENU_COLLAPSED,(u||r.hasClass("expanded")===!1)&&this._openSubMenu(r))};r._handleMenubarEnter=function(n){var i=this,f=t("body").hasClass("offcanvas-left-expanded"),e=t("#menubar").data("expanded"),r=n!==undefined,u;if((r===!0||f===!1)&&e!==!0){t("#content").one("mouseover",function(){i._handleMenubarLeave()});t("body").addClass("menubar-visible");t("#menubar").data("expanded",!0);t("#menubar").triggerHandler("enter");r===!1&&(this._lastOpened?(i=this,this._openSubMenu(this._lastOpened,0),this._lastOpened.parents(".gui-folder").each(function(){i._openSubMenu(t(this),0)})):(u=t("#main-menu > li.active"),this._openSubMenu(u,0)))}};r._handleMenubarLeave=function(){(t("body").removeClass("menubar-visible"),materialadmin.App.minBreakpoint("md")&&t("body").hasClass("menubar-pin"))||(t("#menubar").data("expanded",!1),materialadmin.App.isBreakpoint("xs")===!1&&this._closeSubMenu(t("#main-menu")))};r._handleMenuLinkClick=function(n){this.getMenuState()!==i.MENU_MAXIMIZED&&n.preventDefault()};r._closeSubMenu=function(n){var i=this;n.find("> li > ul").stop().slideUp(170,function(){t(this).closest("li").removeClass("expanded");i._evalMenuScrollbar()})};r._openSubMenu=function(n,i){var r=this;typeof i=="undefined"&&(i=170);this._lastOpened=n;n.addClass("expanding");n.find("> ul").stop().slideDown(i,function(){n.addClass("expanded");n.removeClass("expanding");r._evalMenuScrollbar();t("#main-menu ul").removeAttr("style")})};r._invalidateMenu=function(){var n=t("#main-menu a.active");n.parentsUntil(t("#main-menu")).each(function(){t(this).is("li")&&(t(this).addClass("active"),t(this).addClass("expanded"))});this.getMenuState()===i.MENU_COLLAPSED&&t("#main-menu").find("> li").removeClass("expanded");t("body").hasClass("menubar-visible")&&this._handleMenubarEnter();t("#main-menu").triggerHandler("ready");t("#menubar").addClass("animate")};r.getMenuState=function(){var n=t("#menubar").css("transform"),r=n?n.match(/-?[\d\.]+/g):null,u=i.MENU_MAXIMIZED;return r===null?t("#menubar").width()<=100?i.MENU_COLLAPSED:i.MENU_MAXIMIZED:r[4]==="0"?i.MENU_MAXIMIZED:i.MENU_HIDDEN};r._evalMenuScrollbar=function(){var n,i,r,f,e,u;t.isFunction(t.fn.nanoScroller)&&(n=t("#menubar .menubar-foot-panel").outerHeight(),n=Math.max(n,1),t(".menubar-scroll-panel").css({"padding-bottom":n}),i=t("#menubar"),i.length!==0)&&(r=t(".menubar-scroll-panel"),f=r.parent(),f.hasClass("nano-content")===!1&&r.wrap('<div class="nano"><div class="nano-content"><\/div><\/div>'),e=t(window).height()-i.position().top-i.find(".nano").position().top,u=r.closest(".nano"),u.css({height:e}),u.nanoScroller({preventPageScrolling:!0,iOSNativeScrolling:!0}))};window.materialadmin.AppNavigation=new i}(this.materialadmin,jQuery),function(n,t){"use strict";var r=function(){var n=this;t(document).ready(function(){n.initialize()})},i=r.prototype;i._clearSearchTimer=null;i.initialize=function(){this._enableEvents()};i._enableEvents=function(){var n=this;t(".navbar-search .btn").on("click",function(t){n._handleButtonClick(t)});t(".navbar-search input").on("blur",function(t){n._handleFieldBlur(t)})};i._handleButtonClick=function(n){n.preventDefault();var i=t(n.currentTarget).closest("form"),r=i.find("input"),u=r.val();t.trim(u)===""?(i.addClass("expanded"),r.focus()):(i.addClass("expanded"),i.submit(),clearTimeout(this._clearSearchTimer))};i._handleFieldBlur=function(n){var i=t(n.currentTarget),r=i.closest("form");r.removeClass("expanded");clearTimeout(this._clearSearchTimer);this._clearSearchTimer=setTimeout(function(){i.val("")},300)};window.materialadmin.AppNavSearch=new r}(this.materialadmin,jQuery),function(n,t){"use strict";var r=function(){var n=this;t(document).ready(function(){n.initialize()})},i=r.prototype;i._timer=null;i._useBackdrop=null;i.initialize=function(){this._enableEvents()};i._enableEvents=function(){var n=this;t(window).on("resize",function(t){n._handleScreenSize(t)});t(".offcanvas").on("refresh",function(t){n.evalScrollbar(t)});t('[data-toggle="offcanvas"]').on("click",function(i){i.preventDefault();n._handleOffcanvasOpen(t(i.currentTarget))});t('[data-dismiss="offcanvas"]').on("click",function(){n._handleOffcanvasClose()});t("#base").on("click","> .backdrop",function(){n._handleOffcanvasClose()});t('[data-toggle="offcanvas-left"].active').each(function(){n._handleOffcanvasOpen(t(this))});t('[data-toggle="offcanvas-right"].active').each(function(){n._handleOffcanvasOpen(t(this))})};i._handleScreenSize=function(n){this.evalScrollbar(n)};i._handleOffcanvasOpen=function(n){if(n.hasClass("active")){this._handleOffcanvasClose();return}var t=n.attr("href");this._useBackdrop=n.data("backdrop")===undefined?!0:n.data("backdrop");this.openOffcanvas(t);this.invalidate()};i._handleOffcanvasClose=function(){this.closeOffcanvas();this.invalidate()};i.openOffcanvas=function(n){var u,i,r;this.closeOffcanvas();t(n).addClass("active");u=t(n).closest(".offcanvas:first").length>0;this._useBackdrop&&t("body").addClass("offcanvas-expanded");i=t(n).width();i>t(document).width()&&(i=t(document).width()-8,t(n+".active").css({width:i}));i=u?i:"-"+i;r="translate("+i+"px, 0)";t(n+".active").css({"-webkit-transform":r,"-ms-transform":r,"-o-transform":r,transform:r})};i.closeOffcanvas=function(){t('[data-toggle="offcanvas"]').removeClass("expanded");t(".offcanvas-pane").removeClass("active");t(".offcanvas-pane").css({"-webkit-transform":"","-ms-transform":"","-o-transform":"",transform:""})};i.toggleButtonState=function(){var n=t(".offcanvas-pane.active").attr("id");t('[data-toggle="offcanvas"]').removeClass("active");t('[href="#'+n+'"]').addClass("active")};i.toggleBackdropState=function(){t(".offcanvas-pane.active").length>0&&this._useBackdrop?this._addBackdrop():this._removeBackdrop()};i._addBackdrop=function(){t("#base > .backdrop").length===0&&t("#base").data("backdrop")!=="hidden"&&t('<div class="backdrop"><\/div>').hide().appendTo("#base").fadeIn()};i._removeBackdrop=function(){t("#base > .backdrop").fadeOut(function(){t(this).remove()})};i.toggleBodyScrolling=function(){if(clearTimeout(this._timer),t(".offcanvas-pane.active").length>0&&this._useBackdrop){var n=this.measureScrollbar(),i=parseInt(t("body").css("padding-right")||0,10);n!==i&&(t("body").css("padding-right",i+n),t(".headerbar").css("padding-right",i+n))}else this._timer=setTimeout(function(){t("body").removeClass("offcanvas-expanded");t("body").css("padding-right","");t(".headerbar").removeClass("offcanvas-expanded");t(".headerbar").css("padding-right","")},330)};i.invalidate=function(){this.toggleButtonState();this.toggleBackdropState();this.toggleBodyScrolling();this.evalScrollbar()};i.evalScrollbar=function(){var i,n,u,f,r;t.isFunction(t.fn.nanoScroller)&&(i=t(".offcanvas-pane.active"),i.length!==0)&&(n=t(".offcanvas-pane.active .offcanvas-body"),u=n.parent(),u.hasClass("nano-content")===!1&&n.wrap('<div class="nano"><div class="nano-content"><\/div><\/div>'),f=t(window).height()-i.find(".nano").position().top,r=n.closest(".nano"),r.css({height:f}),r.nanoScroller({preventPageScrolling:!0}))};i.measureScrollbar=function(){var n=document.createElement("div"),i;return n.className="modal-scrollbar-measure",t("body").append(n),i=n.offsetWidth-n.clientWidth,t("body")[0].removeChild(n),i};window.materialadmin.AppOffcanvas=new r}(this.materialadmin,jQuery),function(n,t){"use strict";var r=function(){var n=this;t(document).ready(function(){n.initialize()})},i=r.prototype;i.initialize=function(){this._initScroller();this._initTabs();this._initTooltips();this._initPopover();this._initSortables()};i._initScroller=function(){t.isFunction(t.fn.nanoScroller)&&(t.each(t(".scroll"),function(){var n=t(this);materialadmin.AppVendor.addScroller(n)}),materialadmin.App.callOnResize(function(){t.each(t(".scroll-xs"),function(){var n=t(this);n.is(":visible")&&(materialadmin.App.minBreakpoint("xs")?materialadmin.AppVendor.removeScroller(n):materialadmin.AppVendor.addScroller(n))});t.each(t(".scroll-sm"),function(){var n=t(this);n.is(":visible")&&(materialadmin.App.minBreakpoint("sm")?materialadmin.AppVendor.removeScroller(n):materialadmin.AppVendor.addScroller(n))});t.each(t(".scroll-md"),function(){var n=t(this);n.is(":visible")&&(materialadmin.App.minBreakpoint("md")?materialadmin.AppVendor.removeScroller(n):materialadmin.AppVendor.addScroller(n))});t.each(t(".scroll-lg"),function(){var n=t(this);n.is(":visible")&&(materialadmin.App.minBreakpoint("lg")?materialadmin.AppVendor.removeScroller(n):materialadmin.AppVendor.addScroller(n))})}))};i.addScroller=function(n){n.wrap('<div class="nano"><div class="nano-content"><\/div><\/div>');var t=n.closest(".nano");t.css({height:n.outerHeight()});t.nanoScroller();n.css({height:"auto"})};i.removeScroller=function(n){n.parent().parent().hasClass("nano")!==!1&&(n.parent().parent().nanoScroller({destroy:!0}),n.parent(".nano-content").replaceWith(n),n.parent(".nano").replaceWith(n),n.attr("style",""))};i._initSortables=function(){t.isFunction(t.fn.sortable)&&t('[data-sortable="true"]').sortable({placeholder:"ui-state-highlight",delay:100,start:function(n,t){t.placeholder.height(t.item.outerHeight()-1)}})};i._initTabs=function(){t.isFunction(t.fn.tab)&&t('[data-toggle="tabs"] a').click(function(n){n.preventDefault();t(this).tab("show")})};i._initTooltips=function(){t.isFunction(t.fn.tooltip)&&t('[data-toggle="tooltip"]').tooltip({container:"body"})};i._initPopover=function(){t.isFunction(t.fn.popover)&&t('[data-toggle="popover"]').popover({container:"body"})};window.materialadmin.AppVendor=new r}(this.materialadmin,jQuery);$(document).ready(function(){initControl(materialadmin,jQuery);var n=jQuery("[init]");n&&n.length>0&&(initPage=eval(n.attr("init")),typeof initPage=="function"&&initPage())});
//# sourceMappingURL=site.min.js.map